<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<title>Nim basics</title>
<link rel="stylesheet" href="./styles/style.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="./rouge-gruvbox.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Nim basics</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_対象とする読者">対象とする読者</a></li>
<li><a href="#_読者として対象ではない_方">読者として対象ではない 方</a></li>
<li><a href="#_このチュートリアルの使い方">このチュートリアルの使い方</a></li>
<li><a href="#_インストール">インストール</a>
<ul class="sectlevel1">
<li><a href="#_nimのインストール">Nimのインストール</a></li>
<li><a href="#_追加のツールのインストール">追加のツールのインストール</a></li>
<li><a href="#_インストールの確認">インストールの確認</a></li>
</ul>
</li>
<li><a href="#_値の命名">値の命名</a>
<ul class="sectlevel1">
<li><a href="#_変数の宣言">変数の宣言</a></li>
<li><a href="#_書き換え不可の代入">書き換え不可の代入</a>
<ul class="sectlevel2">
<li><a href="#_const">Const</a></li>
<li><a href="#_let">Let</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_基本データ型">基本データ型</a>
<ul class="sectlevel1">
<li><a href="#_整数">整数</a></li>
<li><a href="#_浮動小数点数">浮動小数点数</a>
<ul class="sectlevel2">
<li><a href="#_浮動小数点数と整数の変換">浮動小数点数と整数の変換</a></li>
</ul>
</li>
<li><a href="#_文字">文字</a></li>
<li><a href="#_文字列">文字列</a>
<ul class="sectlevel2">
<li><a href="#_特殊文字">特殊文字</a></li>
<li><a href="#_文字列の結合">文字列の結合</a></li>
</ul>
</li>
<li><a href="#_真偽">真偽</a>
<ul class="sectlevel2">
<li><a href="#_関係演算子">関係演算子</a></li>
<li><a href="#_論理演算子">論理演算子</a></li>
</ul>
</li>
<li><a href="#_まとめ">まとめ</a></li>
<li><a href="#_練習問題">練習問題</a></li>
</ul>
</li>
<li><a href="#_制御の流れ">制御の流れ</a>
<ul class="sectlevel1">
<li><a href="#_if_statement">If statement</a>
<ul class="sectlevel2">
<li><a href="#_else">Else</a></li>
<li><a href="#_elif">Elif</a></li>
</ul>
</li>
<li><a href="#_case">Case</a></li>
</ul>
</li>
<li><a href="#_loops">Loops</a>
<ul class="sectlevel1">
<li><a href="#_for_loop">For loop</a></li>
<li><a href="#_while_loop">While loop</a></li>
<li><a href="#_break_and_continue">Break and continue</a></li>
<li><a href="#_exercises">Exercises</a></li>
</ul>
</li>
<li><a href="#_containers">Containers</a>
<ul class="sectlevel1">
<li><a href="#_arrays">Arrays</a></li>
<li><a href="#_sequences">Sequences</a></li>
<li><a href="#_indexing_and_slicing">Indexing and slicing</a></li>
<li><a href="#_tuples">Tuples</a></li>
<li><a href="#_exercises_2">Exercises</a></li>
</ul>
</li>
<li><a href="#_procedures">Procedures</a>
<ul class="sectlevel1">
<li><a href="#_declaring_a_procedure">Declaring a procedure</a></li>
<li><a href="#_calling_the_procedures">Calling the procedures</a></li>
<li><a href="#_result_variable">Result variable</a></li>
<li><a href="#_forward_declaration">Forward declaration</a></li>
<li><a href="#_exercises_3">Exercises</a></li>
</ul>
</li>
<li><a href="#_modules">Modules</a>
<ul class="sectlevel1">
<li><a href="#_importing_a_module">Importing a module</a></li>
<li><a href="#_creating_our_own">Creating our own</a></li>
</ul>
</li>
<li><a href="#_interacting_with_user_input">Interacting with user input</a>
<ul class="sectlevel1">
<li><a href="#_reading_from_a_file">Reading from a file</a></li>
<li><a href="#_reading_user_input">Reading user input</a></li>
<li><a href="#_dealing_with_numbers">Dealing with numbers</a></li>
<li><a href="#_exercises_4">Exercises</a></li>
</ul>
</li>
<li><a href="#_conclusion">Conclusion</a>
<ul class="sectlevel1">
<li><a href="#_next_steps">Next steps</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://nim-lang.org/">Nim</a>は比較的新しいプログラミング言語で，読みやすく高性能なコードを書くことが可能です。このNimチュートリアルの読者は，おそらくNimについてご存知でしょう。</p>
</div>
<div class="paragraph">
<p>このチュートリアルの原文は<a href="https://narimiran.github.io/nim-basics/">オンライン</a>と<a href="https://github.com/narimiran/nim-basics/raw/master/nim-basics.pdf">PDF</a>で，和訳は<a href="https://www.dpac.dpri.kyoto-u.ac.jp/enomoto/nim-basics/">オンライン</a>と<a href="https://www.dpac.dpri.kyoto-u.ac.jp/enomoto/nim-basics/nim-basics.pdf">PDF</a>で提供されています。</p>
</div>
<div class="paragraph">
<p>このチュートリアルは作成途中です。もし誤りを見つけたり，改善案があれば<a href="https://github.com/narimiran/nim-basics/issues">issue tracker</a>に報告してください。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_対象とする読者">対象とする読者</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>プログラミングの経験がないか，始めて日が浅い方</p>
</li>
<li>
<p>他の言語でのプログラミング経験がある方</p>
</li>
<li>
<p>初めてNimについて探求したいので，最初から始めたい方</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_読者として対象ではない_方">読者として対象ではない 方</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>多くのプログラミング経験がある方は他のより進んだチュートリアルをお勧めします。
<a href="https://nim-lang.org/docs/tut1.html">公式チュートリアル</a>や<a href="https://nim-by-example.github.io/">Nim by Example</a>参照。</p>
</li>
<li>
<p>Nimの経験がある方（このチュートリアルの改善にご助力いただければ幸いです。）</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_このチュートリアルの使い方">このチュートリアルの使い方</h2>
<div class="sectionbody">
<div class="paragraph">
<p>このチュートリアルの目的はプログラミングとNimの文法の基礎を示すことにより，読者が他のチュートリアルを読み，独力で進むことができるようにすることです。</p>
</div>
<div class="paragraph">
<p>書かれていることを単に読むだけでなく，自分で試してたり，例を改変したり，独自の例を考えてみたり好奇心を持てれば最善です。いくつかの章の終わりにある練習問題は，解けるように作ってありますで，飛ばさないでください。</p>
</div>
<div class="paragraph">
<p>チュートリアルの一部や練習問題について理解するために，さらに助けが必要なら<a href="https://forum.nim-lang.org/">Nim forum</a>や<a href="https://gitter.im/nim-lang/Nim">Nim Gitter channel</a>，<a href="https://discordapp.com/invite/ezDFDw2">Discord server</a>，または Nim&#8217;s IRC channel on freenode, #nim で質問してください。</p>
</div>
</div>
</div>
<h1 id="_インストール" class="sect0">インストール</h1>
<div class="sect1">
<h2 id="_nimのインストール">Nimのインストール</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Nimは3大オペレーティングシステム向けに完成された配布物が用意されており，Nimのインストールについてはいくつかの選択肢があります。</p>
</div>
<div class="paragraph">
<p><a href="https://nim-lang.org/install.html">公式インストール手順</a>に従えば最新版をインストールできます。最新の機能やバグ修正が必要なら，<a href="https://github.com/dom96/choosenim">choosenim</a>と呼ばれるツールを使えば簡単に安定版と最新開発版を切り替えることが可能です。</p>
</div>
<div class="paragraph">
<p>どちらを選んでも，個々のリンク先で説明されているインストール手順に従うだけでNimはインストールされるはずです。後で，インストールがうまくいったか確認します。</p>
</div>
<div class="paragraph">
<p>Linuxを使っている場合は，使用しているディストリビューションのパッケージマネージャにNimが含まれている可能性が高いです。この方法でインストールしようとする場合は，最新版かどうか確認しましょう（何が最新版か確認するにはウェブサイト参照）。最新版でない場合は，上の二つのうちのどちらかの方法でインストールしましょう。</p>
</div>
<div class="paragraph">
<p>このチュートリアルでは安定版を使います。当初このチュートリアルはNim 0.19（2018年9月リリース）に対して執筆されましたが，Nim 1.0を含む新しい版でも動くはずです。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_追加のツールのインストール">追加のツールのインストール</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Nimコードはどんなエディタでも書くことは可能で，ターミナルからコンパイルと実行ができます。構文強調やコード補完を求めるなら，人気のあるコードエディタにはそのような機能を提供するプラグインがあります。</p>
</div>
<div class="paragraph">
<p>多くのNimユーザは<a href="https://code.visualstudio.com/">VS Code</a>を好み，構文強調とコード補完に<a href="https://marketplace.visualstudio.com/items?itemName=nimsaem.nimvscode">Nim extension</a>，迅速なコンパイルと実行に<a href="https://marketplace.visualstudio.com/items?itemName=formulahendry.code-runner">Code Runner extension</a>を使っています。</p>
</div>
<div class="paragraph">
<p>著者は<a href="https://neovim.io/">NeoVim</a>と<a href="https://github.com/alaviss/nim.nvim">このプラグイン</a>（訳者は<a href="https://github.com/zah/nim.vim">こちらのプラグイン</a>）を使って構文強調やコード補完のような機能を追加しています。</p>
</div>
<div class="paragraph">
<p>他のコードエディタで利用できるエディタサポートについては，<a href="https://github.com/nim-lang/Nim/wiki/Editor-Support">ウィキ</a>を参照してください。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_インストールの確認">インストールの確認</h2>
<div class="sectionbody">
<div class="paragraph">
<p>インストールが成功したか確認するために，入門用の例として昔から使われている<a href="https://en.wikipedia.org/wiki/%22Hello,_World!%22_program">Hello World</a>を書いてみます。</p>
</div>
<div class="paragraph">
<p>Nimで<code>Hello World</code>という語句を印字（スクリーンへの表示でプリンタを使った紙への印刷ではない）簡単で余計なコードは不要です。</p>
</div>
<div class="paragraph">
<p>新しいテキストファイル，例えば<code>helloworld.nim</code>に1行のコードを書くだけです。</p>
</div>
<div class="listingblock">
<div class="title">helloworld.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="n">echo</span> <span class="s">"Hello World!"</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
印字したい語句は<code>echo</code>コマンドの後に置いて二重引用符（<code>"</code>）囲む必要があります。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>最初にプログラムをコンパイルしてから，走らせて期待通りに動作するか確認します。</p>
</div>
<div class="paragraph">
<p>ファイルがあるターミナルを開いてください（Linux ではファイルマネージャで右クリックして "Open Terminal here"，ウィンドウズではシフト+ 右クリックでコマンドラインを開くメニューが出ます）。</p>
</div>
<div class="paragraph">
<p>ターミナルで次のように打鍵してプログラムをコンパイルします。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="go">nim c helloworld.nim</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>コンパイルに成功した後でプログラムを実行ができます。Linuxではプログラムを実行するにはターミナルで<code>./helloworld</code>ウィンドウズでは<code>helloworld.exe</code>と打鍵します。</p>
</div>
<div class="paragraph">
<p>ただ一つのコマンドでコンパイルと実行をすることもできます。次のように打鍵してください。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="go">nim c -r helloworld.nim</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>c</code>はNimにファイルをコンパルすることを命じ，<code>-r</code>は直ちに実行することを命令しています。<br>
全てのコンパイラオプションを参照するには，ターミナルで<code>nim --help</code>と打鍵してください。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>上述の VSCode と Code Runner 拡張機能，<code>Ctrl+Alt+N</code>を押すだけでファイルはコンパイル・実行されます。</p>
</div>
<div class="paragraph">
<p>プログラムの実行にどちらの方法を選択した場合でも，すぐに出力ウィンドウ（またはターミナル）に次のように表示されるはずです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">Hello World!</code></pre>
</div>
</div>
<div class="paragraph">
<p>おめでとうございます。初めてのNimプログラムの実行に成功しました。</p>
</div>
<div class="paragraph">
<p>画面に何かを印字する方法（<code>echo</code>コマンドを利用）やプログラムのコンパイル（ターミナルで<code>nim c programName.nim</code>のように打鍵）し，それを実行する（複数の方法）を覚えました。</p>
</div>
<div class="paragraph">
<p>これからNimの基本要素を探索を始めます。これらは簡単なNimプログラムを書くために役立ちます。</p>
</div>
</div>
</div>
<h1 id="_値の命名" class="sect0">値の命名</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>プログラムの中の値に名前をつけると，分かりやすくなります。ユーザの名前を聞いて後で使うために保存しておけば，再度聞き返さずに利用することができます。</p>
</div>
<div class="paragraph">
<p>例として<code>pi = 3.14</code>で名前<code>pi</code>は値<code>3.14</code>に結びついています。
明らかに<code>pi</code>の型は（十進法の）数値です。</p>
</div>
<div class="paragraph">
<p>別の例として<code>firstName = Alice</code>では<code>firstName</code>は値<code>Alice</code>を持つ変数の名前です。
この変数の型は単語ということができるでしょう。</p>
</div>
<div class="paragraph">
<p>代入は，多くのプログラム言語で同様に動作します。
代入では <em>名前</em>, <em>値</em>, そして <em>型</em> があります。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_変数の宣言">変数の宣言</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Nimは<a href="https://en.wikipedia.org/wiki/Type_system#STATIC">静的型付け</a>プログラミング言語で，代入の型は値を使う前に宣言されていなければなりません。</p>
</div>
<div class="paragraph">
<p>Nimでは変更できる値を変更できないものと区別しなければなりませんが，後ほど詳しく説明します。
変数を宣言（変更可能な代入）するには<code>var</code>キーワードを使って，次のような文法により名前と型を書きます（値は後で与えられます）。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span> <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="p">:</span> <span class="o">&lt;</span><span class="k">type</span><span class="o">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>値がわかっているときは，変数を宣言して直ちに値を与えることができます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span> <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="p">:</span> <span class="o">&lt;</span><span class="k">type</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
山括弧 (<code>&lt;&gt;</code>) は変更してよいものを示しています。<br>
従って<code>&lt;name&gt;</code>は山括弧の中の文字通りの単語<code>name</code>ではなくどんな名前でも構いません。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Nimは<a href="https://en.wikipedia.org/wiki/Type_inference">型推論</a>機能があり，明示的に型を指定しなくてもコンパイラが自動的に値から名前代入の型を検出できます。</p>
</div>
<div class="paragraph">
<p>様々な型については<a href="#_基本データ型">次章</a>で述べます。</p>
</div>
<div class="paragraph">
<p>型推論を使うと，次のように明示的な型なしに変数の代入ができます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span> <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Nimにおける代入の例は次のようなものです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span> <span class="n">a</span><span class="p">:</span> <span class="kt">int</span>  <i class="conum" data-value="1"></i><b>(1)</b>
<span class="k">var</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">7</span>   <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>変数<code>a</code>は<code>int</code>（整数）で値は明示的に定めていません。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>変数<code>b</code>は値が<code>7</code>でその型は整数として自動的に検出されています。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>代入では，プログラムにおいて意味のある名前を選ぶことが重要です。単に<code>a</code>，<code>b</code> ，<code>c</code>などとすると，すぐに混乱してきます。一つの単語よりも多くの語からなる名前を選ぶときは，通常<code>camelCase</code>スタイル（最初の文字は小文字であることに注意）で書かれます。</p>
</div>
<div class="paragraph">
<p>ただし，Nimは大文字と小文字とを区別せず，アンダスコアを無視することに注意が必要です。つまり，<code>helloWrold</code>と<code>hello_world</code>は同じです。例外として最初の文字は大文字と小文字とを区別します。変数の名前には数字やUTF-8文字を含めることができます。望むのなら絵文字も使えますが，他の人が打鍵することになる可能性に配慮する必要があります。</p>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p><code>var</code>をそれぞれの変数に対して打鍵する代わりに，複数の変数（必ずしも同一の型ではない）は同じ<code>var</code>ブロックで宣言することができます。Nimではブロックは，字下げ（最初の文字の前にある同数の空白文字）が同一であるコードの一部で，既定の字下げ幅は空白2文字です。このようなブロックはNimプログラムの随所に見られ，代入に限りません。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span>
  <span class="n">c</span> <span class="o">=</span> <span class="o">-</span><span class="mi">11</span>
  <span class="n">d</span> <span class="o">=</span> <span class="s">"Hello"</span>
  <span class="n">e</span> <span class="o">=</span> <span class="sc">'!'</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Nimではタブは字下げとして認められていません。<br>
コードエディタを設定して<code>Tab</code>を任意の数の空白文字に置き換えることができます。<br>
VS Codeでは既定は<code>Tab</code>を4つの空白文字に置き換えます。変更するには，設定（<code>Ctrl+,</code>）で<code>"editor.tabSize": 2</code>とします。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>前に述べたように変数は書き換え可能，つまり変数の値は何度でも変えることができますが，型は宣言したときと同一でなければなりません。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span> <span class="n">f</span> <span class="o">=</span> <span class="mi">7</span>           <i class="conum" data-value="1"></i><b>(1)</b>

<span class="n">f</span> <span class="o">=</span> <span class="o">-</span><span class="mi">3</span>              <i class="conum" data-value="2"></i><b>(2)</b>
<span class="n">f</span> <span class="o">=</span> <span class="mi">19</span>
<span class="n">f</span> <span class="o">=</span> <span class="s">"Hello"</span> <span class="c"># エラー </span><i class="conum" data-value="3"></i><b>(3)</b> <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>変数<code>f</code>は初期値<code>7</code>でその型は推定により``int`となります。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>f</code>の値はまず<code>-3</code>，次に<code>19</code>に変更されます。これらは両方とも整数で，元の型と同じです。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>f</code>の値を<code>"Hello"</code>に変更しようとすると， エラーが発生します。<code>Hello</code>は数値ではなくので，<code>f</code>の型を整数から文字列にしようとしています。
&lt;4&gt;<code># エラー</code>はコメントです。Nimコード中のコメントは文字<code>#</code>の後に書きます。これに続く全ての文字は行の終わりまで無視されます。</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_書き換え不可の代入">書き換え不可の代入</h2>
<div class="sectionbody">
<div class="paragraph">
<p>キーワード<code>var</code>を使って宣言された変数とは異なり，Nimにはあと2種類の代入があります。これらの値は変えることができません。一つはキーワード<code>const</code>，もう一つはキーワード<code>let</code>を使って宣言されます。</p>
</div>
<div class="sect2">
<h3 id="_const">Const</h3>
<div class="paragraph">
<p>キーワード<code>const</code>で宣言された書き換え不可な代入に用いられる値は，コンパイル時（プログラム実行前）に既知なければなりません。</p>
</div>
<div class="paragraph">
<p>例えば，重力加速度を<code>const g = 9.81</code>あるいは円周率を<code>const pi = 3.14</code>として宣言することができます。これらの値は事前に分かっていてプログラムの実行の間不変です。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">const</span> <span class="n">g</span> <span class="o">=</span> <span class="mi">35</span>
<span class="n">g</span> <span class="o">=</span> <span class="o">-</span><span class="mi">27</span>         <span class="c"># エラー </span><i class="conum" data-value="1"></i><b>(1)</b>

<span class="k">var</span> <span class="n">h</span> <span class="o">=</span> <span class="o">-</span><span class="mi">5</span>
<span class="k">const</span> <span class="n">i</span> <span class="o">=</span> <span class="n">h</span> <span class="o">+</span> <span class="mi">7</span> <span class="c"># エラー </span><i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>定数の値は変えられません。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>変数<code>h</code>はコンパイル時に評価されません（これは変数でその値はプログラムの実行中にかわりえます。）， 従って定数<code>i</code>の値はコンパイル時には知り得ないので，エラーが発生します。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>プログラミング言語によっては，定数の名前を``ALL_CAPS`のように全て大文字で書く習慣があります。Nimの定数は他の変数と同様に書きます。</p>
</div>
</div>
<div class="sect2">
<h3 id="_let">Let</h3>
<div class="paragraph">
<p><code>let</code>で宣言された書き換え不可の代入は，コンパイル時に既知である必要はなく，その値はプログラムの実行中いつでも設定できますが，ひとたび設定したら値を変えることはできません。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">35</span>
<span class="n">j</span> <span class="o">=</span> <span class="o">-</span><span class="mi">27</span> <span class="c"># エラー </span><i class="conum" data-value="1"></i><b>(1)</b>

<span class="k">var</span> <span class="n">k</span> <span class="o">=</span> <span class="o">-</span><span class="mi">5</span>
<span class="k">let</span> <span class="n">l</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="mi">7</span>   <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>書き換え不可の値は変更できません。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>const</code>の例とは対照的に，これは動作します。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>実際には，<code>let</code>は<code>const</code>よりも多く使われます。</p>
</div>
<div class="paragraph">
<p><code>var</code>を何にでも使うことはできますが，<code>let</code>を基本とすべきです。<code>var</code>は変更することになる変数のみに使いましょう。</p>
</div>
</div>
</div>
</div>
<h1 id="_基本データ型" class="sect0">基本データ型</h1>
<div class="sect1">
<h2 id="_整数">整数</h2>
<div class="sectionbody">
<div class="paragraph">
<p>前章で述べたように，整数は小数部や小数点がない数値です。</p>
</div>
<div class="paragraph">
<p>例えば<code>32</code>, <code>-174</code>, <code>0</code>, <code>10_000_000</code>は全て整数です。3桁毎の区切りに<code>_</code>を用いて大きな数値を見やすくしていることに注目してください（1千万を10_000_000と書いた方が10000000と書くより分かりやすくなります)。</p>
</div>
<div class="paragraph">
<p>通常の数学演算子，加算（<code>+</code>），減算（<code>-</code>），乗算（<code>*</code>），そして除算（<code>/</code>）は期待した通りに動作します。最初の三つの演算子は整数を生成しますが，二つの整数の除算は，余りがない場合でも常に浮動小数点数（小数点のある数値）が結果として与えられます。</p>
</div>
<div class="paragraph">
<p>整数の除算（小数部が無視される除算）には<code>div</code>演算子を使います。演算子<code>mod</code>（modulus，法）は整数の除算の余りを得たいときに用います。これらの演算の結果は常に整数です。</p>
</div>
<div class="listingblock">
<div class="title">integers.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">a</span> <span class="o">=</span> <span class="mi">11</span>
  <span class="n">b</span> <span class="o">=</span> <span class="mi">4</span>

<span class="n">echo</span> <span class="s">"a + b = "</span><span class="p">,</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="n">echo</span> <span class="s">"a - b = "</span><span class="p">,</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span>
<span class="n">echo</span> <span class="s">"a * b = "</span><span class="p">,</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span>
<span class="n">echo</span> <span class="s">"a / b = "</span><span class="p">,</span> <span class="n">a</span> <span class="o">/</span> <span class="n">b</span>
<span class="n">echo</span> <span class="s">"a div b = "</span><span class="p">,</span> <span class="n">a</span> <span class="ow">div</span> <span class="n">b</span>
<span class="n">echo</span> <span class="s">"a mod b = "</span><span class="p">,</span> <span class="n">a</span> <span class="ow">mod</span> <span class="n">b</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>echo</code>コマンドはそれに続くコンマで区切られたもの全てを画面に印字します。この場合，まず文字<code>a + b = </code>を印字し，続いて同じ行に式<code>a + b</code>の結果を印字します。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>コードをコンパイルして実行すると出力は次のようになるはずです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">a + b = 15
a - b = 7
a * b = 44
a / b = 2.75
a div b = 2
a mod b = 3</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_浮動小数点数">浮動小数点数</h2>
<div class="sectionbody">
<div class="paragraph">
<p>浮動小数点数（float）実数の<a href="https://en.wikipedia.org/wiki/Floating-point_arithmetic">近似表現</a>です。</p>
</div>
<div class="paragraph">
<p>例えば<code>2.73</code>, <code>-3.14</code>, <code>5.0</code>, <code>4e7</code>は浮動小数点数です。大きな浮動小数点数には科学的表記を用いることに注目してください。<code>e</code>の後の数値は指数です。この例では，<code>4e7</code>は<code>4 * 10^7</code>を表します。</p>
</div>
<div class="paragraph">
<p>二つの浮動小数点数に対して，四つの基本数学演算子を用いることができます。演算子<code>div</code>と<code>mod</code>は浮動小数点数に対しては定義されていません。</p>
</div>
<div class="listingblock">
<div class="title">floats.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">c</span> <span class="o">=</span> <span class="mf">6.75</span>
  <span class="n">d</span> <span class="o">=</span> <span class="mf">2.25</span>

<span class="n">echo</span> <span class="s">"c + d = "</span><span class="p">,</span> <span class="n">c</span> <span class="o">+</span> <span class="n">d</span>
<span class="n">echo</span> <span class="s">"c - d = "</span><span class="p">,</span> <span class="n">c</span> <span class="o">-</span> <span class="n">d</span>
<span class="n">echo</span> <span class="s">"c * d = "</span><span class="p">,</span> <span class="n">c</span> <span class="o">*</span> <span class="n">d</span>
<span class="n">echo</span> <span class="s">"c / d = "</span><span class="p">,</span> <span class="n">c</span> <span class="o">/</span> <span class="n">d</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">c + d = 9.0  <i class="conum" data-value="1"></i><b>(1)</b>
c - d = 4.5
c * d = 15.1875
c / d = 3.0  <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>加算と除算の例では，小数部がない数値が得られますが，結果は浮動小数点型であることに注意してください。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>数学演算の優先順位は期待通りです。乗算と除算は加算や減算よりも優先されます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="n">echo</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="mi">4</span>
<span class="n">echo</span> <span class="mi">24</span> <span class="o">-</span> <span class="mi">8</span> <span class="o">/</span> <span class="mi">4</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">14
22.0</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_浮動小数点数と整数の変換">浮動小数点数と整数の変換</h3>
<div class="paragraph">
<p>Nimでは異なる数値型の変数間の数学演算が許されておらず，エラーが発生します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">e</span> <span class="o">=</span> <span class="mi">5</span>
  <span class="n">f</span> <span class="o">=</span> <span class="mf">23.456</span>

<span class="n">echo</span> <span class="n">e</span> <span class="o">+</span> <span class="n">f</span>   <span class="c"># エラー</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>変数の値は同じ型に変換する必要があります。変換は簡単で整数への変換には<code>int</code>関数，浮動小数点数への変換には<code>float</code>関数を使います。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">e</span> <span class="o">=</span> <span class="mi">5</span>
  <span class="n">f</span> <span class="o">=</span> <span class="mf">23.987</span>

<span class="n">echo</span> <span class="kt">float</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>      <i class="conum" data-value="1"></i><b>(1)</b>
<span class="n">echo</span> <span class="kt">int</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>        <i class="conum" data-value="2"></i><b>(2)</b>

<span class="n">echo</span> <span class="kt">float</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="o">+</span> <span class="n">f</span>  <i class="conum" data-value="3"></i><b>(3)</b>
<span class="n">echo</span> <span class="n">e</span> <span class="o">+</span> <span class="kt">int</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>    <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>float</code>に変換した整数<code>e</code>を印字する（<code>e</code>は整数のまま）。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>int</code>に変換した浮動小数点数<code>f</code>を印字する。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>被演算子は共に浮動小数点数で加算可能。</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>被演算子は共に整数で加算可能。</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">5.0
23
28.987
28</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>int</code>関数を使って浮動小数点数を整数に変換するときに四捨五入は行われません。単に数値から小数部が落ちるだけです。<br>
四捨五入をするには別の関数を持ちなければなりませんが，それにはNimの使い方をもっと勉強する必要があります。
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_文字">文字</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>char</code>型は単一の<a href="https://en.wikipedia.org/wiki/ASCII">ASCII</a>文字を表すために用いられます。</p>
</div>
<div class="paragraph">
<p>文字は二つの一重引用符（<code>'</code>）の間に書きます。文字はアルファベット，記号または数字です。複数の数字や文字はエラーになります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">h</span> <span class="o">=</span> <span class="sc">'z'</span>
  <span class="n">i</span> <span class="o">=</span> <span class="sc">'+'</span>
  <span class="n">j</span> <span class="o">=</span> <span class="sc">'2'</span>
  <span class="n">k</span> <span class="o">=</span> <span class="sc">'35'</span> <span class="c"># エラー</span>
  <span class="n">l</span> <span class="o">=</span> <span class="sc">'xy'</span> <span class="c"># エラー</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_文字列">文字列</h2>
<div class="sectionbody">
<div class="paragraph">
<p>文字列は文字が並んだものです。文字列の中身は二つの二重引用符 （<code>"</code>）の間に書きます。</p>
</div>
<div class="paragraph">
<p>文字列というと単語を思い浮かべますが，複数の単語や記号，数字を含むことができます。</p>
</div>
<div class="listingblock">
<div class="title">strings.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">m</span> <span class="o">=</span> <span class="s">"word"</span>
  <span class="n">n</span> <span class="o">=</span> <span class="s">"A sentence with interpunction."</span>
  <span class="n">o</span> <span class="o">=</span> <span class="s">""</span>    <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="n">p</span> <span class="o">=</span> <span class="s">"32"</span>  <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="n">q</span> <span class="o">=</span> <span class="s">"!"</span>   <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>空の文字列。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>これは数値（int）ではありません。二重引用符で囲まれているので，文字列になります。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>これは一つの文字ですが，二重引用符に囲まれているのでcharではありません。</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_特殊文字">特殊文字</h3>
<div class="paragraph">
<p>次の文字列を印字すると</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="n">echo</span> <span class="s">"some</span><span class="se">\n</span><span class="s">im</span><span class="se">\t</span><span class="s">ips"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>意外な結果になります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">some
im	ips</code></pre>
</div>
</div>
<div class="paragraph">
<p>このようになったのは，いくつかの文字には特別の意味があるからです。これらはエスケープ<code>\</code>を前につけて用います。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>\n</code>は改行です。</p>
</li>
<li>
<p><code>\t</code>はタブです。</p>
</li>
<li>
<p><code>\\</code>はバックスラッシュです（<code>\</code>はエスケープとして用いるため）。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>上の例を文字通り印字するには，二つの方法があります。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>\\</code>を<code>\</code>の代わりに使うか，</p>
</li>
<li>
<p>未加工（raw）文字列を使います。文法は<code>r"&#8230;&#8203;"</code>で （文字<code>r</code>を最初の引用符の前に置きます。）
）エスケープ文字が存在せず特別な意味もなく，全てがそのまま印字されます。</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="n">echo</span> <span class="s">"some</span><span class="se">\\</span><span class="s">nim</span><span class="se">\\</span><span class="s">tips"</span>
<span class="n">echo</span> <span class="s">r"some\nim\tips"</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">some\nim\tips
some\nim\tips</code></pre>
</div>
</div>
<div class="paragraph">
<p>上に示したもの以外にも特殊文字があり，<a href="https://nim-lang.org/docs/manual.html#lexical-analysis-string-literals">Nim manual</a>に示されています。</p>
</div>
</div>
<div class="sect2">
<h3 id="_文字列の結合">文字列の結合</h3>
<div class="paragraph">
<p>Nimの文字列は書き換え可能で，中身は変わり得ます。<code>add</code>関数で既存の文字列に別の文字列や文字を加える（付け足す）ことができます。元の文字列を変更したくないときは，文字列を<code>&amp;</code>演算子で結合する（つなげる）と新しい文字列が返されます。</p>
</div>
<div class="listingblock">
<div class="title">stringConcat.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span>                     <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="n">p</span> <span class="o">=</span> <span class="s">"abc"</span>
  <span class="n">q</span> <span class="o">=</span> <span class="s">"xy"</span>
  <span class="n">r</span> <span class="o">=</span> <span class="sc">'z'</span>

<span class="n">p</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="s">"def"</span><span class="p">)</span>            <i class="conum" data-value="2"></i><b>(2)</b>
<span class="n">echo</span> <span class="s">"p is now: "</span><span class="p">,</span> <span class="n">p</span>

<span class="n">q</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>                <i class="conum" data-value="3"></i><b>(3)</b>
<span class="n">echo</span> <span class="s">"q is now: "</span><span class="p">,</span> <span class="n">q</span>

<span class="n">echo</span> <span class="s">"concat: "</span><span class="p">,</span> <span class="n">p</span> <span class="o">&amp;</span> <span class="n">q</span>  <i class="conum" data-value="4"></i><b>(4)</b>

<span class="n">echo</span> <span class="s">"p is still: "</span><span class="p">,</span> <span class="n">p</span>
<span class="n">echo</span> <span class="s">"q is still: "</span><span class="p">,</span> <span class="n">q</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>文字列を変更する場合は<code>var</code>として宣言します。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>既存の文字列<code>p</code>に別の文字列を加えると，その文字列の値が変更されます。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>文字列に<code>char</code>を加えることもできます。</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>二つの文字列を連結すると，元の文字列を変更せずに新しい文字列ができます。</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">p is now: abcdef
q is now: xyz
concat: abcdefxyz
p is still: abcdef
q is still: xyz</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_真偽">真偽</h2>
<div class="sectionbody">
<div class="paragraph">
<p>真偽（またはブール，<code>bool</code>）データ型は二つの値<code>true</code>か<code>false</code>のどちらかです。ブール型は通常制御の流れ（<a href="#_制御の流れ">次章</a>参照）に用いられ，通常関係演算子の結果です。</p>
</div>
<div class="paragraph">
<p>ブール変数に通常用いられる名前の付け方は，はい/いいえ（真/偽）の質問，例えば
<code>isEmpty</code>, <code>isFinished</code>, <code>isMoving</code>として表すというものです。</p>
</div>
<div class="sect2">
<h3 id="_関係演算子">関係演算子</h3>
<div class="paragraph">
<p>関係演算子は，比較可能な二つの事柄の関係を試すものです。</p>
</div>
<div class="paragraph">
<p>二つの値はが等値かどうか比較するには<code>==</code>（二つの等号）が用いられます。これを以前に示した代入に用いられる<code>=</code>と混同しないようにしてください。</p>
</div>
<div class="paragraph">
<p>整数に対して定義されている全ての関係演算子を示します。</p>
</div>
<div class="listingblock">
<div class="title">relationalOperators.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">g</span> <span class="o">=</span> <span class="mi">31</span>
  <span class="n">h</span> <span class="o">=</span> <span class="mi">99</span>

<span class="n">echo</span> <span class="s">"g is greater than h: "</span><span class="p">,</span> <span class="n">g</span> <span class="o">&gt;</span> <span class="n">h</span>
<span class="n">echo</span> <span class="s">"g is smaller than h: "</span><span class="p">,</span> <span class="n">g</span> <span class="o">&lt;</span> <span class="n">h</span>
<span class="n">echo</span> <span class="s">"g is equal to h: "</span><span class="p">,</span> <span class="n">g</span> <span class="o">==</span> <span class="n">h</span>
<span class="n">echo</span> <span class="s">"g is not equal to h: "</span><span class="p">,</span> <span class="n">g</span> <span class="o">!=</span> <span class="n">h</span>
<span class="n">echo</span> <span class="s">"g is greater or equal to h: "</span><span class="p">,</span> <span class="n">g</span> <span class="o">&gt;=</span> <span class="n">h</span>
<span class="n">echo</span> <span class="s">"g is smaller or equal to h: "</span><span class="p">,</span> <span class="n">g</span> <span class="o">&lt;=</span> <span class="n">h</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">g is greater than h: false
g is smaller than h: true
g is equal to h: false
g is not equal to h: true
g is greater or equal to h: false
g is smaller or equal to h: true</code></pre>
</div>
</div>
<div class="paragraph">
<p>文字や文字列を比較することもできます。</p>
</div>
<div class="listingblock">
<div class="title">relationalOperators.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">i</span> <span class="o">=</span> <span class="sc">'a'</span>
  <span class="n">j</span> <span class="o">=</span> <span class="sc">'d'</span>
  <span class="n">k</span> <span class="o">=</span> <span class="sc">'Z'</span>

<span class="n">echo</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">j</span>
<span class="n">echo</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">k</span>  <i class="conum" data-value="1"></i><b>(1)</b>

<span class="k">let</span>
  <span class="n">m</span> <span class="o">=</span> <span class="s">"axyb"</span>
  <span class="n">n</span> <span class="o">=</span> <span class="s">"axyz"</span>
  <span class="n">o</span> <span class="o">=</span> <span class="s">"ba"</span>
  <span class="n">p</span> <span class="o">=</span> <span class="s">"ba "</span>

<span class="n">echo</span> <span class="n">m</span> <span class="o">&lt;</span> <span class="n">n</span>  <i class="conum" data-value="2"></i><b>(2)</b>
<span class="n">echo</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="n">o</span>  <i class="conum" data-value="3"></i><b>(3)</b>
<span class="n">echo</span> <span class="n">o</span> <span class="o">&lt;</span> <span class="n">p</span>  <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>全ての大文字は小文字より前。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>文字列の比較は文字毎に行われます。最初の三つの文字は同一で，文字<code>b</code>は文字<code>z</code>よりも小さい。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>文字が同一でなければ，文字列の長さは比較されません。</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>短い文字列は長い文字列よりも小さい。</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">true
false
true
true
true</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_論理演算子">論理演算子</h3>
<div class="paragraph">
<p>論理演算子は一つまたはそれ以上の真偽値からなる式が真であるか試すために用いられます。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>論理<code>and</code>が<code>true</code>を返すのは，両方とも<code>true</code>の場合のみ。</p>
</li>
<li>
<p>論理<code>or</code>が<code>true</code>を返すのは，少なくともどちらか一方が<code>true</code>のとき。</p>
</li>
<li>
<p>論理<code>xor</code>が<code>true</code>となるのは一方が真で他方がそうではないとき。</p>
</li>
<li>
<p>論理<code>not</code>は真偽を反転させます。つまり<code>true</code>`を<code>false</code>にまたはその逆（一つの被演算子をとる唯一の論理演算子）</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">logicalOperators.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="n">echo</span> <span class="s">"T and T: "</span><span class="p">,</span> <span class="kp">true</span> <span class="ow">and</span> <span class="kp">true</span>
<span class="n">echo</span> <span class="s">"T and F: "</span><span class="p">,</span> <span class="kp">true</span> <span class="ow">and</span> <span class="kp">false</span>
<span class="n">echo</span> <span class="s">"F and F: "</span><span class="p">,</span> <span class="kp">false</span> <span class="ow">and</span> <span class="kp">false</span>
<span class="n">echo</span> <span class="s">"---"</span>
<span class="n">echo</span> <span class="s">"T or T: "</span><span class="p">,</span> <span class="kp">true</span> <span class="ow">or</span> <span class="kp">true</span>
<span class="n">echo</span> <span class="s">"T or F: "</span><span class="p">,</span> <span class="kp">true</span> <span class="ow">or</span> <span class="kp">false</span>
<span class="n">echo</span> <span class="s">"F or F: "</span><span class="p">,</span> <span class="kp">false</span> <span class="ow">or</span> <span class="kp">false</span>
<span class="n">echo</span> <span class="s">"---"</span>
<span class="n">echo</span> <span class="s">"T xor T: "</span><span class="p">,</span> <span class="kp">true</span> <span class="ow">xor</span> <span class="kp">true</span>
<span class="n">echo</span> <span class="s">"T xor F: "</span><span class="p">,</span> <span class="kp">true</span> <span class="ow">xor</span> <span class="kp">false</span>
<span class="n">echo</span> <span class="s">"F xor F: "</span><span class="p">,</span> <span class="kp">false</span> <span class="ow">xor</span> <span class="kp">false</span>
<span class="n">echo</span> <span class="s">"---"</span>
<span class="n">echo</span> <span class="s">"not T: "</span><span class="p">,</span> <span class="ow">not</span> <span class="kp">true</span>
<span class="n">echo</span> <span class="s">"not F: "</span><span class="p">,</span> <span class="ow">not</span> <span class="kp">false</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">T and T: true
T and F: false
F and F: false
---
T or T: true
T or F: true
F or F: false
---
T xor T: false
T xor F: true
F xor F: false
---
not T: false
not F: true</code></pre>
</div>
</div>
<div class="paragraph">
<p>関係演算子と論理演算子を組み合わせて，より複雑な式を作ることができます。</p>
</div>
<div class="paragraph">
<p>例えば，<code>(5 &lt; 7) and (11 + 9 == 32 - 2*6)</code>は<code>true and (20 == 20)</code>となり，<code>true and true</code>なるので，最終結果は<code>true</code>となります。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_まとめ">まとめ</h2>
<div class="sectionbody">
<div class="paragraph">
<p>この章はチュートリアルの中で最長でたくさんの範囲を扱いました。時間をとって各データ型を復習し，それぞれ何ができるか試してみてください。</p>
</div>
<div class="paragraph">
<p>型は一見制約のように見えますが，Nimコンパイラがコードを速く，偶発的におかしな動作をしないように確かめることを可能にするものです。これは大きなコードベースで役に立ちます。</p>
</div>
<div class="paragraph">
<p>基本型といくつかの演算を学んだので，Nimで簡単な計算ができます。知識を次の練習問題で試してみましょう。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_練習問題">練習問題</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>書き換え不可の変数を作り，あなたの年齢（年）を格納してください。年齢を日数で印字してください（1年は365日とします）。</p>
</li>
<li>
<p>あなたの年齢が3で割り切れるか試してください。（ヒント: <code>mod</code>を使います。）</p>
</li>
<li>
<p>書き換え不可の変数を作り，あなたの身長をセンチメートルで格納してください。身長をインチで印字してください（1インチは2.54センチ）。</p>
</li>
<li>
<p>管の直径が3/8インチです。直径をセンチメートルで表してください。</p>
</li>
<li>
<p>書き換え不可の変数を二つ作り，あなたの姓と名を格納してください。変数<code>fullName</code>を二つの変数を連結して作ってください。姓と名の間には空白文字を入れてください。あなたのフルネームを印字してください。</p>
</li>
<li>
<p>アリスは$400を15日間毎に稼ぎます。ボブは1時間あたり$3.14稼ぎ，1日に8時間，週7日働いています。30日後，アリスはボブよりも稼いでいるでしょうか（ヒント: 関係演算子を使います）。</p>
</li>
</ol>
</div>
</div>
</div>
<h1 id="_制御の流れ" class="sect0">制御の流れ</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>So far in our programs every line of code was executed at some point.
Control flow statements allow us to have parts of code which will be executed only if some boolean condition is satisfied.</p>
</div>
<div class="paragraph">
<p>If we think of our program as a road we can think of control flow as various branches, and we pick our path depending on some condition.
For example, we will buy eggs only <em>if</em> their price is less than some value.
Or, <em>if</em> it is raining, we will bring an umbrella, otherwise (<em>else</em>) we will bring sunglasses.</p>
</div>
<div class="paragraph">
<p>Written in <a href="https://en.wikipedia.org/wiki/Pseudocode">pseudocode</a>, these two examples would look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">if</span> <span class="n">eggPrice</span> <span class="o">&lt;</span> <span class="n">wantedPrice</span><span class="p">:</span>
  <span class="n">buyEggs</span>

<span class="k">if</span> <span class="n">isRaining</span><span class="p">:</span>
  <span class="n">bring</span> <span class="n">umbrella</span>
<span class="k">else</span><span class="p">:</span>
  <span class="n">bring</span> <span class="n">sunglasses</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Nim syntax is very similar, as you&#8217;ll see below.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_if_statement">If statement</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An if statement as shown above is the simplest way to branch our program.</p>
</div>
<div class="paragraph">
<p>The Nim syntax for writing if statement is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">if</span> <span class="o">&lt;</span><span class="n">condition</span><span class="o">&gt;</span><span class="p">:</span>     <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="o">&lt;</span><span class="n">indented</span> <span class="k">block</span><span class="o">&gt;</span>  <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>condition</code> must be of boolean type: either a boolean variable or a relational and/or logical expression.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>All lines following the <code>if</code> line which are indented two spaces make the same block and will be executed only if the condition is <code>true</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If statements can be nested, i.e. inside one if-block there can be another if statement.</p>
</div>
<div class="listingblock">
<div class="title">if.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">a</span> <span class="o">=</span> <span class="mi">11</span>
  <span class="n">b</span> <span class="o">=</span> <span class="mi">22</span>
  <span class="n">c</span> <span class="o">=</span> <span class="mi">999</span>

<span class="k">if</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"a is smaller than b"</span>
  <span class="k">if</span> <span class="mi">10</span><span class="o">*</span><span class="n">a</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">:</span>  <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="n">echo</span> <span class="s">"not only that, a is *much* smaller than b"</span>

<span class="k">if</span> <span class="n">b</span> <span class="o">&lt;</span> <span class="n">c</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"b is smaller than c"</span>
  <span class="k">if</span> <span class="mi">10</span><span class="o">*</span><span class="n">b</span> <span class="o">&lt;</span> <span class="n">c</span><span class="p">:</span>  <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="n">echo</span> <span class="s">"not only that, b is *much* smaller than c"</span>

<span class="k">if</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span> <span class="o">&gt;</span> <span class="n">c</span><span class="p">:</span>     <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="n">echo</span> <span class="s">"a and b are larger than c"</span>
  <span class="k">if</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="mi">100</span> <span class="ow">and</span> <span class="mi">321</span> <span class="o">&gt;</span> <span class="mi">123</span><span class="p">:</span>  <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="n">echo</span> <span class="s">"did you know that 1 is smaller than 100?"</span>
    <span class="n">echo</span> <span class="s">"and 321 is larger than 123! wow!"</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The first condition is true, the second is false&#8201;&#8212;&#8201;inner <code>echo</code> is not executed.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Both conditions are true and both lines are printed.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The first condition is false&#8201;&#8212;&#8201;all lines inside of its block will be skipped, nothing is printed.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Using the logical <code>and</code> inside of the <code>if</code> statement.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">a is smaller than b
b is smaller than c
not only that, b is *much* smaller than c</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_else">Else</h3>
<div class="paragraph">
<p>Else follows after an if-block and allows us to have a branch of code which will be executed when the condition in the if statement is not true.</p>
</div>
<div class="listingblock">
<div class="title">else.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">d</span> <span class="o">=</span> <span class="mi">63</span>
  <span class="n">e</span> <span class="o">=</span> <span class="mf">2.718</span>

<span class="k">if</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"d is a small number"</span>
<span class="k">else</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"d is a large number"</span>

<span class="k">if</span> <span class="n">e</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"e is a small number"</span>
<span class="k">else</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"e is a large number"</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">d is a large number
e is a small number</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you only want to execute a block if the statement is <code>false</code>, you can simply negate the condition with the <code>not</code> operator.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_elif">Elif</h3>
<div class="paragraph">
<p>Elif is short for "else if", and enables us to chain multiple if statements together.</p>
</div>
<div class="paragraph">
<p>The program tests every statement until it finds one which is true.
After that, all further statements are ignored.</p>
</div>
<div class="listingblock">
<div class="title">elif.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">f</span> <span class="o">=</span> <span class="mi">3456</span>
  <span class="n">g</span> <span class="o">=</span> <span class="mi">7</span>

<span class="k">if</span> <span class="n">f</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"f is smaller than 10"</span>
<span class="k">elif</span> <span class="n">f</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"f is between 10 and 100"</span>
<span class="k">elif</span> <span class="n">f</span> <span class="o">&lt;</span> <span class="mi">1000</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"f is between 100 and 1000"</span>
<span class="k">else</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"f is larger than 1000"</span>

<span class="k">if</span> <span class="n">g</span> <span class="o">&lt;</span> <span class="mi">1000</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"g is smaller than 1000"</span>
<span class="k">elif</span> <span class="n">g</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"g is smaller than 100"</span>
<span class="k">elif</span> <span class="n">g</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"g is smaller than 10"</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">f is larger than 1000
g is smaller than 1000</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In the case of <code>g</code>, even though <code>g</code> satisfies all three conditions, only the first branch is executed, automatically skipping all the other branches.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_case">Case</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A case statement is another way to only choose one of multiple possible paths, similar to the if statement with multiple <code>elif</code>s.
A <code>case</code> statement, however, doesn&#8217;t take multiple boolean conditions, but rather any value with distinct states and a path for each possible value.</p>
</div>
<div class="paragraph">
<p>Code written with in if-elif block looking like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"Five!"</span>
<span class="k">elif</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"Seven!"</span>
<span class="k">elif</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"Ten!"</span>
<span class="k">else</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"unknown number"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>can be written with case statement like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">case</span> <span class="n">x</span>
<span class="k">of</span> <span class="mi">5</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"Five!"</span>
<span class="k">of</span> <span class="mi">7</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"Seven!"</span>
<span class="k">of</span> <span class="mi">10</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"Ten!"</span>
<span class="k">else</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"unknown number"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Unlike the if statement, case statement must cover <em>all</em> possible cases.
If one is not interested in some of those cases, <code>else: discard</code> can be used.</p>
</div>
<div class="listingblock">
<div class="title">case.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span> <span class="n">h</span> <span class="o">=</span> <span class="sc">'y'</span>

<span class="k">case</span> <span class="n">h</span>
<span class="k">of</span> <span class="sc">'x'</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"You've chosen x"</span>
<span class="k">of</span> <span class="sc">'y'</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"You've chosen y"</span>
<span class="k">of</span> <span class="sc">'z'</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"You've chosen z"</span>
<span class="k">else</span><span class="p">:</span> <span class="k">discard</span>  <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Even though we are interested in only three values of <code>h</code>, we must include this line to cover all other possible cases (all other characters). Without it, the code would not compile.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">You've chosen y</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can also use multiple values for each branch if the same action should happen for more than one value.</p>
</div>
<div class="listingblock">
<div class="title">multipleCase.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">7</span>

<span class="k">case</span> <span class="n">i</span>
  <span class="k">of</span> <span class="mi">0</span><span class="p">:</span>
    <span class="n">echo</span> <span class="s">"i is zero"</span>
  <span class="k">of</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">:</span>
    <span class="n">echo</span> <span class="s">"i is odd"</span>
  <span class="k">of</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span>
    <span class="n">echo</span> <span class="s">"i is even"</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="n">echo</span> <span class="s">"i is too large"</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">i is odd</code></pre>
</div>
</div>
</div>
</div>
<h1 id="_loops" class="sect0">Loops</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>Loops are another control flow construct which allow us to run some parts of code multiple times.</p>
</div>
<div class="paragraph">
<p>In this chapter we will meet two kinds of loops:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>for-loop: run a known number of times</p>
</li>
<li>
<p>while-loop: run as long some condition is satisfied</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_for_loop">For loop</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Syntax of a for-loop is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">for</span> <span class="o">&lt;</span><span class="n">loopVariable</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">iterable</span><span class="o">&gt;</span><span class="p">:</span>
  <span class="o">&lt;</span><span class="n">loop</span> <span class="n">body</span><span class="o">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Traditionally, <code>i</code> is often used as a <code>loopVariable</code> name, but any other name can be used.
That variable will be available only inside the loop.
Once the loop has finished, the value of the variable is discarded.</p>
</div>
<div class="paragraph">
<p>The <code>iterable</code> is any object we can iterate through.
Of the types already mentioned, strings are iterable objects.
(More iterable types will be introduced in the <a href="#_containers">next chapter</a>.)</p>
</div>
<div class="paragraph">
<p>All lines in the <code>loop body</code> are executed at every loop, which allows us to efficiently write repeating parts of code.</p>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p>If we want to iterate through a range of (integer) numbers in Nim, the syntax for the <code>iterable</code> is <code>start .. finish</code> where <code>start</code> and <code>finish</code> are numbers.
This will iterate through all the numbers between <code>start</code> and <code>finish</code>, including both <code>start</code> and <code>finish</code>.
For the default range iterable, <code>start</code> needs to be smaller than <code>finish</code>.</p>
</div>
<div class="paragraph">
<p>If we want to iterate <em>until</em> a number (not including it), we can use <code>..&lt;</code>:</p>
</div>
<div class="listingblock">
<div class="title">for1.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="mi">5</span> <span class="p">..</span> <span class="mi">9</span><span class="p">:</span>  <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="n">echo</span> <span class="n">n</span>

<span class="n">echo</span> <span class="s">""</span>

<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="mi">5</span> <span class="p">..</span><span class="o">&lt;</span> <span class="mi">9</span><span class="p">:</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="n">echo</span> <span class="n">n</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Iterating through a range of numbers using <code>..</code>&#8201;&#8212;&#8201;both ends are included in the range.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Iterating through the same range using <code>..&lt;</code>&#8201;&#8212;&#8201;it iterates until the higher end, not including it.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">5
6
7
8
9

5
6
7
8</code></pre>
</div>
</div>
<div class="paragraph">
<p>If we want to iterate through a range of numbers with a step size different than one, <code>countup</code> is used. With <code>countup</code> we define the starting value, the stopping value (included in the range), and the step size.</p>
</div>
<div class="listingblock">
<div class="title">for2.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">countup</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">4</span><span class="p">):</span>  <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="n">echo</span> <span class="n">n</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Counting up from zero to 16, with a step size of 4. The end (16) is included in the range.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">0
4
8
12
16</code></pre>
</div>
</div>
<div class="paragraph">
<p>To iterate through a range of numbers where the <code>start</code> is larger than <code>finish</code>, a similar function called <code>countdown</code> is used.
Even if we&#8217;re counting down, the step size must be positive.</p>
</div>
<div class="listingblock">
<div class="title">for2.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">countdown</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>       <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="n">echo</span> <span class="n">n</span>

<span class="n">echo</span> <span class="s">""</span>

<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">countdown</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>  <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="n">echo</span> <span class="n">n</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>To iterate from a higher to a lower number, we must use <code>countdown</code> (The <code>..</code> operator can only be used when the starting value is smaller than the end value).</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Even when counting down, the step size must be a positive number.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">4
3
2
1
0

-3
-5
-7
-9</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since string is an iterable, we can use a for-loop to iterate through each character of the string (this kind of iteration is sometimes called a <em>for-each</em> loop).</p>
</div>
<div class="listingblock">
<div class="title">for3.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span> <span class="n">word</span> <span class="o">=</span> <span class="s">"alphabet"</span>

<span class="k">for</span> <span class="n">letter</span> <span class="ow">in</span> <span class="n">word</span><span class="p">:</span>
  <span class="n">echo</span> <span class="n">letter</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">a
l
p
h
a
b
e
t</code></pre>
</div>
</div>
<div class="paragraph">
<p>If we also need to have an iteration counter (starting from zero), we can achieve that by using <code>for &lt;counterVariable&gt;, &lt;loopVariable&gt; in &lt;iterator&gt;:</code> syntax.
This is very practical if you want to iterate through one iterable, and simultaneously access another iterable at the same offset.</p>
</div>
<div class="listingblock">
<div class="title">for3.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">letter</span> <span class="ow">in</span> <span class="n">word</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"letter "</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="s">" is: "</span><span class="p">,</span> <span class="n">letter</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">letter 0 is: a
letter 1 is: l
letter 2 is: p
letter 3 is: h
letter 4 is: a
letter 5 is: b
letter 6 is: e
letter 7 is: t</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_while_loop">While loop</h2>
<div class="sectionbody">
<div class="paragraph">
<p>While loops are similar to if statements, but they keep executing their block of code as long as the condition remains true.
They are used when we don&#8217;t know in advance how many times the loop will run.</p>
</div>
<div class="paragraph">
<p>We must make sure the loop will terminate at some point and not become an <a href="https://en.wikipedia.org/wiki/Infinite_loop">infinite loop</a>.</p>
</div>
<div class="listingblock">
<div class="title">while.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>

<span class="k">while</span> <span class="n">a</span><span class="o">*</span><span class="n">a</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="n">echo</span> <span class="s">"a is: "</span><span class="p">,</span> <span class="n">a</span>
  <span class="n">inc</span> <span class="n">a</span>         <i class="conum" data-value="2"></i><b>(2)</b>

<span class="n">echo</span> <span class="s">"final value of a: "</span><span class="p">,</span> <span class="n">a</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This condition will be checked every time before entering the new loop and executing the code inside of it.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>inc</code> is used to increment <code>a</code> by one. It is the same as writing <code>a = a + 1</code> or <code>a += 1</code>.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">a is: 1
a is: 2
a is: 3
final value of a: 4</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_break_and_continue">Break and continue</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>break</code> statement is used to prematurely exit from a loop, usually if some condition is met.</p>
</div>
<div class="paragraph">
<p>In the next example, if there were no if statement with <code>break</code> in it, the loop would continue to run and print until <code>i</code> becomes 1000.
With the <code>break</code> statement, when <code>i</code> becomes 3, we immediately exit the loop (before printing the value of <code>i</code>).</p>
</div>
<div class="listingblock">
<div class="title">break.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>

<span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">1000</span><span class="p">:</span>
  <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
    <span class="k">break</span>
  <span class="n">echo</span> <span class="n">i</span>
  <span class="n">inc</span> <span class="n">i</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">1
2</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p>The <code>continue</code> statement starts the next iteration of a loop immediately, without executing the remaining lines of the current iteration.
Notice how 3 and 6 are missing from the output of the following code:</p>
</div>
<div class="listingblock">
<div class="title">continue.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="mi">1</span> <span class="p">..</span> <span class="mi">8</span><span class="p">:</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">6</span><span class="p">):</span>
    <span class="k">continue</span>
  <span class="n">echo</span> <span class="n">i</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">1
2
4
5
7
8</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exercises">Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://en.wikipedia.org/wiki/Collatz_conjecture">Collatz conjecture</a> is a popular mathematical problem with simple rules. First pick a number. If it is odd, multiply it by three and add one; if it is even, divide it by two. Repeat this procedure until you arrive at one. E.g. 5 &#8594; odd &#8594; 3*5 + 1 = 16 &#8594; even &#8594; 16 / 2 = 8 &#8594; even &#8594; 4 &#8594; 2 &#8594; 1 &#8594; end!<br>
Pick an integer (as a mutable variable) and create a loop which will print every step of the Collatz conjecture. (Hint: use <code>div</code> for division)</p>
</li>
<li>
<p>Create an immutable variable containing your full name. Write a for-loop which will iterate through that string and print only the vowels (a, e, i, o, u). (Hint: use <code>case</code> statement with multiple values per branch)</p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Fizz_buzz">Fizz buzz</a> is a kids game sometimes used to test basic programming knowledge. We count numbers from one upwards. If a number is divisible by 3 replace it with <em>fizz</em>, if it is divisible by 5 replace it with <em>buzz</em>, and if a number is divisible by 15 (both 3 and 5) replace it with <em>fizzbuzz</em>. First few rounds would look like this: 1, 2, fizz, 4, buzz, fizz, 7, &#8230;&#8203;<br>
Create a program which will print first 30 rounds of Fizz buzz. (Hint: beware of the order of divisibility tests)</p>
</li>
<li>
<p>In the previous exercises you have converted inches to centimeters, and vice versa. Create a conversion table with multiple values. For example, the table might look like this:<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="ow">in</span>	<span class="o">|</span> <span class="n">cm</span>
<span class="o">----------------</span>
<span class="mi">1</span>	<span class="o">|</span> <span class="mf">2.54</span>
<span class="mi">4</span>	<span class="o">|</span> <span class="mf">10.16</span>
<span class="mi">7</span>	<span class="o">|</span> <span class="mf">17.78</span>
<span class="mi">10</span>	<span class="o">|</span> <span class="mf">25.4</span>
<span class="mi">13</span>	<span class="o">|</span> <span class="mf">33.02</span>
<span class="mi">16</span>	<span class="o">|</span> <span class="mf">40.64</span>
<span class="mi">19</span>	<span class="o">|</span> <span class="mf">48.26</span></code></pre>
</div>
</div>
</div>
</div>
<h1 id="_containers" class="sect0">Containers</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>Containers are data types which contain a collection of items and allow us to access those elements.
Typically a container is also iterable, meaning that we can use them the same way we used strings in the <a href="#_loops">loops chapter</a>.</p>
</div>
<div class="paragraph">
<p>For example, a grocery list is a container of items we want to buy, and a list of primes is a container of numbers.
Written in pseudocode:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="n">groceryList</span> <span class="o">=</span> <span class="o">[</span><span class="n">ham</span><span class="p">,</span> <span class="n">eggs</span><span class="p">,</span> <span class="n">bread</span><span class="p">,</span> <span class="n">apples</span><span class="o">]</span>
<span class="n">primes</span> <span class="o">=</span> <span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="o">]</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_arrays">Arrays</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An array is the simplest container type.
Arrays are homogeneous, i.e. all elements in an array must have the same type.
Arrays are also of a constant size, meaning that the amount of elements (or rather: the amount of <em>possible</em> elements), must be known at compile-time.
This means that we call arrays a "homogeneous container of a constant length".</p>
</div>
<div class="paragraph">
<p>The array type is declared using <code>array[&lt;length&gt;, &lt;type&gt;]</code>, where <code>length</code> is the total capacity of the array (number of elements it can fit), and <code>type</code> is a type of all its elements.
The declaration can be omitted if both length and type can be inferred from the passed elements.</p>
</div>
<div class="paragraph">
<p>The elements of an array are enclosed inside of square brackets.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span>
  <span class="n">a</span><span class="p">:</span> <span class="kt">array</span><span class="o">[</span><span class="mi">3</span><span class="p">,</span> <span class="kt">int</span><span class="o">]</span> <span class="o">=</span> <span class="o">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="o">]</span>
  <span class="n">b</span> <span class="o">=</span> <span class="o">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="o">]</span>        <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="n">c</span> <span class="o">=</span> <span class="o">[]</span>  <span class="c"># error      </span><i class="conum" data-value="2"></i><b>(2)</b>
  <span class="n">d</span><span class="p">:</span> <span class="kt">array</span><span class="o">[</span><span class="mi">7</span><span class="p">,</span> <span class="kt">string</span><span class="o">]</span>  <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>If we provide the values, the length and type of array <code>b</code> are known at compile time. Although correct, there is no need to specifically declare it like array <code>a</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Neither the length nor the type of the elements can be inferred from this kind of declaration&#8201;&#8212;&#8201;this produces an error.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The correct way to declare an empty array (which will be filled later) is to give its length and type, without providing the values of its elements&#8201;&#8212;&#8201;array <code>d</code> can contain seven strings.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Since the length of an array has to be known at compile-time, this will not work:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">const</span> <span class="n">m</span> <span class="o">=</span> <span class="mi">3</span>
<span class="k">let</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">5</span>

<span class="k">var</span> <span class="n">a</span><span class="p">:</span> <span class="kt">array</span><span class="o">[</span><span class="n">m</span><span class="p">,</span> <span class="kt">char</span><span class="o">]</span>
<span class="k">var</span> <span class="n">b</span><span class="p">:</span> <span class="kt">array</span><span class="o">[</span><span class="n">n</span><span class="p">,</span> <span class="kt">char</span><span class="o">]</span> <span class="c"># error </span><i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This produces an error because <code>n</code> is declared using <code>let</code>&#8201;&#8212;&#8201;its value is not known at compile time. We can only use values declared with <code>const</code> as a <code>length</code> parameter for an array initialization.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sequences">Sequences</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Sequences are containers similar to arrays, but their length doesn&#8217;t have to be known at compile time, and it can change during runtime: we declare only the type of the contained elements with <code>seq[&lt;type&gt;]</code>.
Sequences are also homogeneous, i.e. every element in a sequence has to be the same type.</p>
</div>
<div class="paragraph">
<p>The elements of a sequence are enclosed between <code>@[</code> and <code>]</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span>
  <span class="n">e1</span><span class="p">:</span> <span class="kt">seq</span><span class="o">[</span><span class="kt">int</span><span class="o">]</span> <span class="o">=</span> <span class="o">@[]</span>   <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="n">f</span> <span class="o">=</span> <span class="o">@[</span><span class="s">"abc"</span><span class="p">,</span> <span class="s">"def"</span><span class="o">]</span>  <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The type of an empty sequence must be declared.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The type of a non-empty sequence can be inferred. In this case, it is a sequence containing strings.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Another way to initialize an empty sequence is to call the <code>newSeq</code> procedure. We&#8217;ll look more at procedure calls in the <a href="#_procedures">next chapter</a> but for now just know that this is also a possibility:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span>
  <span class="n">e</span> <span class="o">=</span> <span class="n">newSeq</span><span class="o">[</span><span class="kt">int</span><span class="o">]</span><span class="p">()</span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Providing the type parameter inside of square brackets allows the procedure to know that it shall return a sequence of a certain type.<br>
A frequent error is omission of the final <code>()</code>, which must be included.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We can add new elements to a sequence with the <code>add</code> function, similar to how we did with strings.
For this to work the sequence must be mutable (defined with <code>var</code>), and the element we&#8217;re adding must be of the same type as the elements in the sequence.</p>
</div>
<div class="listingblock">
<div class="title">seq.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span>
  <span class="n">g</span> <span class="o">=</span> <span class="o">@[</span><span class="sc">'x'</span><span class="p">,</span> <span class="sc">'y'</span><span class="o">]</span>
  <span class="n">h</span> <span class="o">=</span> <span class="o">@[</span><span class="sc">'1'</span><span class="p">,</span> <span class="sc">'2'</span><span class="p">,</span> <span class="sc">'3'</span><span class="o">]</span>

<span class="n">g</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="sc">'z'</span><span class="p">)</span>  <i class="conum" data-value="1"></i><b>(1)</b>
<span class="n">echo</span> <span class="n">g</span>

<span class="n">h</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>    <i class="conum" data-value="2"></i><b>(2)</b>
<span class="n">echo</span> <span class="n">h</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Adding a new element of the same type (char).</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Adding another sequence containing the same type.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">@['x', 'y', 'z']
@['1', '2', '3', 'x', 'y', 'z']</code></pre>
</div>
</div>
<div class="paragraph">
<p>Trying to pass different types to the existing sequences will produce an error:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span> <span class="n">i</span> <span class="o">=</span> <span class="o">@[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="o">]</span>

<span class="n">i</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="mf">9.81</span><span class="p">)</span> <span class="c"># error </span><i class="conum" data-value="1"></i><b>(1)</b>
<span class="n">g</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>    <span class="c"># error </span><i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Trying to add a <code>float</code> to a sequence of <code>int</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Trying to add a sequence of <code>int</code> to a sequence of <code>char</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Since sequences can vary in length we need a way to get their length, for this we can use the <code>len</code> function.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span> <span class="n">i</span> <span class="o">=</span> <span class="o">@[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="o">]</span>
<span class="n">echo</span> <span class="n">i</span><span class="p">.</span><span class="n">len</span>

<span class="n">i</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="n">echo</span> <span class="n">i</span><span class="p">.</span><span class="n">len</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">3
4</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_indexing_and_slicing">Indexing and slicing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Indexing allows us to get a specific element from a container by its index.
Think of the index as a position inside of the container.</p>
</div>
<div class="paragraph">
<p>Nim, like many other programming languages, has zero-based indexing, meaning that the first element in a container has the index zero, the second element has the index one, etc.</p>
</div>
<div class="paragraph">
<p>If we want to index "from the back", it is done by using the <code>^</code> prefix.
The last element (first from the back) has index <code>^1</code>.</p>
</div>
<div class="paragraph">
<p>The syntax for indexing is <code>&lt;container&gt;[&lt;index&gt;]</code>.</p>
</div>
<div class="listingblock">
<div class="title">indexing.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span> <span class="n">j</span> <span class="o">=</span> <span class="o">[</span><span class="sc">'a'</span><span class="p">,</span> <span class="sc">'b'</span><span class="p">,</span> <span class="sc">'c'</span><span class="p">,</span> <span class="sc">'d'</span><span class="p">,</span> <span class="sc">'e'</span><span class="o">]</span>

<span class="n">echo</span> <span class="n">j</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span>   <i class="conum" data-value="1"></i><b>(1)</b>
<span class="n">echo</span> <span class="n">j</span><span class="o">[</span><span class="p">^</span><span class="mi">1</span><span class="o">]</span>  <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Zero-based indexing: the element at index 1 is <code>b</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Getting the last element.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">b
e</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p>Slicing allows us to get a series of elements with one call.
It uses the same syntax as ranges (introduced in the <a href="#_for_loop">for loop section</a>).</p>
</div>
<div class="paragraph">
<p>If we use <code>start .. stop</code> syntax, both ends are included in the slice.
Using <code>start ..&lt; stop</code> syntax, the <code>stop</code> index is not included in the slice.</p>
</div>
<div class="paragraph">
<p>The syntax for slicing is <code>&lt;container&gt;[&lt;start&gt; .. &lt;stop&gt;]</code>.</p>
</div>
<div class="listingblock">
<div class="title">indexing.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="n">echo</span> <span class="n">j</span><span class="o">[</span><span class="mi">0</span> <span class="p">..</span> <span class="mi">3</span><span class="o">]</span>
<span class="n">echo</span> <span class="n">j</span><span class="o">[</span><span class="mi">0</span> <span class="p">..</span><span class="o">&lt;</span> <span class="mi">3</span><span class="o">]</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">@[a, b, c, d]
@[a, b, c]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Both indexing and slicing can be used to assign new values to the existing mutable containers and strings.</p>
</div>
<div class="listingblock">
<div class="title">assign.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span>
  <span class="n">k</span><span class="p">:</span> <span class="kt">array</span><span class="o">[</span><span class="mi">5</span><span class="p">,</span> <span class="kt">int</span><span class="o">]</span>
  <span class="n">l</span> <span class="o">=</span> <span class="o">@[</span><span class="sc">'p'</span><span class="p">,</span> <span class="sc">'w'</span><span class="p">,</span> <span class="sc">'r'</span><span class="o">]</span>
  <span class="n">m</span> <span class="o">=</span> <span class="s">"Tom and Jerry"</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="mi">0</span> <span class="p">..</span> <span class="mi">4</span><span class="p">:</span>  <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="n">k</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="mi">7</span> <span class="o">*</span> <span class="n">i</span>
<span class="n">echo</span> <span class="n">k</span>

<span class="n">l</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="sc">'q'</span>        <i class="conum" data-value="2"></i><b>(2)</b>
<span class="n">echo</span> <span class="n">l</span>

<span class="n">m</span><span class="o">[</span><span class="mi">8</span> <span class="p">..</span> <span class="mi">9</span><span class="o">]</span> <span class="o">=</span> <span class="s">"Ba"</span>  <i class="conum" data-value="3"></i><b>(3)</b>
<span class="n">echo</span> <span class="n">m</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Array of length 5 has indexes from zero to four. We will assign a value to each element of the array.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Assigning (changing) the second element (index 1) of a sequence.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Changing characters of a string at indexes 8 and 9.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">[0, 7, 14, 21, 28]
@['p', 'q', 'r']
Tom and Barry</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tuples">Tuples</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Both of the containers we&#8217;ve seen so far have been homogeneous.
Tuples, on the other hand, contain heterogeneous data, i.e. elements of a tuple can be of different types.
Similarly to arrays, tuples have fixed-size.</p>
</div>
<div class="paragraph">
<p>The elements of a tuple are enclosed inside of parentheses.</p>
</div>
<div class="listingblock">
<div class="title">tuples.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span> <span class="n">n</span> <span class="o">=</span> <span class="p">(</span><span class="s">"Banana"</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="sc">'c'</span><span class="p">)</span>  <i class="conum" data-value="1"></i><b>(1)</b>
<span class="n">echo</span> <span class="n">n</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Tuples can contain fields of different types. In this case: <code>string</code>, <code>int</code>, and <code>char</code>.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">(Field0: "Banana", Field1: 2, Field2: 'c')</code></pre>
</div>
</div>
<div class="paragraph">
<p>We can also name each field in a tuple to distinguish them.
This can be used for accessing the elements of the tuple, instead of indexing.</p>
</div>
<div class="listingblock">
<div class="title">tuples.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span> <span class="n">o</span> <span class="o">=</span> <span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="s">"Banana"</span><span class="p">,</span> <span class="n">weight</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="n">rating</span><span class="p">:</span> <span class="sc">'c'</span><span class="p">)</span>

<span class="n">o</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="mi">7</span>          <i class="conum" data-value="1"></i><b>(1)</b>
<span class="n">o</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">"Apple"</span>  <i class="conum" data-value="2"></i><b>(2)</b>
<span class="n">echo</span> <span class="n">o</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Changing the value of a field by using the field&#8217;s index.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Changing the value of a field by using the field&#8217;s name.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">(name: "Apple", weight: 7, rating: 'c')</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exercises_2">Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create an empty array which can contain ten integers.</p>
<div class="ulist">
<ul>
<li>
<p>Fill that array with numbers 10, 20, &#8230;&#8203;, 100. (Hint: use loops)</p>
</li>
<li>
<p>Print only the elements of that array that are on odd indices (values 20, 40, &#8230;&#8203;).</p>
</li>
<li>
<p>Multiply elements on even indices by 5. Print the modified array.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Re-do the <a href="#_exercises_2">Collatz conjecture exercise</a>, but this time instead of printing each step, add it to a sequence.</p>
<div class="ulist">
<ul>
<li>
<p>Pick a starting number. Interesting choices, among others, are 9, 19, 25 and 27.</p>
</li>
<li>
<p>Create a sequence whose only member is that starting number</p>
</li>
<li>
<p>Using the same logic as before, keep adding elements to the sequence until you reach 1</p>
</li>
<li>
<p>Print the length of the sequence, and the sequence itself</p>
</li>
</ul>
</div>
</li>
<li>
<p>Find the number in a range from 2 to 100 which will produce the longest Collatz sequence.</p>
<div class="ulist">
<ul>
<li>
<p>For each number in the given range calculate its Collatz sequence</p>
</li>
<li>
<p>If the length of current sequence is longer than the previous record, save the current length and the starting number as a new record (you can use the tuple <code>(longestLength, startingNumber)</code> or two separate variables)</p>
</li>
<li>
<p>Print the starting number which gives the longest sequence, and its length</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
<h1 id="_procedures" class="sect0">Procedures</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>Procedures, or <em>functions</em> as they are called in some other programming languages, are parts of code that perform a specific task, packaged as a unit.
The benefit of grouping code together like this is that we can <em>call</em> these procedures instead of writing all the code over again when we wish to use the procedure&#8217;s code.</p>
</div>
<div class="paragraph">
<p>In some of the previous chapters we&#8217;ve looked at the Collatz conjecture in various different scenarios.
By wrapping up the Collatz conjecture logic into a procedure we could have called the same code for all the exercises.</p>
</div>
<div class="paragraph">
<p>So far we have used many built-in procedures, such as <code>echo</code> for printing, <code>add</code> for adding elements to a sequence, <code>inc</code> to increase the value of an integer, <code>len</code> to get the length of a container, etc.
Now we&#8217;ll see how to create and use our own procedures.</p>
</div>
<div class="paragraph">
<p>Some of the advantages of using procedures are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Reducing code duplication</p>
</li>
<li>
<p>Easier to read code as we can name pieces by what they do</p>
</li>
<li>
<p>Decomposing a complex task into simpler steps</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As mentioned in the beginning of this section, procedures are often called functions in other languages.
This is actually a bit of a misnomer if we consider the mathematical definition of a function.
Mathematical functions take a set of arguments (like <code>f(x, y)</code>, where <code>f</code> is a function, and <code>x</code> and <code>y</code> are its arguments) and <em>always</em> return the same answer for the same input.</p>
</div>
<div class="paragraph">
<p>Programmatic procedures on the other hand don&#8217;t always return the same output for a given input.
Sometimes they don&#8217;t return anything at all.
This is because our computer programs can store state in the variables we mentioned earlier which procedures can read and change.
In Nim, the word <code>func</code> is currently reserved to be used as the more mathematically correct kind of function, forcing no side-effects.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_declaring_a_procedure">Declaring a procedure</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before we can use (call) our procedure, we need to create it and define what it does.</p>
</div>
<div class="paragraph">
<p>A procedure is declared by using the <code>proc</code> keyword and the procedure name, followed by the input parameters and their type inside of parentheses, and the last part is a colon and the type of the value returned from a procedure, like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">proc </span><span class="err">&lt;</span><span class="nf">name</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&lt;</span><span class="n">p1</span><span class="o">&gt;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">type1</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">p2</span><span class="o">&gt;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">type2</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">...):</span> <span class="o">&lt;</span><span class="n">returnType</span><span class="o">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The body of a procedure is written in the indented block following the declaration appended with a <code>=</code> sign.</p>
</div>
<div class="listingblock">
<div class="title">callProcs.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">proc </span><span class="nf">findMax</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="kt">int</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="kt">int</span><span class="p">):</span> <span class="kt">int</span> <span class="o">=</span>  <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">x</span>  <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="k">else</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">y</span>
  <span class="c"># this is inside of the procedure</span>
<span class="c"># this is outside of the procedure</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Declaring procedure called <code>findMax</code>, which has two parameters, <code>x</code> and <code>y</code>, and it returns an <code>int</code> type.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>To return a value from a procedure, we use the <code>return</code> keyword.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">proc </span><span class="nf">echoLanguageRating</span><span class="p">(</span><span class="n">language</span><span class="p">:</span> <span class="kt">string</span><span class="p">)</span> <span class="o">=</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="k">case</span> <span class="n">language</span>
  <span class="k">of</span> <span class="s">"Nim"</span><span class="p">,</span> <span class="s">"nim"</span><span class="p">,</span> <span class="s">"NIM"</span><span class="p">:</span>
    <span class="n">echo</span> <span class="n">language</span><span class="p">,</span> <span class="s">" is the best language!"</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="n">echo</span> <span class="n">language</span><span class="p">,</span> <span class="s">" might be a second-best language."</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>echoLanguageRating</code> procedure just echoes the given name, it doesn&#8217;t return anything, so the return type is not declared.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p>Normally we&#8217;re not allowed to change any of the parameters we are given.
Doing something like this will throw an error:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">proc </span><span class="nf">changeArgument</span><span class="p">(</span><span class="n">argument</span><span class="p">:</span> <span class="kt">int</span><span class="p">)</span> <span class="o">=</span>
  <span class="n">argument</span> <span class="o">+=</span> <span class="mi">5</span>

<span class="k">var</span> <span class="n">ourVariable</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">changeArgument</span><span class="p">(</span><span class="n">ourVariable</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In order for this to work we need to allow Nim, and the programmer using our procedure, to change the argument by declaring it as a variable:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">proc </span><span class="nf">changeArgument</span><span class="p">(</span><span class="n">argument</span><span class="p">:</span> <span class="k">var</span> <span class="kt">int</span><span class="p">)</span> <span class="o">=</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="n">argument</span> <span class="o">+=</span> <span class="mi">5</span>

<span class="k">var</span> <span class="n">ourVariable</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">changeArgument</span><span class="p">(</span><span class="n">ourVariable</span><span class="p">)</span>
<span class="n">echo</span> <span class="n">ourVariable</span>
<span class="n">changeArgument</span><span class="p">(</span><span class="n">ourVariable</span><span class="p">)</span>
<span class="n">echo</span> <span class="n">ourVariable</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Notice how <code>argument</code> is now declared as a <code>var int</code> and not just as an <code>int</code>.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">15
20</code></pre>
</div>
</div>
<div class="paragraph">
<p>This of course means that the name we pass it must be declared as a variable as well, passing in something assigned with <code>const</code> or <code>let</code> will throw an error.</p>
</div>
<div class="paragraph">
<p>While it is good practice to pass things as arguments it is also possible to use names declared outside the procedure, both variables and constants:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">100</span>

<span class="k">proc </span><span class="nf">echoX</span><span class="p">()</span> <span class="o">=</span>
  <span class="n">echo</span> <span class="n">x</span>  <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>  <i class="conum" data-value="2"></i><b>(2)</b>

<span class="n">echoX</span><span class="p">()</span>
<span class="n">echoX</span><span class="p">()</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Here we access the outside variable <code>x</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>We can also update its value, since it&#8217;s declared as a variable.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="mi">100</span>
<span class="mi">101</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_calling_the_procedures">Calling the procedures</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After we have declared a procedure, we can call it.
The usual way of calling procedures/functions in many programming languages is to state its name and provide the arguments in the parentheses, like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="o">&lt;</span><span class="n">procName</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&lt;</span><span class="n">arg1</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">arg2</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">...)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The result from calling a procedure can be stored in a variable.</p>
</div>
<div class="paragraph">
<p>If we want to call our <code>findMax</code> procedure from the above example, and save the return value in a variable we can do that with:</p>
</div>
<div class="listingblock">
<div class="title">callProcs.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">a</span> <span class="o">=</span> <span class="n">findMax</span><span class="p">(</span><span class="mi">987</span><span class="p">,</span> <span class="mi">789</span><span class="p">)</span>
  <span class="n">b</span> <span class="o">=</span> <span class="n">findMax</span><span class="p">(</span><span class="mi">123</span><span class="p">,</span> <span class="mi">321</span><span class="p">)</span>
  <span class="n">c</span> <span class="o">=</span> <span class="n">findMax</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>  <i class="conum" data-value="1"></i><b>(1)</b>

<span class="n">echo</span> <span class="n">a</span>
<span class="n">echo</span> <span class="n">b</span>
<span class="n">echo</span> <span class="n">c</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The result from the function <code>findMax</code> is here named <code>c</code>, and is called with the results of our first two calls (<code>findMax(987, 321)</code>).</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">987
321
987</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p>Nim, unlike many other languages, also supports <a href="https://en.wikipedia.org/wiki/Uniform_Function_Call_Syntax">Uniform Function Call Syntax</a>, which allows many different ways of calling procedures.</p>
</div>
<div class="paragraph">
<p>This one is a call where the first argument is written before the function name, and the rest of the parameters are stated in parentheses:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="o">&lt;</span><span class="n">arg1</span><span class="o">&gt;</span><span class="p">.</span><span class="o">&lt;</span><span class="n">procName</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&lt;</span><span class="n">arg2</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">...)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>We have used this syntax when we were adding elements to an existing sequence (<code>&lt;seq&gt;.add(&lt;element&gt;)</code>), as this makes it more readable and expresses our intent more clearly than writing <code>add(&lt;seq&gt;, &lt;element&gt;)</code>.
We can also omit the parentheses around the arguments:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="o">&lt;</span><span class="n">procName</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">arg1</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">arg2</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">...</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>We&#8217;ve seen this style being used when we call the <code>echo</code> procedure, and when calling the <code>len</code> procedure without any arguments.
These two can also be combined like this, but this syntax however is not seen very often:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="o">&lt;</span><span class="n">arg1</span><span class="o">&gt;</span><span class="p">.</span><span class="o">&lt;</span><span class="n">procName</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">arg2</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">arg3</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">...</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p>The uniform call syntax allows for more readable chaining of multiple procedures:</p>
</div>
<div class="listingblock">
<div class="title">ufcs.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">proc </span><span class="nf">plus</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="kt">int</span><span class="p">):</span> <span class="kt">int</span> <span class="o">=</span>  <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>

<span class="k">proc </span><span class="nf">multi</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="kt">int</span><span class="p">):</span> <span class="kt">int</span> <span class="o">=</span>
  <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span>

<span class="k">let</span>
  <span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>
  <span class="n">b</span> <span class="o">=</span> <span class="mi">3</span>
  <span class="n">c</span> <span class="o">=</span> <span class="mi">4</span>

<span class="n">echo</span> <span class="n">a</span><span class="p">.</span><span class="n">plus</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="o">==</span> <span class="n">plus</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="n">echo</span> <span class="n">c</span><span class="p">.</span><span class="n">multi</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">==</span> <span class="n">multi</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>


<span class="n">echo</span> <span class="n">a</span><span class="p">.</span><span class="n">plus</span><span class="p">(</span><span class="n">b</span><span class="p">).</span><span class="n">multi</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>  <i class="conum" data-value="2"></i><b>(2)</b>
<span class="n">echo</span> <span class="n">c</span><span class="p">.</span><span class="n">multi</span><span class="p">(</span><span class="n">b</span><span class="p">).</span><span class="n">plus</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>  <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>If multiple parameters are of the same type, we can declare their type in this compact way.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>First we add <code>a</code> and <code>b</code>, then the result of that operation (2 + 3 = 5) is passed as the first parameter to the <code>multi</code> procedure, where it is multiplied by <code>c</code> (5 * 4 = 20).</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>First we multiply <code>c</code> and <code>b</code>, then the result of that operation (4 * 3 = 12) is passed as the first parameter to the <code>plus</code> procedure, where it is added with <code>a</code> (12 + 2 = 14).</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">true
true
20
14</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_result_variable">Result variable</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In Nim, every procedure that returns a value has an implicitly declared and initialized (with a default value) <code>result</code> variable.
The procedure will return the value of this <code>result</code> variable when it reaches the end of its indented block, even with no <code>return</code> statement.</p>
</div>
<div class="listingblock">
<div class="title">result.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">proc </span><span class="nf">findBiggest</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="kt">seq</span><span class="o">[</span><span class="kt">int</span><span class="o">]</span><span class="p">):</span> <span class="kt">int</span> <span class="o">=</span>  <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="k">for</span> <span class="n">number</span> <span class="ow">in</span> <span class="n">a</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">number</span> <span class="o">&gt;</span> <span class="n">result</span><span class="p">:</span>
      <span class="n">result</span> <span class="o">=</span> <span class="n">number</span>
  <span class="c"># the end of proc                   </span><i class="conum" data-value="2"></i><b>(2)</b>

<span class="k">let</span> <span class="n">d</span> <span class="o">=</span> <span class="o">@[</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="o">-</span><span class="mi">15</span><span class="o">]</span>
<span class="n">echo</span> <span class="n">findBiggest</span><span class="p">(</span><span class="n">d</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The return type is <code>int</code>. The <code>result</code> variable is initialized with the default value for <code>int</code>: <code>0</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>When the end of the procedure is reached, the value of <code>result</code> is returned.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">33</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that this procedure is here to demonstrate the <code>result</code> variable, and it is not 100% correct:
if you would pass a sequence containing only negative numbers, this procedure would return <code>0</code> (which is <em>not</em> contained in the sequence).</p>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Beware!
In older Nim versions (before Nim 0.19.0), the default value of strings and sequences was <a href="https://en.wikipedia.org/wiki/Null_pointer"><code>nil</code></a>, and when we would use them as returning types, the <code>result</code> variable would need to be initialized as an empty string (<code>""</code>) or as an empty sequence (<code>@[]</code>).
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">result.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">proc </span><span class="nf">keepOdds</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="kt">seq</span><span class="o">[</span><span class="kt">int</span><span class="o">]</span><span class="p">):</span> <span class="kt">seq</span><span class="o">[</span><span class="kt">int</span><span class="o">]</span> <span class="o">=</span>
  <span class="c"># result = @[]          </span><i class="conum" data-value="1"></i><b>(1)</b>
  <span class="k">for</span> <span class="n">number</span> <span class="ow">in</span> <span class="n">a</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">number</span> <span class="ow">mod</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
      <span class="n">result</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>


<span class="k">let</span> <span class="n">f</span> <span class="o">=</span> <span class="o">@[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">57</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">98</span><span class="o">]</span>
<span class="n">echo</span> <span class="n">keepOdds</span><span class="p">(</span><span class="n">f</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>In Nim version 0.19.0 and newer, this line is not needed&#8201;&#8212;&#8201;sequences are automatically initialized as empty sequences.<br>
In older Nim versions, sequences must be initialized, and without this line the compiler would throw an error. (Notice that <code>var</code> must <em>not</em> be used, as <code>result</code> is already implicitly declared.)</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">@[1, 43, 57]</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p>Inside of a procedure we can also call other procedures.</p>
</div>
<div class="listingblock">
<div class="title">filterOdds.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">proc </span><span class="nf">isDivisibleBy3</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="kt">int</span><span class="p">):</span> <span class="kt">bool</span> <span class="o">=</span>
  <span class="k">return</span> <span class="n">x</span> <span class="ow">mod</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span>

<span class="k">proc </span><span class="nf">filterMultiplesOf3</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="kt">seq</span><span class="o">[</span><span class="kt">int</span><span class="o">]</span><span class="p">):</span> <span class="kt">seq</span><span class="o">[</span><span class="kt">int</span><span class="o">]</span> <span class="o">=</span>
  <span class="c"># result = @[]            </span><i class="conum" data-value="1"></i><b>(1)</b>
  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">a</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">i</span><span class="p">.</span><span class="n">isDivisibleBy3</span><span class="p">():</span>  <i class="conum" data-value="2"></i><b>(2)</b>
      <span class="n">result</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>


<span class="k">let</span>
  <span class="n">g</span> <span class="o">=</span> <span class="o">@[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="o">]</span>
  <span class="n">h</span> <span class="o">=</span> <span class="o">@[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="o">]</span>
  <span class="n">i</span> <span class="o">=</span> <span class="o">@[</span><span class="mi">626</span><span class="p">,</span> <span class="mi">45390</span><span class="p">,</span> <span class="mi">3219</span><span class="p">,</span> <span class="mi">4210</span><span class="p">,</span> <span class="mi">4126</span><span class="o">]</span>

<span class="n">echo</span> <span class="n">filterMultiplesOf3</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="n">echo</span> <span class="n">h</span><span class="p">.</span><span class="n">filterMultiplesOf3</span><span class="p">()</span>
<span class="n">echo</span> <span class="n">filterMultiplesOf3</span> <span class="n">i</span>   <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Once again, this line is not needed in the newer versions of Nim.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Calling the previously declared procedure. Its return type is <code>bool</code> and can be used in the if-statement.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The third way of calling a procedure, as we saw above.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">@[6, 9, 0, 3]
@[3]
@[45390, 3219]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_forward_declaration">Forward declaration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As mentioned in the very beginning of this section we can declare a procedure without a code block.
The reason for this is that we have to declare procedures before we can call them, doing this will not work:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="n">echo</span> <span class="mf">5.</span><span class="n">plus</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="c"># error      </span><i class="conum" data-value="1"></i><b>(1)</b>

<span class="k">proc </span><span class="nf">plus</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="kt">int</span><span class="p">):</span> <span class="kt">int</span> <span class="o">=</span>  <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This will throw an error as <code>plus</code> isn&#8217;t defined yet.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Here we define <code>plus</code>, but since it&#8217;s after we use it Nim doesn&#8217;t know about it yet.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The way to get around this is what&#8217;s called a forward declaration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">proc </span><span class="nf">plus</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="kt">int</span><span class="p">):</span> <span class="kt">int</span>    <i class="conum" data-value="1"></i><b>(1)</b>

<span class="n">echo</span> <span class="mf">5.</span><span class="n">plus</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>              <i class="conum" data-value="2"></i><b>(2)</b>

<span class="k">proc </span><span class="nf">plus</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="kt">int</span><span class="p">):</span> <span class="kt">int</span> <span class="o">=</span>  <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Here we tell Nim that it should consider the <code>plus</code> procedure to exist with this definition.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Now we are free to use it in our code, this will work.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>This is were <code>plus</code> is actually implemented, this must of course match our previous definition.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exercises_3">Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a procedure which will greet a person (print "Hello &lt;name&gt;") based on the provided name. Create a sequence of names. Greet each person using the created procedure.</p>
</li>
<li>
<p>Create a procedure <code>findMax3</code> which will return the largest of three values.</p>
</li>
<li>
<p>Points in 2D plane can be represented as <code>tuple[x, y: float]</code>. Write a procedure which will receive two points and return a new point which is a sum of those two points (add x&#8217;s and y&#8217;s separately).</p>
</li>
<li>
<p>Create two procedures <code>tick</code> and <code>tock</code> which echo out the words "tick" and "tock". Have a global variable to keep track of how many times they have run, and run one from the other until the counter reaches 20. The expected output is to get lines with "tick" and "tock" alternating 20 times. (Hint: use forward declarations.)</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can press Ctrl+C to stop execution of a program if you enter an infinite loop.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Test all procedures by calling them with different parameters.</p>
</div>
</div>
</div>
<h1 id="_modules" class="sect0">Modules</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>So far we have used the functionality which is available by default every time we start a new Nim file.
This can be extended with modules, which give more functionality for some specific topic.</p>
</div>
<div class="paragraph">
<p>Some of the most used Nim modules are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>strutils</code>: additional functionality when dealing with strings</p>
</li>
<li>
<p><code>sequtils</code>: additional functionality for sequences</p>
</li>
<li>
<p><code>math</code>: mathematical functions (logarithms, square roots, &#8230;&#8203;), trigonometry (sin, cos, &#8230;&#8203;)</p>
</li>
<li>
<p><code>times</code>: measure and deal with time</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>But there are many more, both in what&#8217;s called the <a href="https://nim-lang.org/docs/lib.html">standard library</a> and in the <a href="https://nimble.directory/">nimble package manager</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_importing_a_module">Importing a module</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If we want to import a module and all of its functionality, all we have to do is put <code>import &lt;moduleName&gt;</code> in our file.
This is commonly done on the top of the file so we can easily see what our code uses.</p>
</div>
<div class="listingblock">
<div class="title">stringutils.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">import</span> <span class="n">strutils</span>       <i class="conum" data-value="1"></i><b>(1)</b>

<span class="k">let</span>
  <span class="n">a</span> <span class="o">=</span> <span class="s">"My string with whitespace."</span>
  <span class="n">b</span> <span class="o">=</span> <span class="sc">'!'</span>

<span class="n">echo</span> <span class="n">a</span><span class="p">.</span><span class="n">split</span><span class="p">()</span>        <i class="conum" data-value="2"></i><b>(2)</b>
<span class="n">echo</span> <span class="n">a</span><span class="p">.</span><span class="n">toUpperAscii</span><span class="p">()</span> <i class="conum" data-value="3"></i><b>(3)</b>
<span class="n">echo</span> <span class="n">b</span><span class="p">.</span><span class="n">repeat</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>      <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Importing <a href="https://nim-lang.org/docs/strutils.html">strutils</a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Using <code>split</code> from <code>strutils</code> module. It splits the string in a sequence of words.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>toUpperAscii</code> converts all ASCII letters to uppercase.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>repeat</code> is also from <code>strutils</code> module, and it repeats either a character or a whole string the requested amount of times.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">@["My", "string", "with", "whitespace."]
MY STRING WITH WHITESPACE.
!!!!!</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To the users coming from other programming languages (especially Python), the way that imports work in Nim might seem "wrong". If that&#8217;s the case, <a href="https://narimiran.github.io/2019/07/01/nim-import.html">this</a> is the recommended reading.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="listingblock">
<div class="title">maths.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">import</span> <span class="n">math</span>                 <i class="conum" data-value="1"></i><b>(1)</b>

<span class="k">let</span>
  <span class="n">c</span> <span class="o">=</span> <span class="mf">30.0</span> <span class="c"># degrees</span>
  <span class="n">cRadians</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">degToRad</span><span class="p">()</span>   <i class="conum" data-value="2"></i><b>(2)</b>

<span class="n">echo</span> <span class="n">cRadians</span>
<span class="n">echo</span> <span class="n">sin</span><span class="p">(</span><span class="n">cRadians</span><span class="p">).</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <i class="conum" data-value="3"></i><b>(3)</b>

<span class="n">echo</span> <span class="mi">2</span><span class="p">^</span><span class="mi">5</span>                    <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Importing <a href="https://nim-lang.org/docs/math.html">math</a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Converting degrees to radians with <code>degToRad</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>sin</code> takes radians. We round (also from <code>math</code> module) the result to at most 2 decimal places. (Otherwise the result would be: 0.4999999999999999)</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Math module also has <code>^</code> operator for calculating powers of a number.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">0.5235987755982988
0.5
32</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_our_own">Creating our own</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Often times we have so much code in a project that it makes sense to split it into pieces that each does a certain thing.
If you create two files side by side in a folder, let&#8217;s call them <code>firstFile.nim</code> and <code>secondFile.nim</code>, you can import one from the other as a module:</p>
</div>
<div class="listingblock">
<div class="title">firstFile.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">proc </span><span class="nf">plus</span><span class="o">*</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="kt">int</span><span class="p">):</span> <span class="kt">int</span> <span class="o">=</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>

<span class="k">proc </span><span class="nf">minus</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="kt">int</span><span class="p">):</span> <span class="kt">int</span> <span class="o">=</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="k">return</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Notice how the <code>plus</code> procedure now has an asterisk (<code>*</code>) after it&#8217;s name, this tells Nim that another file importing this one will be able to use this procedure.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>By contrast this will not be visible when importing this file.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">secondFile.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">import</span> <span class="n">firstFile</span>          <i class="conum" data-value="1"></i><b>(1)</b>

<span class="n">echo</span> <span class="n">plus</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>          <i class="conum" data-value="2"></i><b>(2)</b>
<span class="n">echo</span> <span class="n">minus</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="c"># error </span><i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Here we import <code>firstFile.nim</code>. We don&#8217;t need to put the <code>.nim</code> extension on here.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This will work fine and output <code>15</code> as it&#8217;s declared in <code>firstFile</code> and visible to us.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>However this will throw an error as the <code>minus</code> procedure is not visible since it doesn&#8217;t have an asterisk behind it&#8217;s name.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In case you have more than these two files, you might want to organize them in a subdirectory (or more than one subdirectory).
With the following directory structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">.
├── myOtherSubdir
│   ├── fifthFile.nim
│   └── fourthFile.nim
├── mySubdir
│   └── thirdFile.nim
├── firstFile.nim
└── secondFile.nim</code></pre>
</div>
</div>
<div class="paragraph">
<p>if you wanted to import all other files in your <code>secondFile.nim</code> this is how you would do it:</p>
</div>
<div class="listingblock">
<div class="title">secondFile.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">import</span> <span class="n">firstFile</span>
<span class="k">import</span> <span class="n">mySubdir</span><span class="o">/</span><span class="n">thirdFile</span>
<span class="k">import</span> <span class="n">myOtherSubdir</span> <span class="o">/</span> <span class="o">[</span><span class="n">fourthFile</span><span class="p">,</span> <span class="n">fifthFile</span><span class="o">]</span></code></pre>
</div>
</div>
</div>
</div>
<h1 id="_interacting_with_user_input" class="sect0">Interacting with user input</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>Using the stuff we&#8217;ve introduced so far (basic data types and containers, control flow, loops) allows us to make quite a few simple programs.</p>
</div>
<div class="paragraph">
<p>In this chapter we will learn how to make our programs more interactive.
For that we need an option to read data from a file, or ask a user for an input.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_reading_from_a_file">Reading from a file</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s say we have a text file called <code>people.txt</code> in the same directory as our Nim code.
The contents of that file looks like this:</p>
</div>
<div class="listingblock">
<div class="title">people.txt</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="n">Alice</span> <span class="n">A</span><span class="p">.</span>
<span class="n">Bob</span> <span class="n">B</span><span class="p">.</span>
<span class="n">Carol</span> <span class="n">C</span><span class="p">.</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>We want to use the contents of that file in our program, as a list (sequence) of names.</p>
</div>
<div class="listingblock">
<div class="title">readFromFile.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">import</span> <span class="n">strutils</span>

<span class="k">let</span> <span class="n">contents</span> <span class="o">=</span> <span class="n">readFile</span><span class="p">(</span><span class="s">"people.txt"</span><span class="p">)</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="n">echo</span> <span class="n">contents</span>

<span class="k">let</span> <span class="n">people</span> <span class="o">=</span> <span class="n">contents</span><span class="p">.</span><span class="n">splitLines</span><span class="p">()</span>    <i class="conum" data-value="2"></i><b>(2)</b>
<span class="n">echo</span> <span class="n">people</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>To read contents of a file, we use the <code>readFile</code> procedure, and we provide a path to the file from which to read (if the file is in the same directory as our Nim program, providing a filename is enough). The result is a multiline string.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>To split a multiline string into a sequence of strings (each string contains all the contents of a single line) we use <code>splitLines</code> from the <code>strutils</code> module.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">Alice A.
Bob B.
Carol C.
            <i class="conum" data-value="1"></i><b>(1)</b>
@["Alice A.", "Bob B.", "Carol C.", ""] <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>There was a final new line (empty last line) in the original file, which is also present here.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Because of the final new line, our sequence is longer than we expected/wanted.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To solve the problem of a final new line, we can use the <code>strip</code> procedure from <code>strutils</code> after we have read from a file.
All this does is remove any so-called whitespace from the start and end of our string.
Whitespace is simply any character that makes some space, new-lines, spaces, tabs, etc.</p>
</div>
<div class="listingblock">
<div class="title">readFromFile2.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">import</span> <span class="n">strutils</span>

<span class="k">let</span> <span class="n">contents</span> <span class="o">=</span> <span class="n">readFile</span><span class="p">(</span><span class="s">"people.txt"</span><span class="p">).</span><span class="n">strip</span><span class="p">()</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="n">echo</span> <span class="n">contents</span>

<span class="k">let</span> <span class="n">people</span> <span class="o">=</span> <span class="n">contents</span><span class="p">.</span><span class="n">splitLines</span><span class="p">()</span>
<span class="n">echo</span> <span class="n">people</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Using <code>strip</code> provides the expected results.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">Alice A.
Bob B.
Carol C.
@["Alice A.", "Bob B.", "Carol C."]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_reading_user_input">Reading user input</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If we want to interact with a user, we must be able to ask them for an input, and then process it and use it.
We need to read from <a href="https://en.wikipedia.org/wiki/Standard_streams#Standard_input_(stdin)">standard input (stdin)</a> by passing <code>stdin</code> to the <code>readLine</code> procedure.</p>
</div>
<div class="listingblock">
<div class="title">interaction1.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="n">echo</span> <span class="s">"Please enter your name:"</span>
<span class="k">let</span> <span class="n">name</span> <span class="o">=</span> <span class="n">readLine</span><span class="p">(</span><span class="n">stdin</span><span class="p">)</span>  <i class="conum" data-value="1"></i><b>(1)</b>

<span class="n">echo</span> <span class="s">"Hello "</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="s">", nice to meet you!"</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The type of <code>name</code> is inferred to be a string.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">Please enter your name:
        <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Waiting for user input. After we write our name and press <code>Enter</code>, the program will continue.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">Please enter your name:
Alice
Hello Alice, nice to meet you!</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you are using an outdated version of VS Code, you cannot run this the usual way (using <code>Ctrl+Alt+N</code>) because output window doesn&#8217;t allow user inputs&#8201;&#8212;&#8201;you need to run these examples in the terminal.<br>
With the newer versions of VS Code there is no such limitation.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dealing_with_numbers">Dealing with numbers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Reading from a file or from a user input always gives a string as a result.
If we would like to use numbers, we need to convert strings to numbers: we again use the <code>strutils</code> module and use <code>parseInt</code> to convert to integers or <code>parseFloat</code> to convert into a float.</p>
</div>
<div class="listingblock">
<div class="title">interaction2.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">import</span> <span class="n">strutils</span>

<span class="n">echo</span> <span class="s">"Please enter your year of birth:"</span>
<span class="k">let</span> <span class="n">yearOfBirth</span> <span class="o">=</span> <span class="n">readLine</span><span class="p">(</span><span class="n">stdin</span><span class="p">).</span><span class="n">parseInt</span><span class="p">()</span> <i class="conum" data-value="1"></i><b>(1)</b>

<span class="k">let</span> <span class="n">age</span> <span class="o">=</span> <span class="mi">2018</span> <span class="o">-</span> <span class="n">yearOfBirth</span>

<span class="n">echo</span> <span class="s">"You are "</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="s">" years old."</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Convert a string to an integer. When written like this, we trust our user to give a valid integer. What would happen if a user inputs <code>'79</code> or <code>ninety-three</code>? Try it yourself.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">Please enter your year of birth:
1934
You are 84 years old.</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p>If we have file <code>numbers.txt</code> in the same directory as our Nim code, with the following content:</p>
</div>
<div class="listingblock">
<div class="title">numbers.txt</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="mf">27.3</span>
<span class="mf">98.24</span>
<span class="mf">11.93</span>
<span class="mf">33.67</span>
<span class="mf">55.01</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>and we want to read that file and find the sum and average of the numbers provided, we can do something like this:</p>
</div>
<div class="listingblock">
<div class="title">interaction3.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">import</span> <span class="n">strutils</span><span class="p">,</span> <span class="n">sequtils</span><span class="p">,</span> <span class="n">math</span>        <i class="conum" data-value="1"></i><b>(1)</b>

<span class="k">let</span>
  <span class="n">strNums</span> <span class="o">=</span> <span class="n">readFile</span><span class="p">(</span><span class="s">"numbers.txt"</span><span class="p">).</span><span class="n">strip</span><span class="p">().</span><span class="n">splitLines</span><span class="p">()</span>  <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="n">nums</span> <span class="o">=</span> <span class="n">strNums</span><span class="p">.</span><span class="n">map</span><span class="p">(</span><span class="n">parseFloat</span><span class="p">)</span>       <i class="conum" data-value="3"></i><b>(3)</b>

<span class="k">let</span>
  <span class="n">sumNums</span> <span class="o">=</span> <span class="n">sum</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>                  <i class="conum" data-value="4"></i><b>(4)</b>
  <span class="n">average</span> <span class="o">=</span> <span class="n">sumNums</span> <span class="o">/</span> <span class="kt">float</span><span class="p">(</span><span class="n">nums</span><span class="p">.</span><span class="n">len</span><span class="p">)</span>  <i class="conum" data-value="5"></i><b>(5)</b>

<span class="n">echo</span> <span class="n">sumNums</span>
<span class="n">echo</span> <span class="n">average</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We import multiple modules. <code>strutils</code> gives us <code>strip</code> and <code>splitLines</code>, <code>sequtils</code> gives <code>map</code>, and <code>math</code> gives <code>sum</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>We strip the final new line, and split lines to create a sequence of strings.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>map</code> works by applying a procedure (in this case <code>parseFloat</code>) to each member of a container. In other words, we convert each string to a float, returning a new sequence of floats.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Using <code>sum</code> from <code>math</code> module to give us the sum of all elements in a sequence.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>We need to convert the length of a sequence to float, because <code>sumNums</code> is a float.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">226.15
45.23</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exercises_4">Exercises</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ask a user for their height and weight. Calculate their <a href="https://en.wikipedia.org/wiki/Body_mass_index">BMI</a>. Report them the BMI value and the category.</p>
</li>
<li>
<p>Repeat <a href="#_exercises_4">Collatz conjecture exercise</a> so your program asks a user for a starting number. Print the resulting sequence.</p>
</li>
<li>
<p>Ask a user for a string they want to have reversed. Create a procedure which takes a string and returns a reversed version. For example, if user types <code>Nim-lang</code>, the procedure should return <code>gnal-miN</code>. (Hint: use indexing and <code>countdown</code>)</p>
</li>
</ol>
</div>
</div>
</div>
<h1 id="_conclusion" class="sect0">Conclusion</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>It is time to conclude this tutorial.
Hopefully this has been useful to you, and you managed to make your first steps in programming and/or the Nim programming language.</p>
</div>
<div class="paragraph">
<p>These have only been the basics and we&#8217;ve only scratched the surface, but this should be enough to enable you to make simple programs and solve some simple tasks or puzzles.
Nim has a lot more to offer, and hopefully you will continue to explore its possibilities.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_next_steps">Next steps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you want to continue learning from Nim tutorials:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://nim-lang.org/docs/tut1.html">Official Nim tutorial</a></p>
</li>
<li>
<p><a href="https://nim-by-example.github.io/">Nim by example</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you want to solve some programming puzzles:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://adventofcode.com/">Advent of Code</a>: Series of interesting puzzles released every December. Archive of old puzzles (from 2015 onwards) is available.</p>
</li>
<li>
<p><a href="https://projecteuler.net/">Project Euler</a>: Mostly mathematical tasks.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p>Happy coding!</p>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<hr>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p>原文のソースは<a href="https://github.com/narimiran/nim-basics">Github</a>,
和訳のソースは<a href="https://github.com/tenomoto/nim-basics_ja">Github</a>にあります。</p>
</div>
</div>
</div>
</div>
</body>
</html>