<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<title>Nim basics</title>
<link rel="stylesheet" href="./styles/style.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="./rouge-gruvbox.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Nim basics</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_対象とする読者">対象とする読者</a></li>
<li><a href="#_読者として対象ではない_方">読者として対象ではない 方</a></li>
<li><a href="#_このチュートリアルの使い方">このチュートリアルの使い方</a></li>
<li><a href="#_インストール">インストール</a>
<ul class="sectlevel1">
<li><a href="#_nimのインストール">Nimのインストール</a></li>
<li><a href="#_追加のツールのインストール">追加のツールのインストール</a></li>
<li><a href="#_インストールの確認">インストールの確認</a></li>
</ul>
</li>
<li><a href="#_値の命名">値の命名</a>
<ul class="sectlevel1">
<li><a href="#_変数の宣言">変数の宣言</a></li>
<li><a href="#_書き換え不可の代入">書き換え不可の代入</a>
<ul class="sectlevel2">
<li><a href="#_const">Const</a></li>
<li><a href="#_let">Let</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_基本データ型">基本データ型</a>
<ul class="sectlevel1">
<li><a href="#_整数">整数</a></li>
<li><a href="#_浮動小数点数">浮動小数点数</a>
<ul class="sectlevel2">
<li><a href="#_浮動小数点数と整数の変換">浮動小数点数と整数の変換</a></li>
</ul>
</li>
<li><a href="#_文字">文字</a></li>
<li><a href="#_文字列">文字列</a>
<ul class="sectlevel2">
<li><a href="#_特殊文字">特殊文字</a></li>
<li><a href="#_文字列の結合">文字列の結合</a></li>
</ul>
</li>
<li><a href="#_真偽">真偽</a>
<ul class="sectlevel2">
<li><a href="#_関係演算子">関係演算子</a></li>
<li><a href="#_論理演算子">論理演算子</a></li>
</ul>
</li>
<li><a href="#_まとめ">まとめ</a></li>
<li><a href="#_練習問題">練習問題</a></li>
</ul>
</li>
<li><a href="#_流れの制御">流れの制御</a>
<ul class="sectlevel1">
<li><a href="#_if文">If文</a>
<ul class="sectlevel2">
<li><a href="#_else">Else</a></li>
<li><a href="#_elif">Elif</a></li>
</ul>
</li>
<li><a href="#_case">Case</a></li>
</ul>
</li>
<li><a href="#_繰り返し">繰り返し</a>
<ul class="sectlevel1">
<li><a href="#_forループ">Forループ</a></li>
<li><a href="#_whileループ">Whileループ</a></li>
<li><a href="#_breakとcontinue">Breakとcontinue</a></li>
<li><a href="#_練習問題_2">練習問題</a></li>
</ul>
</li>
<li><a href="#_コンテナ">コンテナ</a>
<ul class="sectlevel1">
<li><a href="#_配列">配列</a></li>
<li><a href="#_シーケンス">シーケンス</a></li>
<li><a href="#_要素指定と切り出し">要素指定と切り出し</a></li>
<li><a href="#_タプル">タプル</a></li>
<li><a href="#_練習問題_3">練習問題</a></li>
</ul>
</li>
<li><a href="#_手続き">手続き</a>
<ul class="sectlevel1">
<li><a href="#_手続きの宣言">手続きの宣言</a></li>
<li><a href="#_手続きの呼び出し">手続きの呼び出し</a></li>
<li><a href="#_result変数">Result変数</a></li>
<li><a href="#_前方宣言">前方宣言</a></li>
<li><a href="#_練習問題_4">練習問題</a></li>
</ul>
</li>
<li><a href="#_モジュール">モジュール</a>
<ul class="sectlevel1">
<li><a href="#_モジュールのインはポート">モジュールのインはポート</a></li>
<li><a href="#_自前のモジュール">自前のモジュール</a></li>
</ul>
</li>
<li><a href="#_ユーザ入力の取り扱い">ユーザ入力の取り扱い</a>
<ul class="sectlevel1">
<li><a href="#_ファイルからの読み込み">ファイルからの読み込み</a></li>
<li><a href="#_ユーザ入力の読み取り">ユーザ入力の読み取り</a></li>
<li><a href="#_数値の取り扱い">数値の取り扱い</a></li>
<li><a href="#_練習問題_5">練習問題</a></li>
</ul>
</li>
<li><a href="#_まとめ_2">まとめ</a>
<ul class="sectlevel1">
<li><a href="#_次の段階">次の段階</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://nim-lang.org/">Nim</a>は比較的新しいプログラミング言語で，読みやすく高性能なコードを書くことが可能です。このNimチュートリアルの読者は，おそらくNimについてご存知でしょう。</p>
</div>
<div class="paragraph">
<p>このチュートリアルの原文は<a href="https://narimiran.github.io/nim-basics/">オンライン</a>と<a href="https://github.com/narimiran/nim-basics/raw/master/nim-basics.pdf">PDF</a>で，和訳は<a href="https://www.dpac.dpri.kyoto-u.ac.jp/enomoto/nim-basics/">オンライン</a>と<a href="https://www.dpac.dpri.kyoto-u.ac.jp/enomoto/nim-basics/nim-basics.pdf">PDF</a>で提供されています。</p>
</div>
<div class="paragraph">
<p>このチュートリアルは作成途中です。もし誤りを見つけたり，改善案があれば<a href="https://github.com/narimiran/nim-basics/issues">issue tracker</a>に報告してください。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_対象とする読者">対象とする読者</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>プログラミングの経験がないか，始めて日が浅い方</p>
</li>
<li>
<p>他の言語でのプログラミング経験がある方</p>
</li>
<li>
<p>初めてNimについて探求するため，最初から始めたい方</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_読者として対象ではない_方">読者として対象ではない 方</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>多くのプログラミング経験がある方は他のより進んだチュートリアルをお勧めします。
<a href="https://nim-lang.org/docs/tut1.html">公式チュートリアル</a>や<a href="https://nim-by-example.github.io/">Nim by Example</a>参照。</p>
</li>
<li>
<p>Nimの経験がある方（このチュートリアルの改善にご助力いただければ幸いです。）</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_このチュートリアルの使い方">このチュートリアルの使い方</h2>
<div class="sectionbody">
<div class="paragraph">
<p>このチュートリアルの目的はプログラミングとNimの文法の基礎を示すことにより，読者が他のチュートリアルを読み，独力で進むことができるようにすることです。</p>
</div>
<div class="paragraph">
<p>書かれていることを単に読むだけでなく，自分で試してたり，例を改変したり，独自の例を考えてみたり好奇心を持てれば最善です。いくつかの章の終わりにある練習問題は，解けるように作ってありますで，飛ばさないでください。</p>
</div>
<div class="paragraph">
<p>チュートリアルの一部や練習問題について理解するために，さらに助けが必要なら<a href="https://forum.nim-lang.org/">Nim forum</a>や<a href="https://gitter.im/nim-lang/Nim">Nim Gitter channel</a>，<a href="https://discordapp.com/invite/ezDFDw2">Discord server</a>，または Nim&#8217;s IRC channel on freenode, #nim で質問してください。</p>
</div>
</div>
</div>
<h1 id="_インストール" class="sect0">インストール</h1>
<div class="sect1">
<h2 id="_nimのインストール">Nimのインストール</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Nimは3大オペレーティングシステム向けに完成された配布物が用意されており，Nimのインストールについてはいくつかの選択肢があります。</p>
</div>
<div class="paragraph">
<p><a href="https://nim-lang.org/install.html">公式インストール手順</a>に従えば最新版をインストールできます。最新の機能やバグ修正が必要なら，<a href="https://github.com/dom96/choosenim">choosenim</a>と呼ばれるツールを使えば簡単に安定版と最新開発版を切り替えることが可能です。</p>
</div>
<div class="paragraph">
<p>どちらを選んでも，個々のリンク先で説明されているインストール手順に従うだけでNimはインストールされるはずです。後で，インストールがうまくいったか確認します。</p>
</div>
<div class="paragraph">
<p>Linuxを使っている場合は，使用しているディストリビューションのパッケージマネージャにNimが含まれている可能性が高いです。この方法でインストールしようとする場合は，最新版かどうか確認しましょう（何が最新版か確認するにはウェブサイト参照）。最新版でない場合は，上の二つのうちのどちらかの方法でインストールしましょう。</p>
</div>
<div class="paragraph">
<p>このチュートリアルでは安定版を使います。当初このチュートリアルはNim 0.19（2018年9月リリース）に対して執筆されましたが，Nim 1.0を含む新しい版でも動くはずです。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_追加のツールのインストール">追加のツールのインストール</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Nimコードはどんなエディタでも書くことは可能で，ターミナルからコンパイルと実行ができます。構文強調やコード補完を求めるなら，人気のあるコードエディタにはそのような機能を提供するプラグインがあります。</p>
</div>
<div class="paragraph">
<p>多くのNimユーザは<a href="https://code.visualstudio.com/">VS Code</a>を好み，構文強調とコード補完に<a href="https://marketplace.visualstudio.com/items?itemName=nimsaem.nimvscode">Nim extension</a>，迅速なコンパイルと実行に<a href="https://marketplace.visualstudio.com/items?itemName=formulahendry.code-runner">Code Runner extension</a>を使っています。</p>
</div>
<div class="paragraph">
<p>著者は<a href="https://neovim.io/">NeoVim</a>と<a href="https://github.com/alaviss/nim.nvim">このプラグイン</a>（訳者は<a href="https://github.com/zah/nim.vim">こちらのプラグイン</a>）を使って構文強調やコード補完のような機能を追加しています。</p>
</div>
<div class="paragraph">
<p>他のコードエディタで利用できるエディタサポートについては，<a href="https://github.com/nim-lang/Nim/wiki/Editor-Support">ウィキ</a>を参照してください。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_インストールの確認">インストールの確認</h2>
<div class="sectionbody">
<div class="paragraph">
<p>インストールが成功したか確認するために，入門用の例として昔から使われている<a href="https://en.wikipedia.org/wiki/%22Hello,_World!%22_program">Hello World</a>を書いてみます。</p>
</div>
<div class="paragraph">
<p>Nimで<code>Hello World</code>という語句を印字（スクリーンへの表示でプリンタを使った紙への印刷ではない）簡単で余計なコードは不要です。</p>
</div>
<div class="paragraph">
<p>新しいテキストファイル，例えば<code>helloworld.nim</code>に1行のコードを書くだけです。</p>
</div>
<div class="listingblock">
<div class="title">helloworld.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="n">echo</span> <span class="s">"Hello World!"</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
印字したい語句は<code>echo</code>コマンドの後に置いて二重引用符（<code>"</code>）囲む必要があります。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>最初にプログラムをコンパイルしてから，走らせて期待通りに動作するか確認します。</p>
</div>
<div class="paragraph">
<p>ファイルがあるターミナルを開いてください（Linux ではファイルマネージャで右クリックして "Open Terminal here"，ウィンドウズではシフト+ 右クリックでコマンドラインを開くメニューが出ます）。</p>
</div>
<div class="paragraph">
<p>ターミナルで次のように打鍵してプログラムをコンパイルします。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="go">nim c helloworld.nim</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>コンパイルに成功した後でプログラムを実行ができます。Linuxではプログラムを実行するにはターミナルで<code>./helloworld</code>ウィンドウズでは<code>helloworld.exe</code>と打鍵します。</p>
</div>
<div class="paragraph">
<p>ただ一つのコマンドでコンパイルと実行をすることもできます。次のように打鍵してください。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="terminal"><span class="go">nim c -r helloworld.nim</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>c</code>はNimにファイルをコンパルすることを命じ，<code>-r</code>は直ちに実行することを命令しています。<br>
全てのコンパイラオプションを参照するには，ターミナルで<code>nim --help</code>と打鍵してください。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>上述の VSCode と Code Runner 拡張機能，<code>Ctrl+Alt+N</code>を押すだけでファイルはコンパイル・実行されます。</p>
</div>
<div class="paragraph">
<p>プログラムの実行にどちらの方法を選択した場合でも，すぐに出力ウィンドウ（またはターミナル）に次のように表示されるはずです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">Hello World!</code></pre>
</div>
</div>
<div class="paragraph">
<p>おめでとうございます。初めてのNimプログラムの実行に成功しました。</p>
</div>
<div class="paragraph">
<p>画面に何かを印字する方法（<code>echo</code>コマンドを利用）やプログラムのコンパイル（ターミナルで<code>nim c programName.nim</code>のように打鍵）し，それを実行する（複数の方法）を覚えました。</p>
</div>
<div class="paragraph">
<p>これからNimの基本要素を探索を始めます。これらは簡単なNimプログラムを書くために役立ちます。</p>
</div>
</div>
</div>
<h1 id="_値の命名" class="sect0">値の命名</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>プログラムの中の値に名前をつけると，分かりやすくなります。ユーザの名前を聞いて後で使うために保存しておけば，再度聞き返さずに利用することができます。</p>
</div>
<div class="paragraph">
<p>例として<code>pi = 3.14</code>で名前<code>pi</code>は値<code>3.14</code>に結びついています。
明らかに<code>pi</code>の型は（十進法の）数値です。</p>
</div>
<div class="paragraph">
<p>別の例として<code>firstName = Alice</code>では<code>firstName</code>は値<code>Alice</code>を持つ変数の名前です。
この変数の型は単語ということができるでしょう。</p>
</div>
<div class="paragraph">
<p>代入は，多くのプログラム言語で同様に動作します。
代入では <em>名前</em>, <em>値</em>, そして <em>型</em> があります。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_変数の宣言">変数の宣言</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Nimは<a href="https://en.wikipedia.org/wiki/Type_system#STATIC">静的型付け</a>プログラミング言語で，代入の型は値を使う前に宣言されていなければなりません。</p>
</div>
<div class="paragraph">
<p>Nimでは変更できる値を変更できないものと区別しなければなりませんが，後ほど詳しく説明します。
変数を宣言（変更可能な代入）するには<code>var</code>キーワードを使って，次のような構文により名前と型を書きます（値は後で与えられます）。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span> <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="p">:</span> <span class="o">&lt;</span><span class="k">type</span><span class="o">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>値がわかっているときは，変数を宣言して直ちに値を与えることができます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span> <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="p">:</span> <span class="o">&lt;</span><span class="k">type</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
山括弧 (<code>&lt;&gt;</code>) は変更してよいものを示しています。<br>
従って<code>&lt;name&gt;</code>は山括弧の中の文字通りの単語<code>name</code>ではなくどんな名前でも構いません。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Nimは<a href="https://en.wikipedia.org/wiki/Type_inference">型推論</a>機能があり，明示的に型を指定しなくてもコンパイラが自動的に値から名前代入の型を検出できます。</p>
</div>
<div class="paragraph">
<p>様々な型については<a href="#_基本データ型">次章</a>で述べます。</p>
</div>
<div class="paragraph">
<p>型推論を使うと，次のように明示的な型なしに変数の代入ができます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span> <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Nimにおける代入の例は次のようなものです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span> <span class="n">a</span><span class="p">:</span> <span class="kt">int</span>  <i class="conum" data-value="1"></i><b>(1)</b>
<span class="k">var</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">7</span>   <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>変数<code>a</code>は<code>int</code>（整数）で値は明示的に定めていません。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>変数<code>b</code>は値が<code>7</code>でその型は整数として自動的に検出されています。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>代入では，プログラムにおいて意味のある名前を選ぶことが重要です。単に<code>a</code>，<code>b</code> ，<code>c</code>などとすると，すぐに混乱してきます。一つの単語よりも多くの語からなる名前を選ぶときは，通常<code>camelCase</code>スタイル（最初の文字は小文字であることに注意）で書かれます。</p>
</div>
<div class="paragraph">
<p>ただし，Nimは大文字と小文字とを区別せず，アンダスコアを無視することに注意が必要です。つまり，<code>helloWrold</code>と<code>hello_world</code>は同じです。例外として最初の文字は大文字と小文字とを区別します。変数の名前には数字やUTF-8文字を含めることができます。望むのなら絵文字も使えますが，他の人が打鍵することになる可能性に配慮する必要があります。</p>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p><code>var</code>をそれぞれの変数に対して打鍵する代わりに，複数の変数（必ずしも同一の型ではない）は同じ<code>var</code>ブロックで宣言することができます。Nimではブロックは，字下げ（最初の文字の前にある同数の空白文字）が同一であるコードの一部で，既定の字下げ幅は空白2文字です。このようなブロックはNimプログラムの随所に見られ，代入に限りません。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span>
  <span class="n">c</span> <span class="o">=</span> <span class="o">-</span><span class="mi">11</span>
  <span class="n">d</span> <span class="o">=</span> <span class="s">"Hello"</span>
  <span class="n">e</span> <span class="o">=</span> <span class="sc">'!'</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Nimではタブは字下げとして認められていません。<br>
コードエディタを設定して<code>Tab</code>を任意の数の空白文字に置き換えることができます。<br>
VS Codeでは既定は<code>Tab</code>を4つの空白文字に置き換えます。変更するには，設定（<code>Ctrl+,</code>）で<code>"editor.tabSize": 2</code>とします。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>前に述べたように変数は書き換え可能，つまり変数の値は何度でも変えることができますが，型は宣言したときと同一でなければなりません。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span> <span class="n">f</span> <span class="o">=</span> <span class="mi">7</span>           <i class="conum" data-value="1"></i><b>(1)</b>

<span class="n">f</span> <span class="o">=</span> <span class="o">-</span><span class="mi">3</span>              <i class="conum" data-value="2"></i><b>(2)</b>
<span class="n">f</span> <span class="o">=</span> <span class="mi">19</span>
<span class="n">f</span> <span class="o">=</span> <span class="s">"Hello"</span> <span class="c"># エラー </span><i class="conum" data-value="3"></i><b>(3)</b> <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>変数<code>f</code>は初期値<code>7</code>でその型は推定により``int`となります。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>f</code>の値はまず<code>-3</code>，次に<code>19</code>に変更されます。これらは両方とも整数で，元の型と同じです。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>f</code>の値を<code>"Hello"</code>に変更しようとすると， エラーが発生します。<code>Hello</code>は数値ではなくので，<code>f</code>の型を整数から文字列にしようとしています。
&lt;4&gt;<code># エラー</code>はコメントです。Nimコード中のコメントは文字<code>#</code>の後に書きます。これに続く全ての文字は行の終わりまで無視されます。</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_書き換え不可の代入">書き換え不可の代入</h2>
<div class="sectionbody">
<div class="paragraph">
<p>キーワード<code>var</code>を使って宣言された変数とは異なり，Nimにはあと2種類の代入があります。これらの値は変えることができません。一つはキーワード<code>const</code>，もう一つはキーワード<code>let</code>を使って宣言されます。</p>
</div>
<div class="sect2">
<h3 id="_const">Const</h3>
<div class="paragraph">
<p>キーワード<code>const</code>で宣言された書き換え不可な代入に用いられる値は，コンパイル時（プログラム実行前）に既知なければなりません。</p>
</div>
<div class="paragraph">
<p>例えば，重力加速度を<code>const g = 9.81</code>あるいは円周率を<code>const pi = 3.14</code>として宣言することができます。これらの値は事前に分かっていてプログラムの実行の間不変です。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">const</span> <span class="n">g</span> <span class="o">=</span> <span class="mi">35</span>
<span class="n">g</span> <span class="o">=</span> <span class="o">-</span><span class="mi">27</span>         <span class="c"># エラー </span><i class="conum" data-value="1"></i><b>(1)</b>

<span class="k">var</span> <span class="n">h</span> <span class="o">=</span> <span class="o">-</span><span class="mi">5</span>
<span class="k">const</span> <span class="n">i</span> <span class="o">=</span> <span class="n">h</span> <span class="o">+</span> <span class="mi">7</span> <span class="c"># エラー </span><i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>定数の値は変えられません。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>変数<code>h</code>はコンパイル時に評価されません（これは変数でその値はプログラムの実行中にかわりえます。）， 従って定数<code>i</code>の値はコンパイル時には知り得ないので，エラーが発生します。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>プログラミング言語によっては，定数の名前を``ALL_CAPS`のように全て大文字で書く習慣があります。Nimの定数は他の変数と同様に書きます。</p>
</div>
</div>
<div class="sect2">
<h3 id="_let">Let</h3>
<div class="paragraph">
<p><code>let</code>で宣言された書き換え不可の代入は，コンパイル時に既知である必要はなく，その値はプログラムの実行中いつでも設定できますが，ひとたび設定したら値を変えることはできません。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">35</span>
<span class="n">j</span> <span class="o">=</span> <span class="o">-</span><span class="mi">27</span> <span class="c"># エラー </span><i class="conum" data-value="1"></i><b>(1)</b>

<span class="k">var</span> <span class="n">k</span> <span class="o">=</span> <span class="o">-</span><span class="mi">5</span>
<span class="k">let</span> <span class="n">l</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="mi">7</span>   <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>書き換え不可の値は変更できません。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>const</code>の例とは対照的に，これは動作します。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>実際には，<code>let</code>は<code>const</code>よりも多く使われます。</p>
</div>
<div class="paragraph">
<p><code>var</code>を何にでも使うことはできますが，<code>let</code>を基本とすべきです。<code>var</code>は変更することになる変数のみに使いましょう。</p>
</div>
</div>
</div>
</div>
<h1 id="_基本データ型" class="sect0">基本データ型</h1>
<div class="sect1">
<h2 id="_整数">整数</h2>
<div class="sectionbody">
<div class="paragraph">
<p>前章で述べたように，整数は小数部や小数点がない数値です。</p>
</div>
<div class="paragraph">
<p>例えば<code>32</code>, <code>-174</code>, <code>0</code>, <code>10_000_000</code>は全て整数です。3桁毎の区切りに<code>_</code>を用いて大きな数値を見やすくしていることに注目してください（1千万を10_000_000と書いた方が10000000と書くより分かりやすくなります)。</p>
</div>
<div class="paragraph">
<p>通常の数学演算子，加算（<code>+</code>），減算（<code>-</code>），乗算（<code>*</code>），そして除算（<code>/</code>）は期待した通りに動作します。最初の三つの演算子は整数を生成しますが，二つの整数の除算は，余りがない場合でも常に浮動小数点数（小数点のある数値）が結果として与えられます。</p>
</div>
<div class="paragraph">
<p>整数の除算（小数部が無視される除算）には<code>div</code>演算子を使います。演算子<code>mod</code>（modulus，法）は整数の除算の余りを得たいときに用います。これらの演算の結果は常に整数です。</p>
</div>
<div class="listingblock">
<div class="title">integers.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">a</span> <span class="o">=</span> <span class="mi">11</span>
  <span class="n">b</span> <span class="o">=</span> <span class="mi">4</span>

<span class="n">echo</span> <span class="s">"a + b = "</span><span class="p">,</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="n">echo</span> <span class="s">"a - b = "</span><span class="p">,</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span>
<span class="n">echo</span> <span class="s">"a * b = "</span><span class="p">,</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span>
<span class="n">echo</span> <span class="s">"a / b = "</span><span class="p">,</span> <span class="n">a</span> <span class="o">/</span> <span class="n">b</span>
<span class="n">echo</span> <span class="s">"a div b = "</span><span class="p">,</span> <span class="n">a</span> <span class="ow">div</span> <span class="n">b</span>
<span class="n">echo</span> <span class="s">"a mod b = "</span><span class="p">,</span> <span class="n">a</span> <span class="ow">mod</span> <span class="n">b</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>echo</code>コマンドはそれに続くコンマで区切られたもの全てを画面に印字します。この場合，まず文字<code>a + b = </code>を印字し，続いて同じ行に式<code>a + b</code>の結果を印字します。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>コードをコンパイルして実行すると出力は次のようになるはずです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">a + b = 15
a - b = 7
a * b = 44
a / b = 2.75
a div b = 2
a mod b = 3</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_浮動小数点数">浮動小数点数</h2>
<div class="sectionbody">
<div class="paragraph">
<p>浮動小数点数（float）実数の<a href="https://en.wikipedia.org/wiki/Floating-point_arithmetic">近似表現</a>です。</p>
</div>
<div class="paragraph">
<p>例えば<code>2.73</code>, <code>-3.14</code>, <code>5.0</code>, <code>4e7</code>は浮動小数点数です。大きな浮動小数点数には科学的表記を用いることに注目してください。<code>e</code>の後の数値は指数です。この例では，<code>4e7</code>は<code>4 * 10^7</code>を表します。</p>
</div>
<div class="paragraph">
<p>二つの浮動小数点数に対して，四つの基本数学演算子を用いることができます。演算子<code>div</code>と<code>mod</code>は浮動小数点数に対しては定義されていません。</p>
</div>
<div class="listingblock">
<div class="title">floats.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">c</span> <span class="o">=</span> <span class="mf">6.75</span>
  <span class="n">d</span> <span class="o">=</span> <span class="mf">2.25</span>

<span class="n">echo</span> <span class="s">"c + d = "</span><span class="p">,</span> <span class="n">c</span> <span class="o">+</span> <span class="n">d</span>
<span class="n">echo</span> <span class="s">"c - d = "</span><span class="p">,</span> <span class="n">c</span> <span class="o">-</span> <span class="n">d</span>
<span class="n">echo</span> <span class="s">"c * d = "</span><span class="p">,</span> <span class="n">c</span> <span class="o">*</span> <span class="n">d</span>
<span class="n">echo</span> <span class="s">"c / d = "</span><span class="p">,</span> <span class="n">c</span> <span class="o">/</span> <span class="n">d</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">c + d = 9.0  <i class="conum" data-value="1"></i><b>(1)</b>
c - d = 4.5
c * d = 15.1875
c / d = 3.0  <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>加算と除算の例では，小数部がない数値が得られますが，結果は浮動小数点型であることに注意してください。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>数学演算の優先順位は期待通りです。乗算と除算は加算や減算よりも優先されます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="n">echo</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="mi">4</span>
<span class="n">echo</span> <span class="mi">24</span> <span class="o">-</span> <span class="mi">8</span> <span class="o">/</span> <span class="mi">4</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">14
22.0</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_浮動小数点数と整数の変換">浮動小数点数と整数の変換</h3>
<div class="paragraph">
<p>Nimでは異なる数値型の変数間の数学演算が許されておらず，エラーが発生します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">e</span> <span class="o">=</span> <span class="mi">5</span>
  <span class="n">f</span> <span class="o">=</span> <span class="mf">23.456</span>

<span class="n">echo</span> <span class="n">e</span> <span class="o">+</span> <span class="n">f</span>   <span class="c"># エラー</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>変数の値は同じ型に変換する必要があります。変換は簡単で整数への変換には<code>int</code>関数，浮動小数点数への変換には<code>float</code>関数を使います。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">e</span> <span class="o">=</span> <span class="mi">5</span>
  <span class="n">f</span> <span class="o">=</span> <span class="mf">23.987</span>

<span class="n">echo</span> <span class="kt">float</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>      <i class="conum" data-value="1"></i><b>(1)</b>
<span class="n">echo</span> <span class="kt">int</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>        <i class="conum" data-value="2"></i><b>(2)</b>

<span class="n">echo</span> <span class="kt">float</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="o">+</span> <span class="n">f</span>  <i class="conum" data-value="3"></i><b>(3)</b>
<span class="n">echo</span> <span class="n">e</span> <span class="o">+</span> <span class="kt">int</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>    <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>float</code>に変換した整数<code>e</code>を印字する（<code>e</code>は整数のまま）。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>int</code>に変換した浮動小数点数<code>f</code>を印字する。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>被演算子は共に浮動小数点数で加算可能。</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>被演算子は共に整数で加算可能。</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">5.0
23
28.987
28</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>int</code>関数を使って浮動小数点数を整数に変換するときに四捨五入は行われません。単に数値から小数部が落ちるだけです。<br>
四捨五入をするには別の関数を持ちなければなりませんが，それにはNimの使い方をもっと勉強する必要があります。
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_文字">文字</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>char</code>型は単一の<a href="https://en.wikipedia.org/wiki/ASCII">ASCII</a>文字を表すために用いられます。</p>
</div>
<div class="paragraph">
<p>文字は二つの一重引用符（<code>'</code>）の間に書きます。文字はアルファベット，記号または数字です。複数の数字や文字はエラーになります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">h</span> <span class="o">=</span> <span class="sc">'z'</span>
  <span class="n">i</span> <span class="o">=</span> <span class="sc">'+'</span>
  <span class="n">j</span> <span class="o">=</span> <span class="sc">'2'</span>
  <span class="n">k</span> <span class="o">=</span> <span class="sc">'35'</span> <span class="c"># エラー</span>
  <span class="n">l</span> <span class="o">=</span> <span class="sc">'xy'</span> <span class="c"># エラー</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_文字列">文字列</h2>
<div class="sectionbody">
<div class="paragraph">
<p>文字列は文字が並んだものです。文字列の中身は二つの二重引用符 （<code>"</code>）の間に書きます。</p>
</div>
<div class="paragraph">
<p>文字列というと単語を思い浮かべますが，複数の単語や記号，数字を含むことができます。</p>
</div>
<div class="listingblock">
<div class="title">strings.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">m</span> <span class="o">=</span> <span class="s">"word"</span>
  <span class="n">n</span> <span class="o">=</span> <span class="s">"A sentence with interpunction."</span>
  <span class="n">o</span> <span class="o">=</span> <span class="s">""</span>    <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="n">p</span> <span class="o">=</span> <span class="s">"32"</span>  <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="n">q</span> <span class="o">=</span> <span class="s">"!"</span>   <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>空の文字列。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>これは数値（int）ではありません。二重引用符で囲まれているので，文字列になります。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>これは一つの文字ですが，二重引用符に囲まれているのでcharではありません。</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_特殊文字">特殊文字</h3>
<div class="paragraph">
<p>次の文字列を印字すると</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="n">echo</span> <span class="s">"some</span><span class="se">\n</span><span class="s">im</span><span class="se">\t</span><span class="s">ips"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>意外な結果になります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">some
im	ips</code></pre>
</div>
</div>
<div class="paragraph">
<p>このようになったのは，いくつかの文字には特別の意味があるからです。これらはエスケープ<code>\</code>を前につけて用います。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>\n</code>は改行です。</p>
</li>
<li>
<p><code>\t</code>はタブです。</p>
</li>
<li>
<p><code>\\</code>はバックスラッシュです（<code>\</code>はエスケープとして用いるため）。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>上の例を文字通り印字するには，二つの方法があります。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>\\</code>を<code>\</code>の代わりに使うか，</p>
</li>
<li>
<p>未加工（raw）文字列を使います。構文は<code>r"&#8230;&#8203;"</code>で （文字<code>r</code>を最初の引用符の前に置きます。）
）エスケープ文字が存在せず特別な意味もなく，全てがそのまま印字されます。</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="n">echo</span> <span class="s">"some</span><span class="se">\\</span><span class="s">nim</span><span class="se">\\</span><span class="s">tips"</span>
<span class="n">echo</span> <span class="s">r"some\nim\tips"</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">some\nim\tips
some\nim\tips</code></pre>
</div>
</div>
<div class="paragraph">
<p>上に示したもの以外にも特殊文字があり，<a href="https://nim-lang.org/docs/manual.html#lexical-analysis-string-literals">Nim manual</a>に示されています。</p>
</div>
</div>
<div class="sect2">
<h3 id="_文字列の結合">文字列の結合</h3>
<div class="paragraph">
<p>Nimの文字列は書き換え可能で，中身は変わり得ます。<code>add</code>関数で既存の文字列に別の文字列や文字を加える（付け足す）ことができます。元の文字列を変更したくないときは，文字列を<code>&amp;</code>演算子で結合する（つなげる）と新しい文字列が返されます。</p>
</div>
<div class="listingblock">
<div class="title">stringConcat.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span>                     <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="n">p</span> <span class="o">=</span> <span class="s">"abc"</span>
  <span class="n">q</span> <span class="o">=</span> <span class="s">"xy"</span>
  <span class="n">r</span> <span class="o">=</span> <span class="sc">'z'</span>

<span class="n">p</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="s">"def"</span><span class="p">)</span>            <i class="conum" data-value="2"></i><b>(2)</b>
<span class="n">echo</span> <span class="s">"p is now: "</span><span class="p">,</span> <span class="n">p</span>

<span class="n">q</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>                <i class="conum" data-value="3"></i><b>(3)</b>
<span class="n">echo</span> <span class="s">"q is now: "</span><span class="p">,</span> <span class="n">q</span>

<span class="n">echo</span> <span class="s">"concat: "</span><span class="p">,</span> <span class="n">p</span> <span class="o">&amp;</span> <span class="n">q</span>  <i class="conum" data-value="4"></i><b>(4)</b>

<span class="n">echo</span> <span class="s">"p is still: "</span><span class="p">,</span> <span class="n">p</span>
<span class="n">echo</span> <span class="s">"q is still: "</span><span class="p">,</span> <span class="n">q</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>文字列を変更する場合は<code>var</code>として宣言します。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>既存の文字列<code>p</code>に別の文字列を加えると，その文字列の値が変更されます。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>文字列に<code>char</code>を加えることもできます。</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>二つの文字列を連結すると，元の文字列を変更せずに新しい文字列ができます。</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">p is now: abcdef
q is now: xyz
concat: abcdefxyz
p is still: abcdef
q is still: xyz</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_真偽">真偽</h2>
<div class="sectionbody">
<div class="paragraph">
<p>真偽（またはブール，<code>bool</code>）データ型は二つの値<code>true</code>か<code>false</code>のどちらかです。ブール型は通常制御の流れ（<a href="#_流れの制御">次章</a>参照）に用いられ，通常関係演算子の結果です。</p>
</div>
<div class="paragraph">
<p>ブール変数に通常用いられる名前の付け方は，はい/いいえ（真/偽）の質問，例えば
<code>isEmpty</code>, <code>isFinished</code>, <code>isMoving</code>として表すというものです。</p>
</div>
<div class="sect2">
<h3 id="_関係演算子">関係演算子</h3>
<div class="paragraph">
<p>関係演算子は，比較可能な二つの事柄の関係を試すものです。</p>
</div>
<div class="paragraph">
<p>二つの値はが等値かどうか比較するには<code>==</code>（二つの等号）が用いられます。これを以前に示した代入に用いられる<code>=</code>と混同しないようにしてください。</p>
</div>
<div class="paragraph">
<p>整数に対して定義されている全ての関係演算子を示します。</p>
</div>
<div class="listingblock">
<div class="title">relationalOperators.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">g</span> <span class="o">=</span> <span class="mi">31</span>
  <span class="n">h</span> <span class="o">=</span> <span class="mi">99</span>

<span class="n">echo</span> <span class="s">"g is greater than h: "</span><span class="p">,</span> <span class="n">g</span> <span class="o">&gt;</span> <span class="n">h</span>
<span class="n">echo</span> <span class="s">"g is smaller than h: "</span><span class="p">,</span> <span class="n">g</span> <span class="o">&lt;</span> <span class="n">h</span>
<span class="n">echo</span> <span class="s">"g is equal to h: "</span><span class="p">,</span> <span class="n">g</span> <span class="o">==</span> <span class="n">h</span>
<span class="n">echo</span> <span class="s">"g is not equal to h: "</span><span class="p">,</span> <span class="n">g</span> <span class="o">!=</span> <span class="n">h</span>
<span class="n">echo</span> <span class="s">"g is greater or equal to h: "</span><span class="p">,</span> <span class="n">g</span> <span class="o">&gt;=</span> <span class="n">h</span>
<span class="n">echo</span> <span class="s">"g is smaller or equal to h: "</span><span class="p">,</span> <span class="n">g</span> <span class="o">&lt;=</span> <span class="n">h</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">g is greater than h: false
g is smaller than h: true
g is equal to h: false
g is not equal to h: true
g is greater or equal to h: false
g is smaller or equal to h: true</code></pre>
</div>
</div>
<div class="paragraph">
<p>文字や文字列を比較することもできます。</p>
</div>
<div class="listingblock">
<div class="title">relationalOperators.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">i</span> <span class="o">=</span> <span class="sc">'a'</span>
  <span class="n">j</span> <span class="o">=</span> <span class="sc">'d'</span>
  <span class="n">k</span> <span class="o">=</span> <span class="sc">'Z'</span>

<span class="n">echo</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">j</span>
<span class="n">echo</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">k</span>  <i class="conum" data-value="1"></i><b>(1)</b>

<span class="k">let</span>
  <span class="n">m</span> <span class="o">=</span> <span class="s">"axyb"</span>
  <span class="n">n</span> <span class="o">=</span> <span class="s">"axyz"</span>
  <span class="n">o</span> <span class="o">=</span> <span class="s">"ba"</span>
  <span class="n">p</span> <span class="o">=</span> <span class="s">"ba "</span>

<span class="n">echo</span> <span class="n">m</span> <span class="o">&lt;</span> <span class="n">n</span>  <i class="conum" data-value="2"></i><b>(2)</b>
<span class="n">echo</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="n">o</span>  <i class="conum" data-value="3"></i><b>(3)</b>
<span class="n">echo</span> <span class="n">o</span> <span class="o">&lt;</span> <span class="n">p</span>  <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>全ての大文字は小文字より前。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>文字列の比較は文字毎に行われます。最初の三つの文字は同一で，文字<code>b</code>は文字<code>z</code>よりも小さい。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>文字が同一でなければ，文字列の長さは比較されません。</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>短い文字列は長い文字列よりも小さい。</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">true
false
true
true
true</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_論理演算子">論理演算子</h3>
<div class="paragraph">
<p>論理演算子は一つまたはそれ以上の真偽値からなる式が真であるか試すために用いられます。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>論理<code>and</code>が<code>true</code>を返すのは，両方とも<code>true</code>の場合のみ。</p>
</li>
<li>
<p>論理<code>or</code>が<code>true</code>を返すのは，少なくともどちらか一方が<code>true</code>のとき。</p>
</li>
<li>
<p>論理<code>xor</code>が<code>true</code>となるのは一方が真で他方がそうではないとき。</p>
</li>
<li>
<p>論理<code>not</code>は真偽を反転させます。つまり<code>true</code>`を<code>false</code>にまたはその逆（一つの被演算子をとる唯一の論理演算子）</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">logicalOperators.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="n">echo</span> <span class="s">"T and T: "</span><span class="p">,</span> <span class="kp">true</span> <span class="ow">and</span> <span class="kp">true</span>
<span class="n">echo</span> <span class="s">"T and F: "</span><span class="p">,</span> <span class="kp">true</span> <span class="ow">and</span> <span class="kp">false</span>
<span class="n">echo</span> <span class="s">"F and F: "</span><span class="p">,</span> <span class="kp">false</span> <span class="ow">and</span> <span class="kp">false</span>
<span class="n">echo</span> <span class="s">"---"</span>
<span class="n">echo</span> <span class="s">"T or T: "</span><span class="p">,</span> <span class="kp">true</span> <span class="ow">or</span> <span class="kp">true</span>
<span class="n">echo</span> <span class="s">"T or F: "</span><span class="p">,</span> <span class="kp">true</span> <span class="ow">or</span> <span class="kp">false</span>
<span class="n">echo</span> <span class="s">"F or F: "</span><span class="p">,</span> <span class="kp">false</span> <span class="ow">or</span> <span class="kp">false</span>
<span class="n">echo</span> <span class="s">"---"</span>
<span class="n">echo</span> <span class="s">"T xor T: "</span><span class="p">,</span> <span class="kp">true</span> <span class="ow">xor</span> <span class="kp">true</span>
<span class="n">echo</span> <span class="s">"T xor F: "</span><span class="p">,</span> <span class="kp">true</span> <span class="ow">xor</span> <span class="kp">false</span>
<span class="n">echo</span> <span class="s">"F xor F: "</span><span class="p">,</span> <span class="kp">false</span> <span class="ow">xor</span> <span class="kp">false</span>
<span class="n">echo</span> <span class="s">"---"</span>
<span class="n">echo</span> <span class="s">"not T: "</span><span class="p">,</span> <span class="ow">not</span> <span class="kp">true</span>
<span class="n">echo</span> <span class="s">"not F: "</span><span class="p">,</span> <span class="ow">not</span> <span class="kp">false</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">T and T: true
T and F: false
F and F: false
---
T or T: true
T or F: true
F or F: false
---
T xor T: false
T xor F: true
F xor F: false
---
not T: false
not F: true</code></pre>
</div>
</div>
<div class="paragraph">
<p>関係演算子と論理演算子を組み合わせて，より複雑な式を作ることができます。</p>
</div>
<div class="paragraph">
<p>例えば，<code>(5 &lt; 7) and (11 + 9 == 32 - 2*6)</code>は<code>true and (20 == 20)</code>となり，<code>true and true</code>なるので，最終結果は<code>true</code>となります。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_まとめ">まとめ</h2>
<div class="sectionbody">
<div class="paragraph">
<p>この章はチュートリアルの中で最長でたくさんの範囲を扱いました。時間をとって各データ型を復習し，それぞれ何ができるか試してみてください。</p>
</div>
<div class="paragraph">
<p>型は一見制約のように見えますが，Nimコンパイラがコードを速く，偶発的におかしな動作をしないように確かめることを可能にするものです。これは大きなコードベースで役に立ちます。</p>
</div>
<div class="paragraph">
<p>基本型といくつかの演算を学んだので，Nimで簡単な計算ができます。知識を次の練習問題で試してみましょう。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_練習問題">練習問題</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>書き換え不可の変数を作り，あなたの年齢（年）を格納してください。年齢を日数で印字してください（1年は365日とします）。</p>
</li>
<li>
<p>あなたの年齢が3で割り切れるか試してください。（ヒント: <code>mod</code>を使います。）</p>
</li>
<li>
<p>書き換え不可の変数を作り，あなたの身長をセンチメートルで格納してください。身長をインチで印字してください（1インチは2.54センチ）。</p>
</li>
<li>
<p>管の直径が3/8インチです。直径をセンチメートルで表してください。</p>
</li>
<li>
<p>書き換え不可の変数を二つ作り，あなたの姓と名を格納してください。変数<code>fullName</code>を二つの変数を連結して作ってください。姓と名の間には空白文字を入れてください。あなたのフルネームを印字してください。</p>
</li>
<li>
<p>アリスは$400を15日間毎に稼ぎます。ボブは1時間あたり$3.14稼ぎ，1日に8時間，週7日働いています。30日後，アリスはボブよりも稼いでいるでしょうか（ヒント: 関係演算子を使います）。</p>
</li>
</ol>
</div>
</div>
</div>
<h1 id="_流れの制御" class="sect0">流れの制御</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>これまでのプログラムは全ての行が必ず実行されていました。流れを制御する文を使うと，コードの一部がある真偽条件が成り立つ場合にのみ実行させるようにすることができます。</p>
</div>
<div class="paragraph">
<p>プログラムを道路に例えるならば，流れの制御は分かれ道であり，その一つを条件により選択します。例）もし（<em>if</em>）卵がある値段以下なら買う。もし（<em>if</em>）雨が降っていれば傘を持っていく，さもなくば（<em>else</em>）サングラスを持っていく。</p>
</div>
<div class="paragraph">
<p><a href="https://en.wikipedia.org/wiki/Pseudocode">擬似コード</a>で書くと次のようになります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">if</span> <span class="n">eggPrice</span> <span class="o">&lt;</span> <span class="n">wantedPrice</span><span class="p">:</span>
  <span class="n">buyEggs</span>

<span class="k">if</span> <span class="n">isRaining</span><span class="p">:</span>
  <span class="n">bring</span> <span class="n">umbrella</span>
<span class="k">else</span><span class="p">:</span>
  <span class="n">bring</span> <span class="n">sunglasses</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Nimの文法は，以下に示すようによく似ています。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_if文">If文</h2>
<div class="sectionbody">
<div class="paragraph">
<p>上に示したif文はプログラムの中で最も簡単な分岐です。</p>
</div>
<div class="paragraph">
<p>Nimの文法でif文は以下のように書きます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">if</span> <span class="o">&lt;</span><span class="n">condition</span><span class="o">&gt;</span><span class="p">:</span>     <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="o">&lt;</span><span class="n">indented</span> <span class="k">block</span><span class="o">&gt;</span>  <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>condition</code>は真偽型でなくてはなりません。真偽値または関係演算子，論理式やその組合せ。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>if</code>の行に続く全ての行は二つの空白文字で字下げし，同じブロックとして条件が<code>true</code>のときにのみ実行されます。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If文は入れ子にできます。すなわち，一つのifブロックの内側に別のif文を入れることができます。</p>
</div>
<div class="listingblock">
<div class="title">if.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">a</span> <span class="o">=</span> <span class="mi">11</span>
  <span class="n">b</span> <span class="o">=</span> <span class="mi">22</span>
  <span class="n">c</span> <span class="o">=</span> <span class="mi">999</span>

<span class="k">if</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"a is smaller than b"</span>
  <span class="k">if</span> <span class="mi">10</span><span class="o">*</span><span class="n">a</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">:</span>  <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="n">echo</span> <span class="s">"not only that, a is *much* smaller than b"</span>

<span class="k">if</span> <span class="n">b</span> <span class="o">&lt;</span> <span class="n">c</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"b is smaller than c"</span>
  <span class="k">if</span> <span class="mi">10</span><span class="o">*</span><span class="n">b</span> <span class="o">&lt;</span> <span class="n">c</span><span class="p">:</span>  <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="n">echo</span> <span class="s">"not only that, b is *much* smaller than c"</span>

<span class="k">if</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span> <span class="o">&gt;</span> <span class="n">c</span><span class="p">:</span>     <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="n">echo</span> <span class="s">"a and b are larger than c"</span>
  <span class="k">if</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="mi">100</span> <span class="ow">and</span> <span class="mi">321</span> <span class="o">&gt;</span> <span class="mi">123</span><span class="p">:</span>  <i class="conum" data-value="4"></i><b>(4)</b>
    <span class="n">echo</span> <span class="s">"did you know that 1 is smaller than 100?"</span>
    <span class="n">echo</span> <span class="s">"and 321 is larger than 123! wow!"</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>最初の条件が真で二番目が偽なので中<code>echo</code>は実行されません。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>二つの条件が真で両方の行が印字されます。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>最初の条件が偽なので，このブロックの内側の全ての行は無視され，何も印字されません。</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>if</code>文の内側の論理<code>and</code>。</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">a is smaller than b
b is smaller than c
not only that, b is *much* smaller than c</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_else">Else</h3>
<div class="paragraph">
<p>Ifブロックの後に続くelseを使うと，if文の条件が偽であるときに実行される分岐を作ることができます。</p>
</div>
<div class="listingblock">
<div class="title">else.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">d</span> <span class="o">=</span> <span class="mi">63</span>
  <span class="n">e</span> <span class="o">=</span> <span class="mf">2.718</span>

<span class="k">if</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"d is a small number"</span>
<span class="k">else</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"d is a large number"</span>

<span class="k">if</span> <span class="n">e</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"e is a small number"</span>
<span class="k">else</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"e is a large number"</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">d is a large number
e is a small number</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If文が<code>false</code>のときだけブロックを実行するには，<code>not</code>演算子を使って条件を否定します。
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_elif">Elif</h3>
<div class="paragraph">
<p>Elifは"else if"の短縮形で，複数のif文をつなげることができます。</p>
</div>
<div class="paragraph">
<p>プログラムは真となるまで文を試します。その後の全ての文は無視されます。</p>
</div>
<div class="listingblock">
<div class="title">elif.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">f</span> <span class="o">=</span> <span class="mi">3456</span>
  <span class="n">g</span> <span class="o">=</span> <span class="mi">7</span>

<span class="k">if</span> <span class="n">f</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"f is smaller than 10"</span>
<span class="k">elif</span> <span class="n">f</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"f is between 10 and 100"</span>
<span class="k">elif</span> <span class="n">f</span> <span class="o">&lt;</span> <span class="mi">1000</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"f is between 100 and 1000"</span>
<span class="k">else</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"f is larger than 1000"</span>

<span class="k">if</span> <span class="n">g</span> <span class="o">&lt;</span> <span class="mi">1000</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"g is smaller than 1000"</span>
<span class="k">elif</span> <span class="n">g</span> <span class="o">&lt;</span> <span class="mi">100</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"g is smaller than 100"</span>
<span class="k">elif</span> <span class="n">g</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"g is smaller than 10"</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">f is larger than 1000
g is smaller than 1000</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>g</code>の場合<code>g</code>は三つの条件全てを満たしますが，最初の分岐だけが実行され，後の全ての分岐は実行が省略されます。
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_case">Case</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Case文は複数の可能性から一つを選択する別の方法で，複数の<code>elif</code>のあるif文に似ています。<code>case</code>文は複数の真偽条件を取らず，異なる値とそれに分岐を対応させます。</p>
</div>
<div class="paragraph">
<p>次のようなif-elifブロックで書かれたコードは</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"Five!"</span>
<span class="k">elif</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">7</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"Seven!"</span>
<span class="k">elif</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">10</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"Ten!"</span>
<span class="k">else</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"unknown number"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>はcase文で次のように書けます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">case</span> <span class="n">x</span>
<span class="k">of</span> <span class="mi">5</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"Five!"</span>
<span class="k">of</span> <span class="mi">7</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"Seven!"</span>
<span class="k">of</span> <span class="mi">10</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"Ten!"</span>
<span class="k">else</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"unknown number"</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If文とは異なり，case文はとりうる<em>全て</em>の場合を包含しなくてはなりません。該当しない場合があるときは<code>else: discard</code>を使うことができます。</p>
</div>
<div class="listingblock">
<div class="title">case.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span> <span class="n">h</span> <span class="o">=</span> <span class="sc">'y'</span>

<span class="k">case</span> <span class="n">h</span>
<span class="k">of</span> <span class="sc">'x'</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"You've chosen x"</span>
<span class="k">of</span> <span class="sc">'y'</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"You've chosen y"</span>
<span class="k">of</span> <span class="sc">'z'</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"You've chosen z"</span>
<span class="k">else</span><span class="p">:</span> <span class="k">discard</span>  <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>必要のなのは<code>h</code>の三つの値だけですが，とりうる全ての場合（他の全ての文字）を含めるためにこの行が必要です。これがないとコンパイルが通りません。</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">You've chosen y</code></pre>
</div>
</div>
<div class="paragraph">
<p>複数の値に対して同じ動作をさせる場合は，それぞれの分岐に対して複数の値を割り当てることもできます。</p>
</div>
<div class="listingblock">
<div class="title">multipleCase.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">7</span>

<span class="k">case</span> <span class="n">i</span>
  <span class="k">of</span> <span class="mi">0</span><span class="p">:</span>
    <span class="n">echo</span> <span class="s">"i is zero"</span>
  <span class="k">of</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">:</span>
    <span class="n">echo</span> <span class="s">"i is odd"</span>
  <span class="k">of</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">:</span>
    <span class="n">echo</span> <span class="s">"i is even"</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="n">echo</span> <span class="s">"i is too large"</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">i is odd</code></pre>
</div>
</div>
</div>
</div>
<h1 id="_繰り返し" class="sect0">繰り返し</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>繰り返し（ループ）は，もう一つの流れの制御構造でコードの一部を複数回実行することを可能にするものです。</p>
</div>
<div class="paragraph">
<p>この章では二種類のループを学びます。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>forループ: 決まった回数の繰り返し</p>
</li>
<li>
<p>whileループ: 条件が満たされる間繰り返し</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_forループ">Forループ</h2>
<div class="sectionbody">
<div class="paragraph">
<p>forループの構文は</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">for</span> <span class="o">&lt;</span><span class="n">loopVariable</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">iterable</span><span class="o">&gt;</span><span class="p">:</span>
  <span class="o">&lt;</span><span class="n">loop</span> <span class="n">body</span><span class="o">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>伝統的に<code>i</code>がループ変数<code>loopVariable</code>の名前として使われていますが，なんでも構いません。この変数はループの内側だけで使えます。ループが終わった後は，ループ変数は破棄されます。</p>
</div>
<div class="paragraph">
<p><code>iterable</code>は反復可能なオブジェクトです。これまでに述べた方のうち，文字列は反復可能オブジェクトです（いろいろな反復可能な型は<a href="#_コンテナ">次章</a>に登場します）。</p>
</div>
<div class="paragraph">
<p><code>loop body</code>の全ての行は反復の度に実行されるため，コードの繰り返される部分を効率的に書くことができます。</p>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p>Nimで（整数型）数値の範囲にわたって反復したいときは，<code>iterable</code>の構文は <code>start .. finish</code>で<code>start</code>と<code>finish</code>は数値です。このように書くと，<code>start</code>と<code>finish</code>の間の数値を<code>finish</code>を含めて反復します。既定の反復可能な範囲では，<code>start</code>は<code>finish</code>よりも小さくなくてはなりません。</p>
</div>
<div class="paragraph">
<p>ある数値の手前まで（その数値を含まない）反復では<code>..&lt;</code>を使います。</p>
</div>
<div class="listingblock">
<div class="title">for1.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="mi">5</span> <span class="p">..</span> <span class="mi">9</span><span class="p">:</span>  <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="n">echo</span> <span class="n">n</span>

<span class="n">echo</span> <span class="s">""</span>

<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="mi">5</span> <span class="p">..</span><span class="o">&lt;</span> <span class="mi">9</span><span class="p">:</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="n">echo</span> <span class="n">n</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>反復を<code>..</code>を使って行う場合，範囲の始端・終端の両方が含まれます。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>同じ範囲の反復を<code>..&lt;</code>を使って行うと，終端の手前までで終端は含まれません。</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">5
6
7
8
9

5
6
7
8</code></pre>
</div>
</div>
<div class="paragraph">
<p>1でない刻み幅を用いて数値の範囲について反復する場合，<code>countup</code>が用いられます。<code>countup</code>には，開始値，終了値（範囲に含まれる）と刻み幅を指定します。</p>
</div>
<div class="listingblock">
<div class="title">for2.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">countup</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">4</span><span class="p">):</span>  <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="n">echo</span> <span class="n">n</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>0から16まで刻み幅4で小さい方から大きい方に数えます。終端（16）は範囲に含まれます。</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">0
4
8
12
16</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>start</code>が<code>finish</code>より大きい数値の範囲にわたって反復するときは，<code>countdown</code>と呼ばれる類似の関数を使います。大きい方から小さい方に数えているにも関わらず，刻み幅は正です。</p>
</div>
<div class="listingblock">
<div class="title">for2.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">countdown</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>       <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="n">echo</span> <span class="n">n</span>

<span class="n">echo</span> <span class="s">""</span>

<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">countdown</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span>  <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="n">echo</span> <span class="n">n</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>大きい数値から小さい数値に向かって反復するには<code>countdown</code>を使わなければなりません。（<code>..</code>演算子は開始する数値が終了する数値よりも小さい場合にのみ使えます。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>大きい方から小さい方に数えるにも関わらず，刻み幅は正なくてはなりません。</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">4
3
2
1
0

-3
-5
-7
-9</code></pre>
</div>
</div>
<div class="paragraph">
<p>文字列は反復可能なので，forループを使って文字列に含まれる文字を一つづつ反復していくことができます（この手の反復は<em>for-each</em>ループとも呼ばれます）。</p>
</div>
<div class="listingblock">
<div class="title">for3.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span> <span class="n">word</span> <span class="o">=</span> <span class="s">"alphabet"</span>

<span class="k">for</span> <span class="n">letter</span> <span class="ow">in</span> <span class="n">word</span><span class="p">:</span>
  <span class="n">echo</span> <span class="n">letter</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">a
l
p
h
a
b
e
t</code></pre>
</div>
</div>
<div class="paragraph">
<p>反復カウンタ（0始まり）も必要な場合は，<code>for &lt;counterVariable&gt;, &lt;loopVariable&gt; in &lt;iterator&gt;:</code>という構文が使えます。これは，ある反復可能オブジェクトについて反復し，同時に別の反復可能オブジェクトの同じ位置の値を使うときに便利です。</p>
</div>
<div class="listingblock">
<div class="title">for3.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">letter</span> <span class="ow">in</span> <span class="n">word</span><span class="p">:</span>
  <span class="n">echo</span> <span class="s">"letter "</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="s">" is: "</span><span class="p">,</span> <span class="n">letter</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">letter 0 is: a
letter 1 is: l
letter 2 is: p
letter 3 is: h
letter 4 is: a
letter 5 is: b
letter 6 is: e
letter 7 is: t</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_whileループ">Whileループ</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Whileループはif文に似ていますが，コードのブロックを条件が真の間実行し続けます。これはループが何回実行されるか事前に分からないときに使われます。</p>
</div>
<div class="paragraph">
<p>ループがある時点で必ず終了するようにして，<a href="https://en.wikipedia.org/wiki/Infinite_loop">無限ループ</a>にならないようにします。</p>
</div>
<div class="listingblock">
<div class="title">while.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>

<span class="k">while</span> <span class="n">a</span><span class="o">*</span><span class="n">a</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="n">echo</span> <span class="s">"a is: "</span><span class="p">,</span> <span class="n">a</span>
  <span class="n">inc</span> <span class="n">a</span>         <i class="conum" data-value="2"></i><b>(2)</b>

<span class="n">echo</span> <span class="s">"final value of a: "</span><span class="p">,</span> <span class="n">a</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>この条件は新しいループに入る度に検査され，内側のコードが実行されます。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>inc</code>は<code>a</code>を一つ増やします。<code>a = a + 1</code>または<code>a += 1</code>と書くのと同じです。</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">a is: 1
a is: 2
a is: 3
final value of a: 4</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_breakとcontinue">Breakとcontinue</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>Break</code>文は通常ある条件が満たされた場合に先にループから出るために使います。</p>
</div>
<div class="paragraph">
<p>次の例では，<code>break</code>文を伴うif文がなければ，<code>i</code>が1000になるまで印字が継続します。<code>break</code>分があると，<code>i</code>が3になると（値を印字する前に）直ちにループを出ます</p>
</div>
<div class="listingblock">
<div class="title">break.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>

<span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">1000</span><span class="p">:</span>
  <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
    <span class="k">break</span>
  <span class="n">echo</span> <span class="n">i</span>
  <span class="n">inc</span> <span class="n">i</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">1
2</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p><code>continue</code>文は直ちにループの次の反復を実行し，現在の反復の残り行は実行されません。次のコードで3と6が出力にないことに注意してください。</p>
</div>
<div class="listingblock">
<div class="title">continue.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="mi">1</span> <span class="p">..</span> <span class="mi">8</span><span class="p">:</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">3</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">6</span><span class="p">):</span>
    <span class="k">continue</span>
  <span class="n">echo</span> <span class="n">i</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">1
2
4
5
7
8</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_練習問題_2">練習問題</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://en.wikipedia.org/wiki/Collatz_conjecture">コラッツ予想</a>は有名な数学の問題で，ルールは単純です。まず数値を選びます。奇数なら3を加えて1を足します。もし偶数なら2で割ります。この手順を1になるまで続けます。例。5 &#8594; 奇数 &#8594; 3*5 + 1 = 16 &#8594; 偶数 &#8594; 16 / 2 = 8 &#8594; 偶数 &#8594; 4 &#8594; 2 &#8594; 1 &#8594; 終了!<br>
整数を（書き換え可能な変数として）選びコラッツ予想の各ステップを印字するプログラムを書いてください。（ヒント。<code>div</code>を割り算に使います。）</p>
</li>
<li>
<p>書き換え不可の変数を作り，フルネームを格納します。Forループ書いて文字列を要素について反復し母音（a, e, i, o u）だけ印字してください（ヒント。<code>case</code>文を使って分岐毎に複数の値します。</p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Fizz_buzz">Fizz buzz</a>は子供の遊びで基本的なプログラミングの知識を試すためにも使われます。数は1から増える方向に数えます。数値が3の倍数なら <em>fizz</em>，5の倍数なら_buzz_で置き換え，もし数値が15（3と5両方）なら_fizzbuzz_で置き換えます。最初の数回は次のようになります。1, 2, fizz, 4, buzz, fizz, 7, &#8230;&#8203;<br>
Fizz buzzの最初の30回を印字するプログラムを書いてください（ヒント。除算の順序のテストに注意してください。</p>
</li>
<li>
<p>前の問題でインチをセンチメートルにまたはその逆に変換しました。複数の値の変換表を作ってください。表の例を示します。<br></p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="ow">in</span>	<span class="o">|</span> <span class="n">cm</span>
<span class="o">----------------</span>
<span class="mi">1</span>	<span class="o">|</span> <span class="mf">2.54</span>
<span class="mi">4</span>	<span class="o">|</span> <span class="mf">10.16</span>
<span class="mi">7</span>	<span class="o">|</span> <span class="mf">17.78</span>
<span class="mi">10</span>	<span class="o">|</span> <span class="mf">25.4</span>
<span class="mi">13</span>	<span class="o">|</span> <span class="mf">33.02</span>
<span class="mi">16</span>	<span class="o">|</span> <span class="mf">40.64</span>
<span class="mi">19</span>	<span class="o">|</span> <span class="mf">48.26</span></code></pre>
</div>
</div>
</div>
</div>
<h1 id="_コンテナ" class="sect0">コンテナ</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>コンテナは個々の要素の集まりを格納する型で，要素に対するアクセスができます。通常コンテナは反復可能で，<a href="#_繰り返し">繰り返しの章</a>での文字列と同じように使うことができます。</p>
</div>
<div class="paragraph">
<p>例えば，日用品のリストは買いたい品目のコンテナで，素数のリストは数のコンテナです。擬似コードでは次のようになります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="n">groceryList</span> <span class="o">=</span> <span class="o">[</span><span class="n">ham</span><span class="p">,</span> <span class="n">eggs</span><span class="p">,</span> <span class="n">bread</span><span class="p">,</span> <span class="n">apples</span><span class="o">]</span>
<span class="n">primes</span> <span class="o">=</span> <span class="o">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="o">]</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_配列">配列</h2>
<div class="sectionbody">
<div class="paragraph">
<p>配列は最も単純なコンテナ型です。配列は一様，すなわち配列内の全ての要素が同じ型です。配列の長さは一定，つまり要素の数（正確には要素の最大の数）はコンパイル時に既知でなくてはなりません。したがって，配列を「長さが一定の一様コンテナ」と呼ぶことができます。</p>
</div>
<div class="paragraph">
<p>配列の宣言は<code>array[&lt;length&gt;, &lt;type&gt;]</code>とします。ここで<code>length</code>は配列全体の大きさ（収容可能な要素の数）<code>type</code>は配列全ての要素の型です。宣言を省略できるのは，長さと型が共に渡された要素から推定できるときです。</p>
</div>
<div class="paragraph">
<p>配列の要素は角括弧で囲みます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span>
  <span class="n">a</span><span class="p">:</span> <span class="kt">array</span><span class="o">[</span><span class="mi">3</span><span class="p">,</span> <span class="kt">int</span><span class="o">]</span> <span class="o">=</span> <span class="o">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="o">]</span>
  <span class="n">b</span> <span class="o">=</span> <span class="o">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="o">]</span>        <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="n">c</span> <span class="o">=</span> <span class="o">[]</span>  <span class="c"># error      </span><i class="conum" data-value="2"></i><b>(2)</b>
  <span class="n">d</span><span class="p">:</span> <span class="kt">array</span><span class="o">[</span><span class="mi">7</span><span class="p">,</span> <span class="kt">string</span><span class="o">]</span>  <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>値を与えると，<code>b</code>の長さと型はコンパイル時に既知です。配列<code>a</code>のように具体的に宣言することは正しいのですが，その必要はありません。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>この宣言では長さも型も推定できないので，エラーとなります。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>空の（後で要素を満たす）配列を宣言する正しい方法は長さと型を与え，要素の値を与えません。配列<code>d</code>は七つの文字列を可能できます。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>配列の長さはコンパイル時に既知でなければならないので，次は動作しません。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">const</span> <span class="n">m</span> <span class="o">=</span> <span class="mi">3</span>
<span class="k">let</span> <span class="n">n</span> <span class="o">=</span> <span class="mi">5</span>

<span class="k">var</span> <span class="n">a</span><span class="p">:</span> <span class="kt">array</span><span class="o">[</span><span class="n">m</span><span class="p">,</span> <span class="kt">char</span><span class="o">]</span>
<span class="k">var</span> <span class="n">b</span><span class="p">:</span> <span class="kt">array</span><span class="o">[</span><span class="n">n</span><span class="p">,</span> <span class="kt">char</span><span class="o">]</span> <span class="c"># error </span><i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>これがエラーとなるのは<code>n</code>が<code>let</code>を使って宣言されているので，その値はコンパイル時には分からない空です。配列の初期化に<code>length</code>として使えるのは<code>const</code>だけです。</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_シーケンス">シーケンス</h2>
<div class="sectionbody">
<div class="paragraph">
<p>シーケンスは配列に似たコンテナですが，長さはコンパイル時に既知である必要はなく，実行中に変えることができます。含まれる要素の型だけを<code>seq[&lt;type&gt;]</code>で指定します。シーケンスは一様，すなわちシーケンスの全ての要素は同じ型でなくてはなりません。</p>
</div>
<div class="paragraph">
<p>シーケンスの要素は<code>@[</code>と<code>]</code>で囲みます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span>
  <span class="n">e1</span><span class="p">:</span> <span class="kt">seq</span><span class="o">[</span><span class="kt">int</span><span class="o">]</span> <span class="o">=</span> <span class="o">@[]</span>   <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="n">f</span> <span class="o">=</span> <span class="o">@[</span><span class="s">"abc"</span><span class="p">,</span> <span class="s">"def"</span><span class="o">]</span>  <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>空のシーケンスの型は宣言しなくてはなりません。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>空でないシーケンスの型は推定できます。この場合は，文字列を格納するシーケンスになります。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>空のシーケンスを初期化する別の方法は，<code>newSeq</code>手続きを呼ぶことです。手続き呼び出しは<a href="#_手続き">次章</a>で学びますが，ここではこのような方法もあることを覚えておきましょう。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span>
  <span class="n">e</span> <span class="o">=</span> <span class="n">newSeq</span><span class="o">[</span><span class="kt">int</span><span class="o">]</span><span class="p">()</span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>型パラメタを角括弧の間に与えて，特定の型のシーケンスが返されるようにします。<br>
よくあるミスは最後の<code>()</code>を忘れることです。これは必ず付けなくてはなりません。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>シーケンスに要素を付け加えるには<code>add</code>関数を使います。文字列に対して行ったことと似ています。追加を行うには，シーケンスは書き換え可能である（<code>var</code>で定義する）必要があり，追加される要素はシーケンスと同じ型でなくてはなりません。</p>
</div>
<div class="listingblock">
<div class="title">seq.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span>
  <span class="n">g</span> <span class="o">=</span> <span class="o">@[</span><span class="sc">'x'</span><span class="p">,</span> <span class="sc">'y'</span><span class="o">]</span>
  <span class="n">h</span> <span class="o">=</span> <span class="o">@[</span><span class="sc">'1'</span><span class="p">,</span> <span class="sc">'2'</span><span class="p">,</span> <span class="sc">'3'</span><span class="o">]</span>

<span class="n">g</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="sc">'z'</span><span class="p">)</span>  <i class="conum" data-value="1"></i><b>(1)</b>
<span class="n">echo</span> <span class="n">g</span>

<span class="n">h</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>    <i class="conum" data-value="2"></i><b>(2)</b>
<span class="n">echo</span> <span class="n">h</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>同一の型（char）である新しい要素を追加。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>同一の型を含む別のシーケンスを追加。</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">@['x', 'y', 'z']
@['1', '2', '3', 'x', 'y', 'z']</code></pre>
</div>
</div>
<div class="paragraph">
<p>既存のシーケンスに異なる型を渡そうとすると，エラーが発生します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span> <span class="n">i</span> <span class="o">=</span> <span class="o">@[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="o">]</span>

<span class="n">i</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="mf">9.81</span><span class="p">)</span> <span class="c"># error </span><i class="conum" data-value="1"></i><b>(1)</b>
<span class="n">g</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>    <span class="c"># error </span><i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>int</code>のシーケンスに<code>float</code>を渡そうとしています。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>char</code>のシーケンスに<code>int</code>を渡そうとしています。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>シーケンスの長さは変化するので長さを知る方法が必要です。長さは<code>len</code>関数を使うと得られます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span> <span class="n">i</span> <span class="o">=</span> <span class="o">@[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="o">]</span>
<span class="n">echo</span> <span class="n">i</span><span class="p">.</span><span class="n">len</span>

<span class="n">i</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span>
<span class="n">echo</span> <span class="n">i</span><span class="p">.</span><span class="n">len</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">3
4</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_要素指定と切り出し">要素指定と切り出し</h2>
<div class="sectionbody">
<div class="paragraph">
<p>要素指定により，インデックスによりコンテナから特定の要素を取り出すことができます。インデックスはコンテナ内の位置です。</p>
</div>
<div class="paragraph">
<p>Nimは他の多くのプログラミング言語と同様に0始まりのインデックスづけを採用しています。つまり，コンテナの最初の要素のインデックスは0で，二番目の要素のインデックスは1などとなります。</p>
</div>
<div class="paragraph">
<p>末尾からのインデックスには <code>^</code> を前に置きます。最後の要素（末尾から一つ目）のインデックスは <code>^1</code> です。</p>
</div>
<div class="paragraph">
<p>要素指定の構文は<code>&lt;container&gt;[&lt;index&gt;]</code>です。</p>
</div>
<div class="listingblock">
<div class="title">indexing.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span> <span class="n">j</span> <span class="o">=</span> <span class="o">[</span><span class="sc">'a'</span><span class="p">,</span> <span class="sc">'b'</span><span class="p">,</span> <span class="sc">'c'</span><span class="p">,</span> <span class="sc">'d'</span><span class="p">,</span> <span class="sc">'e'</span><span class="o">]</span>

<span class="n">echo</span> <span class="n">j</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span>   <i class="conum" data-value="1"></i><b>(1)</b>
<span class="n">echo</span> <span class="n">j</span><span class="o">[</span><span class="p">^</span><span class="mi">1</span><span class="o">]</span>  <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>0始まりの要素指定なでインデックス1の要素は<code>b</code>。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>最後の要素を取得。</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">b
e</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p>切り出しでは一度に連続した要素が得られます。切り出しは（<a href="#_forループ">forループの節</a>で学んだ）範囲と同じ構文を使います。</p>
</div>
<div class="paragraph">
<p><code>start .. stop</code>という構文を使うと両端は切り出しに含まれます。これに対し，<code>start ..&lt; stop</code>ではインデックス<code>stop</code>は切り出しには含まれません。</p>
</div>
<div class="paragraph">
<p>切り出しの構文は<code>&lt;container&gt;[&lt;start&gt; .. &lt;stop&gt;]</code>です。</p>
</div>
<div class="listingblock">
<div class="title">indexing.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="n">echo</span> <span class="n">j</span><span class="o">[</span><span class="mi">0</span> <span class="p">..</span> <span class="mi">3</span><span class="o">]</span>
<span class="n">echo</span> <span class="n">j</span><span class="o">[</span><span class="mi">0</span> <span class="p">..</span><span class="o">&lt;</span> <span class="mi">3</span><span class="o">]</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">@[a, b, c, d]
@[a, b, c]</code></pre>
</div>
</div>
<div class="paragraph">
<p>要素指定と切り出しは，既存の書き換え可能なコンテナと文字列に値を代入するときに使えます。</p>
</div>
<div class="listingblock">
<div class="title">assign.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span>
  <span class="n">k</span><span class="p">:</span> <span class="kt">array</span><span class="o">[</span><span class="mi">5</span><span class="p">,</span> <span class="kt">int</span><span class="o">]</span>
  <span class="n">l</span> <span class="o">=</span> <span class="o">@[</span><span class="sc">'p'</span><span class="p">,</span> <span class="sc">'w'</span><span class="p">,</span> <span class="sc">'r'</span><span class="o">]</span>
  <span class="n">m</span> <span class="o">=</span> <span class="s">"Tom and Jerry"</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="mi">0</span> <span class="p">..</span> <span class="mi">4</span><span class="p">:</span>  <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="n">k</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="mi">7</span> <span class="o">*</span> <span class="n">i</span>
<span class="n">echo</span> <span class="n">k</span>

<span class="n">l</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="sc">'q'</span>        <i class="conum" data-value="2"></i><b>(2)</b>
<span class="n">echo</span> <span class="n">l</span>

<span class="n">m</span><span class="o">[</span><span class="mi">8</span> <span class="p">..</span> <span class="mi">9</span><span class="o">]</span> <span class="o">=</span> <span class="s">"Ba"</span>  <i class="conum" data-value="3"></i><b>(3)</b>
<span class="n">echo</span> <span class="n">m</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>長さ5の配列のインデックスは0から4までです。配列のそれぞれの要素に値を代入しています。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>シーケンスの二番目の要素（インデックス1）に対して代入（書き換え）をしています。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>文字列のインデックス8と9の文字を書き換えています。</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">[0, 7, 14, 21, 28]
@['p', 'q', 'r']
Tom and Barry</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_タプル">タプル</h2>
<div class="sectionbody">
<div class="paragraph">
<p>これまでに学んだ二つのコンテナはどちらも一様でした。これに対し，タプルは非一様データを格納します。つまり，タプルの要素は異なっていても構いません。配列同様にタプルは固定長です。</p>
</div>
<div class="paragraph">
<p>タプルの要素は丸括弧で囲みます。</p>
</div>
<div class="listingblock">
<div class="title">tuples.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span> <span class="n">n</span> <span class="o">=</span> <span class="p">(</span><span class="s">"Banana"</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="sc">'c'</span><span class="p">)</span>  <i class="conum" data-value="1"></i><b>(1)</b>
<span class="n">echo</span> <span class="n">n</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>タプルは異なる型のフィールドを含めることができます。この場合は<code>string</code>，<code>int</code>，そして<code>char</code>です。</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">(Field0: "Banana", Field1: 2, Field2: 'c')</code></pre>
</div>
</div>
<div class="paragraph">
<p>タプルのフィールドには区別するための名前を付けることができます。名前を付けると，インデックスでなく名前でタプルの要素にアクセスできます。</p>
</div>
<div class="listingblock">
<div class="title">tuples.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span> <span class="n">o</span> <span class="o">=</span> <span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="s">"Banana"</span><span class="p">,</span> <span class="n">weight</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="n">rating</span><span class="p">:</span> <span class="sc">'c'</span><span class="p">)</span>

<span class="n">o</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="mi">7</span>          <i class="conum" data-value="1"></i><b>(1)</b>
<span class="n">o</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">"Apple"</span>  <i class="conum" data-value="2"></i><b>(2)</b>
<span class="n">echo</span> <span class="n">o</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>フィールドの値をフィールドのインデックスで変更。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>フィールドの値をフィールドの名前で変更。</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">(name: "Apple", weight: 7, rating: 'c')</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_練習問題_3">練習問題</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>10個の整数を格納できる空の配列を作ってください。</p>
<div class="ulist">
<ul>
<li>
<p>数値10, 20, &#8230;&#8203;, 100で配列を入れてください。（ヒント: ループを使います。)</p>
</li>
<li>
<p>奇数のインデックスである配列の要素だけを印字してください。（値は20, 40, &#8230;&#8203;）。</p>
</li>
<li>
<p>偶数インデックスの要素を5枚してください。変更された配列を印字してください。</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="#_練習問題_2">コラッツ予想の練習問題</a>に再度取り組みます。ただし，今回は各段階で印字するのではなく，シーケンスに追加します。</p>
<div class="ulist">
<ul>
<li>
<p>最初の数を選びます。面白い値には9, 19, 25や27などがあります。</p>
</li>
<li>
<p>最初の数だけを要素とするシーケンスを作ります。</p>
</li>
<li>
<p>前と同じロジックを使い，1にたどり着くまでシーケンスに要素を追加し続けます。</p>
</li>
<li>
<p>シーケンスの長さとシーケンス自体を印字します。</p>
</li>
</ul>
</div>
</li>
<li>
<p>2から100までの中で最も長いコラッツ数列を見つけてください。</p>
<div class="ulist">
<ul>
<li>
<p>範囲内のそれぞれの数に対してコラッツ数列を計算します。</p>
</li>
<li>
<p>これまでの記録よりも現在のシーケンスが長ければ，現在の長さと最初の値を新しい記録として保存します。タプル<code>(longestLength, startingNumber)</code>または独立した二つの変数を使います。</p>
</li>
<li>
<p>最長のシーケンスを与える最初の数とシーケンスの長さを印字します。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
<h1 id="_手続き" class="sect0">手続き</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>手続き，又は他のプログラミング言語で<em>関数</em>とも呼ばれており，特定の作業をするコードの一部を一つの単位にまとめたものです。このようにコードをまとめる利点は，手続きに書いてある内容のコードを再度書き直す代わりに手続きを<em>呼び出す</em>ことができることです。</p>
</div>
<div class="paragraph">
<p>前の複数の章では，コラッツ予想にいくつかの方法で取り組みました。コラッツ予想のロジックを手続きにまとめていれば，同じコードをコラッツ予想の全ての練習問題で使うことができたはずです。</p>
</div>
<div class="paragraph">
<p>これまで多くの組込手続きを使ってきました。例えば，<code>echo</code>で印字し，<code>add</code>で要素をシーケンスに追加し，<code>inc</code>で整数の値を増加させ<code>len</code>でコンテナの長さを取得するなど。ここでは，自前の手続きを作成し，利用する方法を理解します。</p>
</div>
<div class="paragraph">
<p>手続きを使う利点はいくつかあります。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>コードの重複を防ぐ。</p>
</li>
<li>
<p>何をするかに基づいてコードの断片に名前を付けることでコードを読みやすくする。</p>
</li>
<li>
<p>複雑な作業を単純な段階に分解する。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>この節の最初に述べたように，手続きは他の言語で関数とも呼ばれています。この定義は数学での関数の定義を考えると，呼び誤りとも言えます。数学の関数は引数の組を取り（<code>f(x, y)</code>のように。ここで<code>f</code>は関数で<code>x</code>と<code>y</code>はその引数），<em>常に</em>同一の入力に対して同一の答えを返します。</p>
</div>
<div class="paragraph">
<p>プログラムの手続きは，常に同じ値を返すとは限りません。時には，返り値がないこともあります。その理由は，コンピュータプログラムは状態を前に述べた変数に保存でき，手続きはこれを読み書きできるからです。Nimでは<code>func</code>は現在数学的により正確な，副作用がないという制約が課された関数を表すために使うために確保されています。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_手続きの宣言">手続きの宣言</h2>
<div class="sectionbody">
<div class="paragraph">
<p>自前の手続きを使う（呼び出す）前に，作成し何をするか定義する必要があります。</p>
</div>
<div class="paragraph">
<p>手続きは<code>proc</code>キーワードを用いて宣言され，手続き名と確固で囲まれた入力パラメタとのそれらの型が続き，最後の部分はコロンと手続きから返される値の型であり，次のようになります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">proc </span><span class="err">&lt;</span><span class="nf">name</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&lt;</span><span class="n">p1</span><span class="o">&gt;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">type1</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">p2</span><span class="o">&gt;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">type2</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">...):</span> <span class="o">&lt;</span><span class="n">returnType</span><span class="o">&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>手続き本体は，<code>==</code>記号が後ろについた宣言の後に続いて，インデントしたブロックに書きます。</p>
</div>
<div class="listingblock">
<div class="title">callProcs.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">proc </span><span class="nf">findMax</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="kt">int</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="kt">int</span><span class="p">):</span> <span class="kt">int</span> <span class="o">=</span>  <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">x</span>  <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="k">else</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">y</span>
  <span class="c"># this is inside of the procedure</span>
<span class="c"># this is outside of the procedure</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>この宣言の手続きの名前は<code>findMax</code>で，二つのパラメタ<code>x</code>と<code>y</code>をとり，<code>int</code>型を返します。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>値を手続きから返すために<code>return</code>キーワードを使います。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">proc </span><span class="nf">echoLanguageRating</span><span class="p">(</span><span class="n">language</span><span class="p">:</span> <span class="kt">string</span><span class="p">)</span> <span class="o">=</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="k">case</span> <span class="n">language</span>
  <span class="k">of</span> <span class="s">"Nim"</span><span class="p">,</span> <span class="s">"nim"</span><span class="p">,</span> <span class="s">"NIM"</span><span class="p">:</span>
    <span class="n">echo</span> <span class="n">language</span><span class="p">,</span> <span class="s">" is the best language!"</span>
  <span class="k">else</span><span class="p">:</span>
    <span class="n">echo</span> <span class="n">language</span><span class="p">,</span> <span class="s">" might be a second-best language."</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>この<code>echoLanguageRating</code>手続きは与えられた名前を単におうむ返しするだけで，何も返さないので返り値の型は定義されていません。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p>既定ではどのパラメタも変更することはゆるさていないので，次のように書くとエラーが発生します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">proc </span><span class="nf">changeArgument</span><span class="p">(</span><span class="n">argument</span><span class="p">:</span> <span class="kt">int</span><span class="p">)</span> <span class="o">=</span>
  <span class="n">argument</span> <span class="o">+=</span> <span class="mi">5</span>

<span class="k">var</span> <span class="n">ourVariable</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">changeArgument</span><span class="p">(</span><span class="n">ourVariable</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>動作するようにするには，Nimと手続きを使うユーザが引数を変更できるように，変数として宣言する必要があります。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">proc </span><span class="nf">changeArgument</span><span class="p">(</span><span class="n">argument</span><span class="p">:</span> <span class="k">var</span> <span class="kt">int</span><span class="p">)</span> <span class="o">=</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="n">argument</span> <span class="o">+=</span> <span class="mi">5</span>

<span class="k">var</span> <span class="n">ourVariable</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">changeArgument</span><span class="p">(</span><span class="n">ourVariable</span><span class="p">)</span>
<span class="n">echo</span> <span class="n">ourVariable</span>
<span class="n">changeArgument</span><span class="p">(</span><span class="n">ourVariable</span><span class="p">)</span>
<span class="n">echo</span> <span class="n">ourVariable</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>注目すべきは，今度は<code>argument</code>が <code>var int</code>として宣言されていて，単なる<code>int</code>ではないことです。</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">15
20</code></pre>
</div>
</div>
<div class="paragraph">
<p>当然手続に渡す名前も変数として宣言されていなくてはならず，<code>const</code>や<code>let</code>が付与されているものはエラーが生じます。</p>
</div>
<div class="paragraph">
<p>引数で渡すことは良い慣行ですが，手続きの外で宣言された変数と定数を使うことも可能です。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">var</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">100</span>

<span class="k">proc </span><span class="nf">echoX</span><span class="p">()</span> <span class="o">=</span>
  <span class="n">echo</span> <span class="n">x</span>  <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>  <i class="conum" data-value="2"></i><b>(2)</b>

<span class="n">echoX</span><span class="p">()</span>
<span class="n">echoX</span><span class="p">()</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>ここで外部変数<code>x</code>にアクセスします。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>変数として宣言されているので，値を更新することもできます。</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="mi">100</span>
<span class="mi">101</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_手続きの呼び出し">手続きの呼び出し</h2>
<div class="sectionbody">
<div class="paragraph">
<p>手続きを宣言したら，呼び出しができます。多くのプログラミング言語で手続きや関数を呼びだす一般的な方法は名前を示し，次のように引数を括弧で囲むことです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="o">&lt;</span><span class="n">procName</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&lt;</span><span class="n">arg1</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">arg2</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">...)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>手続き呼び出しの結果は変数に保存することができます。</p>
</div>
<div class="paragraph">
<p><code>findMax</code>手続きを上の例から呼び返り値を変数に保存するには，次のようにします。</p>
</div>
<div class="listingblock">
<div class="title">callProcs.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">let</span>
  <span class="n">a</span> <span class="o">=</span> <span class="n">findMax</span><span class="p">(</span><span class="mi">987</span><span class="p">,</span> <span class="mi">789</span><span class="p">)</span>
  <span class="n">b</span> <span class="o">=</span> <span class="n">findMax</span><span class="p">(</span><span class="mi">123</span><span class="p">,</span> <span class="mi">321</span><span class="p">)</span>
  <span class="n">c</span> <span class="o">=</span> <span class="n">findMax</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>  <i class="conum" data-value="1"></i><b>(1)</b>

<span class="n">echo</span> <span class="n">a</span>
<span class="n">echo</span> <span class="n">b</span>
<span class="n">echo</span> <span class="n">c</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>関数<code>findMax</code>の返り値はここで<code>c</code>と名付けられ，最初の二つの呼び出しの返り値を使って呼び出されます （<code>findMax(987, 321)</code>）。</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">987
321
987</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p>Nimは他の多くの言語とは異なり，<a href="https://en.wikipedia.org/wiki/Uniform_Function_Call_Syntax">統一関数呼び出し構文</a>が使えます。この構文を使うと，多様な呼び出し方が可能になります。</p>
</div>
<div class="paragraph">
<p>この構文では，最初の引数が関数名の前に書かれ，残りの引数を括弧の中に入れます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="o">&lt;</span><span class="n">arg1</span><span class="o">&gt;</span><span class="p">.</span><span class="o">&lt;</span><span class="n">procName</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&lt;</span><span class="n">arg2</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">...)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>既にこの構文を使って，要素を既存のシーケンスに追加しました（<code>&lt;seq&gt;.add(&lt;element&gt;)</code>）。この方が<code>add(&lt;seq&gt;, &lt;element&gt;)</code>と書くよりも読みやすく，意図とが明確になります。引数の括弧を省略することも可能です。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="o">&lt;</span><span class="n">procName</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">arg1</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">arg2</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">...</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>このようなスタイルが<code>echo</code>手続きを呼び出すときや，<code>len</code>手続きを引数なしに呼び出すときに使われていることを見てきました。これら二つを組み合わせることも可能ですが，見かけることはあまり多くありません。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="o">&lt;</span><span class="n">arg1</span><span class="o">&gt;</span><span class="p">.</span><span class="o">&lt;</span><span class="n">procName</span><span class="o">&gt;</span> <span class="o">&lt;</span><span class="n">arg2</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">arg3</span><span class="o">&gt;</span><span class="p">,</span> <span class="p">...</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p>統一呼び出し構文を使うと，複数の手続きをつなげるときに読みやすい書き方ができます。</p>
</div>
<div class="listingblock">
<div class="title">ufcs.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">proc </span><span class="nf">plus</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="kt">int</span><span class="p">):</span> <span class="kt">int</span> <span class="o">=</span>  <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>

<span class="k">proc </span><span class="nf">multi</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="kt">int</span><span class="p">):</span> <span class="kt">int</span> <span class="o">=</span>
  <span class="k">return</span> <span class="n">x</span> <span class="o">*</span> <span class="n">y</span>

<span class="k">let</span>
  <span class="n">a</span> <span class="o">=</span> <span class="mi">2</span>
  <span class="n">b</span> <span class="o">=</span> <span class="mi">3</span>
  <span class="n">c</span> <span class="o">=</span> <span class="mi">4</span>

<span class="n">echo</span> <span class="n">a</span><span class="p">.</span><span class="n">plus</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="o">==</span> <span class="n">plus</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
<span class="n">echo</span> <span class="n">c</span><span class="p">.</span><span class="n">multi</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">==</span> <span class="n">multi</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">a</span><span class="p">)</span>


<span class="n">echo</span> <span class="n">a</span><span class="p">.</span><span class="n">plus</span><span class="p">(</span><span class="n">b</span><span class="p">).</span><span class="n">multi</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>  <i class="conum" data-value="2"></i><b>(2)</b>
<span class="n">echo</span> <span class="n">c</span><span class="p">.</span><span class="n">multi</span><span class="p">(</span><span class="n">b</span><span class="p">).</span><span class="n">plus</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>  <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>複数のパラメタの型が同じであれば，型の宣言を簡潔に書くことができます。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>まず<code>a</code>に<code>b</code>を加え，演算の結果（2 + 3 = 5）<code>multi</code>手続きの最初の引数として与え，<code>c</code>を掛けます（5 * 4 = 20）。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>まず<code>c</code>と<code>b</code>を掛けて，演算の結果（4 * 3 = 12）を<code>plus</code>手続きの最初の引数として与え<code>a</code>を足します（12 + 2 = 14）。</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">true
true
20
14</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_result変数">Result変数</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Nimでは，値を返す全ての手続きは<code>result</code>変数が暗黙に宣言され，（既定値で）初期化されます。手続きは，インデントされたブロックの末尾に到達したら<code>return</code>文がなくても<code>result</code>変数を返します。</p>
</div>
<div class="listingblock">
<div class="title">result.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">proc </span><span class="nf">findBiggest</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="kt">seq</span><span class="o">[</span><span class="kt">int</span><span class="o">]</span><span class="p">):</span> <span class="kt">int</span> <span class="o">=</span>  <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="k">for</span> <span class="n">number</span> <span class="ow">in</span> <span class="n">a</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">number</span> <span class="o">&gt;</span> <span class="n">result</span><span class="p">:</span>
      <span class="n">result</span> <span class="o">=</span> <span class="n">number</span>
  <span class="c"># the end of proc                   </span><i class="conum" data-value="2"></i><b>(2)</b>

<span class="k">let</span> <span class="n">d</span> <span class="o">=</span> <span class="o">@[</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="o">-</span><span class="mi">15</span><span class="o">]</span>
<span class="n">echo</span> <span class="n">findBiggest</span><span class="p">(</span><span class="n">d</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>返り値の型は<code>int</code>で<code>result</code>変数は<code>int</code>の既定値<code>0</code>で初期化されます。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>手続きの末尾に到達すると，<code>result</code>の値が返されます。</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">33</code></pre>
</div>
</div>
<div class="paragraph">
<p>この手続きは<code>result</code>変数を説明するためのもので，100%正確ではありません。負の値だけを格納したシーケンスを渡すとこの手続きは（シーケンスに含まれ<em>ない</em>）<code>0</code>を返します。</p>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
注意! Nimの古い版（Nim 0.19.0より前）文字列とシーケンスの既定値は<a href="https//en.wikipedia.org/wiki/Null_pointer"><code>nil</code></a>だったので，返り値の型として使うときには<code>result</code>変数はs（<code>""</code>）または空シーケンス（<code>@[]</code>）として初期化する必要がありました。
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">result.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">proc </span><span class="nf">keepOdds</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="kt">seq</span><span class="o">[</span><span class="kt">int</span><span class="o">]</span><span class="p">):</span> <span class="kt">seq</span><span class="o">[</span><span class="kt">int</span><span class="o">]</span> <span class="o">=</span>
  <span class="c"># result = @[]          </span><i class="conum" data-value="1"></i><b>(1)</b>
  <span class="k">for</span> <span class="n">number</span> <span class="ow">in</span> <span class="n">a</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">number</span> <span class="ow">mod</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
      <span class="n">result</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>


<span class="k">let</span> <span class="n">f</span> <span class="o">=</span> <span class="o">@[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">57</span><span class="p">,</span> <span class="mi">34</span><span class="p">,</span> <span class="mi">98</span><span class="o">]</span>
<span class="n">echo</span> <span class="n">keepOdds</span><span class="p">(</span><span class="n">f</span><span class="p">)</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Nimバージョン0.19.0以降ではこの行は不要。シーケンスは自動的に空シーケンスとして初期化されます。<br>
Nimの古い版ではシーケンスを初期化しなければならず，この行がないとコンパイルエラー発生がしました（<code>result</code>は既に暗黙に宣言されているので，<code>var</code>は使ってはなりません。）</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">@[1, 43, 57]</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p>手続きの中で別の手続きを呼び出すことができます。</p>
</div>
<div class="listingblock">
<div class="title">filterOdds.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">proc </span><span class="nf">isDivisibleBy3</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="kt">int</span><span class="p">):</span> <span class="kt">bool</span> <span class="o">=</span>
  <span class="k">return</span> <span class="n">x</span> <span class="ow">mod</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span>

<span class="k">proc </span><span class="nf">filterMultiplesOf3</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="kt">seq</span><span class="o">[</span><span class="kt">int</span><span class="o">]</span><span class="p">):</span> <span class="kt">seq</span><span class="o">[</span><span class="kt">int</span><span class="o">]</span> <span class="o">=</span>
  <span class="c"># result = @[]            </span><i class="conum" data-value="1"></i><b>(1)</b>
  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">a</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">i</span><span class="p">.</span><span class="n">isDivisibleBy3</span><span class="p">():</span>  <i class="conum" data-value="2"></i><b>(2)</b>
      <span class="n">result</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>


<span class="k">let</span>
  <span class="n">g</span> <span class="o">=</span> <span class="o">@[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="o">]</span>
  <span class="n">h</span> <span class="o">=</span> <span class="o">@[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="o">]</span>
  <span class="n">i</span> <span class="o">=</span> <span class="o">@[</span><span class="mi">626</span><span class="p">,</span> <span class="mi">45390</span><span class="p">,</span> <span class="mi">3219</span><span class="p">,</span> <span class="mi">4210</span><span class="p">,</span> <span class="mi">4126</span><span class="o">]</span>

<span class="n">echo</span> <span class="n">filterMultiplesOf3</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="n">echo</span> <span class="n">h</span><span class="p">.</span><span class="n">filterMultiplesOf3</span><span class="p">()</span>
<span class="n">echo</span> <span class="n">filterMultiplesOf3</span> <span class="n">i</span>   <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>ここも新しいNimの版では不要。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>以前に宣言された手続きの呼び出し。返り値の型は<code>bool</code>でif文で使うことが可能。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>上述の手続きを呼び出す第3の方法。</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">@[6, 9, 0, 3]
@[3]
@[45390, 3219]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_前方宣言">前方宣言</h2>
<div class="sectionbody">
<div class="paragraph">
<p>この節の一番最初に述べたように，コードブロックを使わずに手続きを宣言することができます。その理由は手続きを呼び出す前に宣言する必要があるからです。次は動作しません。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="n">echo</span> <span class="mf">5.</span><span class="n">plus</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="c"># error      </span><i class="conum" data-value="1"></i><b>(1)</b>

<span class="k">proc </span><span class="nf">plus</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="kt">int</span><span class="p">):</span> <span class="kt">int</span> <span class="o">=</span>  <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>plus</code>がまだ定義されていないので，エラーを生じます。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>ここで<code>plus</code>を定義していますが，使った後なのでNimはまだ知りません。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>これを回避するには，前方宣言と呼ばれるものを使います。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">proc </span><span class="nf">plus</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="kt">int</span><span class="p">):</span> <span class="kt">int</span>    <i class="conum" data-value="1"></i><b>(1)</b>

<span class="n">echo</span> <span class="mf">5.</span><span class="n">plus</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>              <i class="conum" data-value="2"></i><b>(2)</b>

<span class="k">proc </span><span class="nf">plus</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="kt">int</span><span class="p">):</span> <span class="kt">int</span> <span class="o">=</span>  <i class="conum" data-value="3"></i><b>(3)</b>
  <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>ここでNimに<code>plus</code>で続きが存在し，定義がこの通りであることを知らせます。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>手続きを自由に使うことができ，これは動作します。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>ここで<code>plus</code>が実装されます。当然前にした定義と一致していなければなりません。</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_練習問題_4">練習問題</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>与えられた名前に対して挨拶する（"Hello &lt;name&gt;"を印字する）手続きを作ってください。名前のシーケンスを作り，この手続きを使ってそれぞれに人に挨拶してください。</p>
</li>
<li>
<p>三つの値のうちで最大のものを返す手続き<code>findMax3</code>を作ってください。</p>
</li>
<li>
<p>2次元平面の点は<code>tuple[x, y: float]</code>で表されます。二つの点を受け取り，二つの点の合計となる新しい点を返す手続きを書いてください（xとyは独立に足します）。</p>
</li>
<li>
<p>"tick"と"tock"という単語を印字する<code>tick</code>と<code>tock</code>という手続きを作ってください。何回走ったか記録する大域変数を用意し，交互にカウンタが20に達するまで走らせてください。期待される出力は"tick"と"tock"が20回交互に繰り返されるというものです。（ヒント: 前方宣言を使います）。</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
無限ループに入ってしまったときは，Ctrl+Cを押してプログラムの実行を止めることができます。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>全ての手続きを異なるパラメタで実行してください。</p>
</div>
</div>
</div>
<h1 id="_モジュール" class="sect0">モジュール</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>これまでは，新しいNimのファイルを作ると既定で使える機能を学んできました。モジュールを使うと既定から拡張して，特定の目的のために用いる機能を使いすることができます。</p>
</div>
<div class="paragraph">
<p>よく用いられるNimのモジュールを挙げます。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>strutils</code>: 文字列を扱う追加の機能</p>
</li>
<li>
<p><code>sequtils</code>: シーケンスに対する追加の機能</p>
</li>
<li>
<p><code>math</code>: 数学関数（対数，平方根 &#8230;&#8203;), 三角関数（sin, cos, &#8230;&#8203;）</p>
</li>
<li>
<p><code>times</code>: 時間を測定したり扱ったりする。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><a href="https://nim-lang.org/docs/lib.html">標準ライブラリ</a>や<a href="https://nimble.directory/">nimbleパッケージマネージャ</a>にはもっとたくさんあります。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_モジュールのインはポート">モジュールのインはポート</h2>
<div class="sectionbody">
<div class="paragraph">
<p>モジュールをインポートして機能を全て使いたいときは<code>import &lt;moduleName&gt;</code>をファイルに書きます。通常ファイルの先頭に書いて，コードが何を使うか分かるようにします。</p>
</div>
<div class="listingblock">
<div class="title">stringutils.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">import</span> <span class="n">strutils</span>       <i class="conum" data-value="1"></i><b>(1)</b>

<span class="k">let</span>
  <span class="n">a</span> <span class="o">=</span> <span class="s">"My string with whitespace."</span>
  <span class="n">b</span> <span class="o">=</span> <span class="sc">'!'</span>

<span class="n">echo</span> <span class="n">a</span><span class="p">.</span><span class="n">split</span><span class="p">()</span>        <i class="conum" data-value="2"></i><b>(2)</b>
<span class="n">echo</span> <span class="n">a</span><span class="p">.</span><span class="n">toUpperAscii</span><span class="p">()</span> <i class="conum" data-value="3"></i><b>(3)</b>
<span class="n">echo</span> <span class="n">b</span><span class="p">.</span><span class="n">repeat</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>      <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><a href="https://nim-lang.org/docs/strutils.html">strutils</a>をインポート。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>strutils</code>モジュールから<code>split</code>を使い，文字列を単語の列に分割します。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>toUpperAscii</code>は全てのASCII文字を大文字にします。</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>repeat</code>も<code>strutils</code>モジュールからで。文字や文字列全体を指定回数繰り返します。</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">@["My", "string", "with", "whitespace."]
MY STRING WITH WHITESPACE.
!!!!!</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
他のプログラミング言語（特にPython）のユーザは，Nimkのインポートの動作は「誤り」に見えるかもしれません。その場合は<a href="https://narimiran.github.io/2019/07/01/nim-import.html">こちら</a>をご覧ください。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="listingblock">
<div class="title">maths.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">import</span> <span class="n">math</span>                 <i class="conum" data-value="1"></i><b>(1)</b>

<span class="k">let</span>
  <span class="n">c</span> <span class="o">=</span> <span class="mf">30.0</span> <span class="c"># degrees</span>
  <span class="n">cRadians</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">degToRad</span><span class="p">()</span>   <i class="conum" data-value="2"></i><b>(2)</b>

<span class="n">echo</span> <span class="n">cRadians</span>
<span class="n">echo</span> <span class="n">sin</span><span class="p">(</span><span class="n">cRadians</span><span class="p">).</span><span class="n">round</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <i class="conum" data-value="3"></i><b>(3)</b>

<span class="n">echo</span> <span class="mi">2</span><span class="p">^</span><span class="mi">5</span>                    <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><a href="https://nim-lang.org/docs/math.html">math</a>をインポート。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>度をラジアンに変換するのに<code>degToRad</code>を使います。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>sin</code>にはラジアンを与えます。結果を小数第二位で丸めるために（これも<code>math</code>由来の）roundを使います（そうしないと結果は0.4999999999999999のようになるでしょう）。</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Mathモジュールの <code>^</code> 演算子は数値の冪乗の計算につかいます。</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">0.5235987755982988
0.5
32</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_自前のモジュール">自前のモジュール</h2>
<div class="sectionbody">
<div class="paragraph">
<p>コードがプロジェクトのコードが多くなり，特定のことをする部品に分けることが適切であることがよくあります。二つのファイルを一つのフォルダの中に作り，<code>firstFile.nim</code>と<code>secondFile.nim</code>と名付けた場合，一方から他方は次のようにインポートできます。</p>
</div>
<div class="listingblock">
<div class="title">firstFile.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">proc </span><span class="nf">plus</span><span class="o">*</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="kt">int</span><span class="p">):</span> <span class="kt">int</span> <span class="o">=</span> <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>

<span class="k">proc </span><span class="nf">minus</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="kt">int</span><span class="p">):</span> <span class="kt">int</span> <span class="o">=</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="k">return</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>plus</code>手続きには，名前の後にアステリスク（<code>*</code>) がついていることに注目してください。これはNimにこのファイルをインポートした別のファイルはこの手続きを使えることを伝えています。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>対照的にこの手続きは，このファイルをインポートしたファイルからは見えません。</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">secondFile.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">import</span> <span class="n">firstFile</span>          <i class="conum" data-value="1"></i><b>(1)</b>

<span class="n">echo</span> <span class="n">plus</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>          <i class="conum" data-value="2"></i><b>(2)</b>
<span class="n">echo</span> <span class="n">minus</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="c"># error </span><i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>ここで<code>firstFile.nim</code>をインポートします。ここには<code>.nim</code>拡張子は不要です。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>firstFile</code>に定義されており見えるので，これは問題なく動作し<code>15</code>が印字されます。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>しかしこれはエラーが発程します。<code>minus</code>手続きは名前の後ろにアステリスクが付いていないので見えないからです。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>これら二つのファイルよりももっとあるときは一つ（またはそれ以上の）サブディレクトリに整理することができます。ディレクトリ構造が次のようであるとします。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">.
├── myOtherSubdir
│   ├── fifthFile.nim
│   └── fourthFile.nim
├── mySubdir
│   └── thirdFile.nim
├── firstFile.nim
└── secondFile.nim</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>secondFile.nim</code>にその他の全てのファイルをインポートするには次のようにします。</p>
</div>
<div class="listingblock">
<div class="title">secondFile.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">import</span> <span class="n">firstFile</span>
<span class="k">import</span> <span class="n">mySubdir</span><span class="o">/</span><span class="n">thirdFile</span>
<span class="k">import</span> <span class="n">myOtherSubdir</span> <span class="o">/</span> <span class="o">[</span><span class="n">fourthFile</span><span class="p">,</span> <span class="n">fifthFile</span><span class="o">]</span></code></pre>
</div>
</div>
</div>
</div>
<h1 id="_ユーザ入力の取り扱い" class="sect0">ユーザ入力の取り扱い</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>これまでに学んだ項目（基本データ型とコンテナ，流れの制御，ループ）を使えば多数の簡単なプログラムが書けます。</p>
</div>
<div class="paragraph">
<p>この章ではプログラムをより対話型にする方法を学びます。そのためには，ファイルからデータを読み込んだり，ユーザに入力を求めたりする手段が必要となります。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ファイルからの読み込み">ファイルからの読み込み</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>people.txt</code>という名前のファイルがNimコードと同じディレクトリにあったといます。ファイルの中身は次のようなものです。</p>
</div>
<div class="listingblock">
<div class="title">people.txt</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="n">Alice</span> <span class="n">A</span><span class="p">.</span>
<span class="n">Bob</span> <span class="n">B</span><span class="p">.</span>
<span class="n">Carol</span> <span class="n">C</span><span class="p">.</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>プログラム中でファイルの中身を名前のリスト（シーケンス）として使います。</p>
</div>
<div class="listingblock">
<div class="title">readFromFile.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">import</span> <span class="n">strutils</span>

<span class="k">let</span> <span class="n">contents</span> <span class="o">=</span> <span class="n">readFile</span><span class="p">(</span><span class="s">"people.txt"</span><span class="p">)</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="n">echo</span> <span class="n">contents</span>

<span class="k">let</span> <span class="n">people</span> <span class="o">=</span> <span class="n">contents</span><span class="p">.</span><span class="n">splitLines</span><span class="p">()</span>    <i class="conum" data-value="2"></i><b>(2)</b>
<span class="n">echo</span> <span class="n">people</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>ファイルの中身を読むには<code>readFile</code>手続きを使い，読むファイルのパスを与えます（Nimのプログラムと同じディレクトリにある場合はファイル名だけで十分です）。読み込み結果は複数行の文字列になります。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>複数行の文字列を文字列のシーケンス（個々の文字列は一行の全ての内容を含みます）に分割するには，<code>strutils</code>モジュールの<code>splitLines</code>を使います。</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">Alice A.
Bob B.
Carol C.
            <i class="conum" data-value="1"></i><b>(1)</b>
@["Alice A.", "Bob B.", "Carol C.", ""] <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>元のファイルには最後の改行（最後が空行）があり，ここにも残っています。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>最後の改行のために，シーケンスは想定よりも長くなっています。</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>最後の改行の問題を解決するためには，<code>strutils</code>の<code>strip</code>手続きをファイルを読んだ後に使います。これは，文字列の最初と最後の空白文字と呼ばれるものを除去します。空白文字は，スペースを作る，スペースや改行，タブなどが含まれます。</p>
</div>
<div class="listingblock">
<div class="title">readFromFile2.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">import</span> <span class="n">strutils</span>

<span class="k">let</span> <span class="n">contents</span> <span class="o">=</span> <span class="n">readFile</span><span class="p">(</span><span class="s">"people.txt"</span><span class="p">).</span><span class="n">strip</span><span class="p">()</span> <i class="conum" data-value="1"></i><b>(1)</b>
<span class="n">echo</span> <span class="n">contents</span>

<span class="k">let</span> <span class="n">people</span> <span class="o">=</span> <span class="n">contents</span><span class="p">.</span><span class="n">splitLines</span><span class="p">()</span>
<span class="n">echo</span> <span class="n">people</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>strip</code>によって期待通りの結果が得られます。</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">Alice A.
Bob B.
Carol C.
@["Alice A.", "Bob B.", "Carol C."]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ユーザ入力の読み取り">ユーザ入力の読み取り</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ユーザと対話するには，入力を求めて処理し，利用する必要があります。<a href="https://en.wikipedia.org/wiki/Standard_streams#Standard_input_(stdin)">標準入力（stdin）</a>から読むため<code>readLine</code>手続に<code>stdin</code>を渡します。</p>
</div>
<div class="listingblock">
<div class="title">interaction1.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="n">echo</span> <span class="s">"Please enter your name:"</span>
<span class="k">let</span> <span class="n">name</span> <span class="o">=</span> <span class="n">readLine</span><span class="p">(</span><span class="n">stdin</span><span class="p">)</span>  <i class="conum" data-value="1"></i><b>(1)</b>

<span class="n">echo</span> <span class="s">"Hello "</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="s">", nice to meet you!"</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>name</code>の型は文字列と推定されます。</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">Please enter your name:
        <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>ユーザの入力を待ちます。名前を書いて<code>Enter</code>を押すとプログラムは再開します。</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">Please enter your name:
Alice
Hello Alice, nice to meet you!</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
古い版のVS Codeだといつもの方法 （<code>Ctrl+Alt+N</code>）で動作しません。出力ウィンドウではユーザの入力ができないからです。ターミナルで例を実行する必要があります。<br>
VS Codeの新しい版ではこのような制限はありません。
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_数値の取り扱い">数値の取り扱い</h2>
<div class="sectionbody">
<div class="paragraph">
<p>ファイルやユーザ入力を読んだ結果は常に文字列になります。数値として使うには，文字列を数値に変換す必要があります。ここでも<code>strutils</code>モジュールを使い，<code>parseInt</code>で整数または<code>parseFloat</code>で浮動小数点数にします。</p>
</div>
<div class="listingblock">
<div class="title">interaction2.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">import</span> <span class="n">strutils</span>

<span class="n">echo</span> <span class="s">"Please enter your year of birth:"</span>
<span class="k">let</span> <span class="n">yearOfBirth</span> <span class="o">=</span> <span class="n">readLine</span><span class="p">(</span><span class="n">stdin</span><span class="p">).</span><span class="n">parseInt</span><span class="p">()</span> <i class="conum" data-value="1"></i><b>(1)</b>

<span class="k">let</span> <span class="n">age</span> <span class="o">=</span> <span class="mi">2018</span> <span class="o">-</span> <span class="n">yearOfBirth</span>

<span class="n">echo</span> <span class="s">"You are "</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="s">" years old."</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>文字列を整数に変換。このように書いた場合ユーザは有効な整数を入力するものと想定しています。ユーザが<code>'79</code>または<code>ninety-three</code>と入力したらどうなるでしょうか。試してみてください。</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">Please enter your year of birth:
1934
You are 84 years old.</code></pre>
</div>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p>Nimコードと同じディレクトリにファイル<code>numbers.txt</code>があり，次のような中身だとします。</p>
</div>
<div class="listingblock">
<div class="title">numbers.txt</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="mf">27.3</span>
<span class="mf">98.24</span>
<span class="mf">11.93</span>
<span class="mf">33.67</span>
<span class="mf">55.01</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>このファイルを読んで，与えられた数値の合計と平均を求めるには，次のようにします。</p>
</div>
<div class="listingblock">
<div class="title">interaction3.nim</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="nim"><span class="k">import</span> <span class="n">strutils</span><span class="p">,</span> <span class="n">sequtils</span><span class="p">,</span> <span class="n">math</span>        <i class="conum" data-value="1"></i><b>(1)</b>

<span class="k">let</span>
  <span class="n">strNums</span> <span class="o">=</span> <span class="n">readFile</span><span class="p">(</span><span class="s">"numbers.txt"</span><span class="p">).</span><span class="n">strip</span><span class="p">().</span><span class="n">splitLines</span><span class="p">()</span>  <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="n">nums</span> <span class="o">=</span> <span class="n">strNums</span><span class="p">.</span><span class="n">map</span><span class="p">(</span><span class="n">parseFloat</span><span class="p">)</span>       <i class="conum" data-value="3"></i><b>(3)</b>

<span class="k">let</span>
  <span class="n">sumNums</span> <span class="o">=</span> <span class="n">sum</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span>                  <i class="conum" data-value="4"></i><b>(4)</b>
  <span class="n">average</span> <span class="o">=</span> <span class="n">sumNums</span> <span class="o">/</span> <span class="kt">float</span><span class="p">(</span><span class="n">nums</span><span class="p">.</span><span class="n">len</span><span class="p">)</span>  <i class="conum" data-value="5"></i><b>(5)</b>

<span class="n">echo</span> <span class="n">sumNums</span>
<span class="n">echo</span> <span class="n">average</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>複数のモジュールをインポートします。<code>strutils</code>は<code>strip</code>と<code>splitLines</code>，<code>sequtils</code>は<code>map</code>，そして<code>math</code>は<code>sum</code>を提供します。</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>最後の改行を取り除き，行を分割して文字列のシーケンスを作ります。</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>map</code>は手続（この場合は<code>parseFloat</code>）をコンテナのそれぞれのメンバに適用します。 それぞれの文字列を浮動小数点数にし，新しい浮動小数点数のシーケンスを返します。</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>math</code>モジュールの<code>sum</code>を使ってシーケンスの全ての要素の和を求めます。</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><code>sunNums</code>は浮動小数点数なので，シーケンスの長さを浮動小数点数に変換する必要があります。</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="output">226.15
45.23</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_練習問題_5">練習問題</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>ユーザに身長と体重を尋ねてください。<a href="https://en.wikipedia.org/wiki/Body_mass_index">BMI</a>インデックスを計算します。BMIの値と分類を報告ユーザにしてください。</p>
</li>
<li>
<p><a href="#_練習問題_4">コラッツ予想の練習問題</a>で，今度はユーザに最初の数を聞くプログラムを作ってください。結果のシーケンスを印字してください。</p>
</li>
<li>
<p>反転してほしい文字列を聞いてください。文字列を取り反転したものを返す手続きを作ってください。例えば，ユーザが<code>Nim-lang</code>と入れたら手続きが<code>gnal-miN</code>と返すようにします。（ヒント: 要素指定と<code>countdown</code>を使います。）</p>
</li>
</ol>
</div>
</div>
</div>
<h1 id="_まとめ_2" class="sect0">まとめ</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>このチュートリアルを締めるときが来ました。チュートリアルが読者に役に立つもので，読者がプログラミングやNimプログラミング言語の第一歩を踏み出せたということを期待しています。</p>
</div>
<div class="paragraph">
<p>扱った内容は基礎であり上部を撫でただけにすぎませんが，読者は簡単なプログラムを書き簡単な作業や問題を解くことに十分なものです。Nimはもっと多くを提供しているので，引き続きその可能性を探求してください。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_次の段階">次の段階</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Nimをチュートリアルで学ぶには</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://nim-lang.org/docs/tut1.html">Official Nim tutorial</a></p>
</li>
<li>
<p><a href="https://nim-by-example.github.io/">Nim by example</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>プログラミングの問題を解くには</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://adventofcode.com/">Advent of Code</a>: 毎年12月に発表される面白い問題のシリーズ。古い問題（2015年以降）のアーカイブがあります。</p>
</li>
<li>
<p><a href="https://projecteuler.net/">Project Euler</a>: 主に数学の問題。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p>コード書きを楽しみましょう!</p>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p>&#160;</p>
</div>
<hr>
<div class="paragraph">
<p>&#160;</p>
</div>
<div class="paragraph">
<p>原文のソースは<a href="https://github.com/narimiran/nim-basics">Github</a>,
和訳のソースは<a href="https://github.com/tenomoto/nim-basics_ja">Github</a>にあります。</p>
</div>
</div>
</div>
</div>
</body>
</html>